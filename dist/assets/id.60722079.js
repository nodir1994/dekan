import{d as G,n as M,u as A,a as P,bO as V,B,Z as U,y as q,i as r,b6 as W,o as f,e as y,f as e,j as d,k as g,z as m,t as l,bs as Z,g as Y,F as H,r as J}from"./index.3390162f.js";import{S as K}from"./sweetalert2.all.fdef424e.js";import{d as Q,o as X,t as x,e as ee,f as te,h as se}from"./graph.0eb60427.js";const le={pagetitle:"`Talaba ma'lumotlari`",class:"diploma-list"},oe={class:"card mb-3"},ae={class:"card-body"},ne={class:"mb-3"},de={class:"btns back-c py-1.5 px-4",type:"submit"},ie=e("i",{class:"mdi mdi-arrow-left font-size-14 align-middle me-1 me-1"},null,-1),ce={class:"card-title mb-3"},re={class:"table-responsive"},ue={class:"content-table"},_e={class:"table-rowed"},me={class:"table-rowed"},be=e("br",null,null,-1),pe={style:{color:"#ccc","font-size":"inherit"}},he={class:"card panel-header-bg"},ve={class:"card-body"},fe={class:"panel-header"},ye={class:"card-title"},ge={class:"panel-toggles"},we={class:"filterBlock"},$e={class:"btns c-filter py-1.5 px-4"},ke=e("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),Be={class:"collapse__block"},Se={class:"row"},je={class:"my-2 col-xl-3"},Ce={class:"form-label",for:"yu"},Oe={class:"my-2 col-xl-3"},Ue={for:"division-name-input",class:"form-label"},Ye={class:"my-2 col-xl-3"},Ne={for:"division-name-select",class:"form-label"},Le={class:"my-2 col-xl-3"},Te={for:"division-name-select",class:"form-label"},ze={class:"row table-division"},Ee={class:"col-md-12"},Fe={class:"card"},Ie={class:"card-body"},Re={class:"top d-flex justify-content-between mb-4"},De={class:"mb-0"},Ge={class:"table-responsive"},Me={class:"content-table"},Ae={class:"table-key-elements"},Pe=e("th",null,"#",-1),Ve={class:"d-flex justify-content-end mt-3"},qe=e("i",{class:"mdi mdi-content-save font-size-14 align-middle me-1"},null,-1),We=e("i",{class:"mdi mdi-download"},null,-1),Ze=["disabled"],He=e("i",{class:"mdi mdi-check font-size-14 align-middle me-1"},null,-1),et=G({__name:"id",setup(Je){const b=M().params.id,N=A(),{t:i}=P(),p=V(),S=B(!1),s=U({number:null,date:null,command_id:null,student_id:null,semester_id:null,subjects:[],arr:[]}),h=U({teacherOptions:null,orderOptions:null}),u=B([]),w=B(!0);q(async()=>{let t=await Q(b).then(o=>o.result);Object.assign(s,t),t==null||t.subjects.forEach(o=>{u.value.push({subject_id:o.subject_id,ball:o.ball,employee_id:o.employee_id})}),h.orderOptions=await X().then(o=>o.result.data),h.teacherOptions=await x().then(o=>o.result.data.map(n=>({id:n.employee_id,name:n.fullname})))});async function L(){const t=K.mixin({customClass:{confirmButton:"btn btn-danger me-2",cancelButton:"btn btn-success"},buttonsStyling:!1});try{(await t.fire({title:i("Delete_message.Are_you_sure"),text:i("Delete_message.Action_irreversible"),icon:"warning",confirmButtonText:i("Delete_message.Yes_Delete"),cancelButtonText:i("Delete_message.Yo_Cancel"),showCancelButton:!0})).isConfirmed&&(await ee(b),S.value=!0,p.success(i("Delete_message.Record_deleted_successfull")),N.push("/performance/graphic"))}catch{p.error(i("Dashboard_Error"))}finally{S.value=!1}}async function T(){try{let t={id:b,number:s.number,date:s.date,command_id:s.command_id},o=[];if(u.value.forEach(n=>{var c,v;n.ball>=((c=s==null?void 0:s.rating_system)==null?void 0:c.min)&&n.ball<=((v=s==null?void 0:s.rating_system)==null?void 0:v.max)&&n.employee_id&&o.push(n)}),t.datas=o,w.value&&t.datas.length){w.value=!1;const n=await te(t);p.success(i(n.result)),setTimeout(()=>{w.value=!0},100)}t.datas.length==0&&p.error(i("grade_false"))}catch(t){console.error(t)}}function z(t){const o=new Blob([t],{type:"application/pdf"}),n=URL.createObjectURL(o),c=document.createElement("a");c.href=n,c.download="FileName"+new Date+".pdf",c.click()}async function E(){let t=await se(b);z(t)}return(t,o)=>{var j,C;const n=r("router-link"),c=r("a-input"),v=r("a-date-picker"),$=r("a-select"),F=r("b-card"),I=r("b-collapse"),R=r("a-form-item"),D=W("b-toggle");return f(),y("div",le,[e("div",oe,[e("div",ae,[e("div",ne,[d(n,{to:"/performance/graphic"},{default:g(()=>[e("button",de,[ie,m(l(t.$t("Prev")),1)])]),_:1})]),e("h5",ce,l(t.$t("Student_information")),1),e("div",re,[e("table",ue,[e("thead",null,[e("tr",_e,[e("th",null,l(t.$t("Student")),1),e("th",null,l(t.$t("Education_Type")),1),e("th",null,l(t.$t("by_Specialty")),1),e("th",null,l(t.$t("Group")),1)])]),e("tbody",null,[e("tr",me,[e("td",null,l(s.student),1),e("td",null,[e("div",null,[m(l(s==null?void 0:s.edu_type)+" ",1),be,e("span",pe,l(s==null?void 0:s.edu_form),1)])]),e("td",null,l((j=s==null?void 0:s.specialty)==null?void 0:j.name),1),e("td",null,l(s==null?void 0:s.academic_group),1)])])])])])]),e("div",he,[e("div",ve,[e("div",fe,[e("h5",ye,l(t.$t("Personal_graph")),1),e("div",ge,[e("div",we,[Z((f(),y("button",$e,[ke,m(l(t.$t("Filter")),1)])),[[D,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",Be,[d(I,{visible:"",id:"collapse-3"},{default:g(()=>[d(F,null,{default:g(()=>[e("div",Se,[e("div",je,[e("label",Ce,l(t.$t("Ptt_Number")),1),d(c,{id:"yu",value:s.number,"onUpdate:value":o[0]||(o[0]=a=>s.number=a),class:"form-control"},null,8,["value"])]),e("div",Oe,[e("label",Ue,l(t.$t("apply_Date")),1),d(v,{value:s.date,"onUpdate:value":o[1]||(o[1]=a=>s.date=a),placeholder:"YYYY-MM-DD",type:"date","value-format":"YYYY-MM-DD"},null,8,["value"])]),e("div",Ye,[e("label",Ne,l(t.$t("Decree")),1),d($,{"field-names":{value:"id",label:"name"},options:h.orderOptions,placeholder:Y(i)("Choose"),value:s.command_id,"onUpdate:value":o[2]||(o[2]=a=>s.command_id=a)},null,8,["options","placeholder","value"])]),e("div",Le,[e("label",Te,l(t.$t("Semester_Name")),1),d($,{disabled:"",value:s.semester_id,placeholder:Y(i)("Choose_Semester"),"field-names":{value:"id",label:"name"},"allow-clear":""},null,8,["value","placeholder"])])])]),_:1})]),_:1})]),e("div",ze,[e("div",Ee,[e("div",Fe,[e("div",Ie,[e("div",Re,[e("h5",De,l(t.$t("Self plan_courses")),1),e("span",null,l((C=s==null?void 0:s.rating_system)==null?void 0:C.name),1)]),e("div",Ge,[e("table",Me,[e("thead",null,[e("tr",Ae,[Pe,e("th",null,l(t.$t("Subjects")),1),e("th",null,l(t.$t("Semester_Name")),1),e("th",null,l(t.$t("sciense_type")),1),e("th",null,l(t.$t("acload/credit")),1),e("th",null,l(t.$t("Score")),1),e("th",null,l(t.$t("gradeSome")),1),e("th",null,l(t.$t("Teacher_Name1")),1)])]),e("tbody",null,[(f(!0),y(H,null,J(s.subjects,(a,_)=>{var O;return f(),y("tr",{class:"table-key-elements",key:_},[e("td",null,l(_+1),1),e("td",null,l(a==null?void 0:a.subject),1),e("td",null,l((O=s==null?void 0:s.semester)==null?void 0:O.semester)+"-"+l(t.$t("semestr")),1),e("td",null,l(a==null?void 0:a.subject_type),1),e("td",null,l(a==null?void 0:a.load)+"/"+l(a==null?void 0:a.credit),1),e("td",null,[d(c,{type:"number",required:"",value:u.value[_].ball,"onUpdate:value":k=>u.value[_].ball=k,class:"form-control"},null,8,["value","onUpdate:value"])]),e("td",null,[d(c,{type:"text",disabled:"",value:a.grade,class:"form-control"},null,8,["value"])]),e("td",null,[d(R,{class:"mb-0",name:"nameFaculty",style:{width:"100%"}},{default:g(()=>[d($,{value:u.value[_].employee_id,"onUpdate:value":k=>u.value[_].employee_id=k,"field-names":{value:"id",label:"name"},options:h.teacherOptions},null,8,["value","onUpdate:value","options"])]),_:2},1024)])])}),128))])])]),e("div",Ve,[e("button",{class:"btns c-delete me-2",onClick:L,type:"button"},[qe,m(" "+l(t.$t("Delete")),1)]),e("button",{onClick:E,class:"btns application-color py-1 px-2",type:"button"},[We,m(l(t.$t("Download")),1)]),e("button",{class:"btns c-save ms-2",type:"button",onClick:T,disabled:!s.number||!s.date||!s.command_id},[He,m(l(t.$t("Save")),1)],8,Ze)])])])])])])}}});export{et as default};
