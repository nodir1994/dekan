import{_ as P}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as st,d as F,a as T,bO as V,B as U,Z as q,y as G,bn as at,i as k,o as r,e as p,f as t,t as a,s as x,l as y,v as Y,j as m,g as I,z as v,bS as Z,bq as ot,w as A,b6 as nt,bs as it,k as L,F as lt,r as ct,aR as dt}from"./index.3390162f.js";import{c as K,e as rt}from"./index.30e99442.js";import{h as S}from"./helper.569bc08f.js";import{_ as ut}from"./Pagination.f4a9fc5d.js";import{S as _t}from"./sweetalert2.all.fdef424e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./moment.2cad4b18.js";import"./_plugin-vue_export-helper.cdc0426e.js";const O=st();async function pt(f){try{const{data:i}=await O({url:"api/qualifications",method:"GET",params:f});return i}catch(i){throw i}}async function mt(f){try{const{data:i}=await O({url:`api/qualifications/${f}`,method:"DELETE"});return i}catch(i){throw i}}async function ft(f){try{const{data:i}=await O({url:`/api/qualifications/${f}/status`,method:"PUT"});return i}catch(i){throw i}}async function ht(f){try{const{data:i}=await O({url:`/api/qualifications/${f}`,method:"GET"});return i}catch(i){throw i}}async function yt(f){try{const{data:i}=await O({url:"api/qualifications",method:"POST",data:f});return i}catch(i){throw i}}async function vt(f,i){try{const{data:b}=await O({url:`api/qualifications/${f}`,method:"PUT",data:i});return b}catch(b){throw b}}const bt={id:"createQualificationModal",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},gt={class:"modal-dialog"},$t={class:"modal-content"},wt={class:"modal-header bg-card-header"},kt={class:"modal-title",id:"myModalLabel"},Ct=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},[t("i",{class:"mdi mdi-close font-size-18"})],-1),zt={class:"modal-body"},Bt={class:"card-body"},Ot={class:"row"},Ut={class:"mb-3",name:"special"},qt={for:"division-name-select",class:"form-label"},Nt={key:0,class:"text-danger small"},Et={class:"mb-3 col-md-4",name:"nameUz"},Dt={for:"division-name-input",class:"form-label"},Lt=t("sup",null," \u26AC",-1),St={key:0,class:"text-danger small"},Tt={class:"mb-3 col-md-4",name:"nameRu"},xt={for:"division-name-input",class:"form-label"},It=t("sup",null," \u26AC",-1),Mt={key:0,class:"text-danger small"},Rt={class:"mb-3 col-md-4",name:"nameEn"},Qt={for:"division-name-input",class:"form-label"},jt=t("sup",null," \u26AC",-1),At={key:0,class:"text-danger small"},Pt={class:"mb-3 col-md-4",name:"textarea__specialUz"},Ft={for:"division-name-input",class:"form-label"},Vt=t("sup",null," \u26AC",-1),Gt={key:0,class:"text-danger small"},Yt={class:"mb-3 col-md-4",name:"textarea__specialRu"},Zt={for:"division-name-input",class:"form-label"},Kt=t("sup",null," \u26AC",-1),Wt={key:0,class:"text-danger small"},Ht={class:"mb-3 col-md-4",name:"textarea__specialEn"},Jt={for:"division-name-input",class:"form-label"},Xt=t("sup",null," \u26AC",-1),te={key:0,class:"text-danger small"},ee={class:"d-flex justify-content-end"},se=t("i",{class:"mdi mdi-close font-size-14 align-middle me-1"},null,-1),ae={type:"submit",class:"btns c-save"},oe=t("i",{class:"mdi mdi-content-save font-size-14 align-middle me-1"},null,-1),ne=F({__name:"CreateQualificationFormModal",props:{qualId:null},emits:["update:list","close"],setup(f,{emit:i}){const{t:b}=T(),z=V(),h=U(!1),w=f,g=i;U();const C=U([]),s=q({name:{uz:"",ru:"",en:""},description:{uz:"",ru:"",en:""},specialty_id:null}),o=q({["name.uz"]:[],["description.uz"]:[],specialty_id:""});G(async()=>{const l=document.getElementById("createQualificationModal");l==null||l.addEventListener("hidden.bs.modal",c=>{N(),E(),g("close")}),C.value=await K().then(c=>{var e;return(e=c.result)==null?void 0:e.data.map(n=>({id:n.id,name:n.name+`-(${n.code})`}))})}),at(async()=>{if(w.qualId){const l=await ht(w.qualId);Object.assign(s,l.result)}});async function $(){var l,c;try{h.value=!0,E();const e=w.qualId?await vt(w.qualId,s):await yt(s);w.qualId?z.success(b("Data_stored_successfully")):z.success(b("success_created")),g("update:list"),D()}catch(e){Object.assign(o,(c=(l=e.response)==null?void 0:l.data)==null?void 0:c.errors)}finally{h.value=!1}}function N(){Object.assign(s,{name:{uz:"",ru:"",en:""},description:{uz:"",ru:"",en:""},specialty_id:null})}function E(){h.value=!0,Object.assign(o,{["name.uz"]:[],["description.uz"]:[],specialty_id:""}),h.value=!1}function D(){Z.getOrCreateInstance("#createQualificationModal").hide()}return(l,c)=>{const e=P,n=k("a-select"),u=k("a-input"),B=k("a-textarea");return r(),p("div",bt,[t("div",gt,[t("div",$t,[t("div",wt,[t("h5",kt,a(l.$t("Qualification")),1),Ct]),t("div",zt,[t("div",Bt,[h.value?(r(),x(e,{key:0})):y("",!0),t("form",{onSubmit:Y($,["prevent"])},[t("div",Ot,[t("div",Ut,[t("label",qt,a(l.$t("by_Specialty")),1),m(n,{"filter-option":I(S).filterOptionByName,value:s.specialty_id,"onUpdate:value":c[0]||(c[0]=_=>s.specialty_id=_),"show-search":"","field-names":{value:"id",label:"name"},options:C.value,"allow-clear":""},null,8,["filter-option","value","options"]),o.specialty_id?(r(),p("span",Nt,a(o.specialty_id[0]),1)):y("",!0)]),t("div",Et,[t("label",Dt,[v(a(l.$t("Name_Uz")),1),Lt]),m(u,{value:s.name.uz,"onUpdate:value":c[1]||(c[1]=_=>s.name.uz=_)},null,8,["value"]),o["name.uz"]?(r(),p("span",St,a(o["name.uz"][0]),1)):y("",!0)]),t("div",Tt,[t("label",xt,[v(a(l.$t("Name_RU")),1),It]),m(u,{value:s.name.ru,"onUpdate:value":c[2]||(c[2]=_=>s.name.ru=_)},null,8,["value"]),o["name.ru"]?(r(),p("span",Mt,a(o["name.ru"][0]),1)):y("",!0)]),t("div",Rt,[t("label",Qt,[v(a(l.$t("Name_EN")),1),jt]),m(u,{value:s.name.en,"onUpdate:value":c[3]||(c[3]=_=>s.name.en=_)},null,8,["value"]),o["name.en"]?(r(),p("span",At,a(o["name.en"][0]),1)):y("",!0)]),t("div",Pt,[t("label",Ft,[v(a(l.$t("Data"))+" (UZ)",1),Vt]),m(B,{value:s.description.uz,"onUpdate:value":c[4]||(c[4]=_=>s.description.uz=_),placeholder:"","auto-size":{minRows:4,maxRows:5}},null,8,["value"]),o["description.uz"]?(r(),p("span",Gt,a(o["description.uz"][0]),1)):y("",!0)]),t("div",Yt,[t("label",Zt,[v(a(l.$t("Data"))+" (RU)",1),Kt]),m(B,{value:s.description.ru,"onUpdate:value":c[5]||(c[5]=_=>s.description.ru=_),placeholder:"","auto-size":{minRows:4,maxRows:5}},null,8,["value"]),o["description.ru"]?(r(),p("span",Wt,a(o["description.ru"][0]),1)):y("",!0)]),t("div",Ht,[t("label",Jt,[v(a(l.$t("Data"))+" (EN)",1),Xt]),m(B,{value:s.description.en,"onUpdate:value":c[6]||(c[6]=_=>s.description.en=_),placeholder:"","auto-size":{minRows:4,maxRows:5}},null,8,["value"]),o["description.en"]?(r(),p("span",te,a(o["description.en"][0]),1)):y("",!0)])]),t("div",ee,[t("button",{"data-bs-dismiss":"modal",class:"btns c-delete me-1",onClick:D,type:"button"},[se,v(a(l.$t("Close")),1)]),t("button",ae,[oe,v(" "+a(l.$t("Save")),1)])])],32)])])])])])}}}),ie={pagetitle:"'Kvalifikatsiyalar'",class:"qulification-page"},le={class:"card panel-header-bg"},ce={class:"card-body"},de={class:"panel-header"},re={class:"card-title"},ue={class:"panel-toggles"},_e=t("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),pe={class:"filterBlock"},me={class:"btns c-filter py-1.5 px-4"},fe=t("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),he={class:"collapse__block"},ye={class:"my-2 col-md-6 form--item"},ve={for:"yu"},be={class:"my-2 col-md-6 form--item"},ge={for:"yu"},$e={class:"card"},we={class:"card-body"},ke={key:1,class:"table-responsive"},Ce={class:"content-table"},ze={class:"table-row d-grid w-100"},Be=t("th",null,"#",-1),Oe={class:"gridjs-td"},Ue={class:"list-inline mb-0"},qe={class:"list-inline-item"},Ne={class:"edit__project"},Ee=["onClick"],De=t("i",{class:"mdi mdi-pencil font-size-18 text-primary"},null,-1),Le=[De],Se={class:"list-inline-item"},Te={class:"delete__project"},xe=["onClick"],Ie=t("i",{class:"mdi mdi-delete font-size-18"},null,-1),Me=[Ie],Re={class:"form-check form-switch my-auto"},Qe=["checked","disabled","onChange"],je={key:2},Ae={class:"text-center"},Pe={class:"text-center"},Fe={key:0,class:"element-count mb-2"},es=F({__name:"index",async setup(f){let i,b;T();const z=U(null),{t:h}=T(),w=V(),g=U(!1),C=q({});G(async()=>{C.educationTypeOptions=await rt().then(e=>e.result),C.specialListOptions=await K().then(e=>{var n;return(n=e.result)==null?void 0:n.data.map(u=>({id:u.id,name:u.name+`-(${u.code})`}))})});const s=q({current_page:1,data:[],links:[]}),o=q({edu_type_id:null,specialty_id:null,per_page:S.pagePer,page:1});[i,b]=ot(()=>$()),await i,b(),A(()=>s.current_page,async e=>{Number(e)&&(o.page=Number(e),await $(e))}),A(()=>[o.specialty_id,o.edu_type_id],async(e,n)=>{await $()});async function $(e){let n={per_page:o.per_page,page:e||1};o.edu_type_id&&(n.edu_type_id=o.edu_type_id),o.specialty_id&&(n.specialty_id=o.specialty_id);try{g.value=!0;const u=await pt(n);Object.assign(s,u.result)}catch(u){console.log(u)}finally{g.value=!1}}function N(e){z.value=e,Z.getOrCreateInstance("#createQualificationModal").show()}async function E(e){const n=_t.mixin({customClass:{confirmButton:"btn btn-danger me-2",cancelButton:"btn btn-success"},buttonsStyling:!1});try{(await n.fire({title:h("Delete_message.Are_you_sure"),text:h("Delete_message.Action_irreversible"),icon:"warning",cancelButtonText:h("Delete_message.Yo_Cancel"),confirmButtonText:h("Delete_message.Yes_Delete"),showCancelButton:!0})).isConfirmed&&(await mt(e),await $(),n.fire(h("Delete_message.Removed"),h("The_classification_was_successfully_removed"),"success"))}catch(u){n.fire(h("Dashboard_Error"),u.message,"error")}}function D(){z.value=null}async function l(){await $()}async function c(e){try{g.value=!0,await ft(e),await $(),w.success(h("Data_stored_successfully"))}catch(n){w.error(n.message)}finally{g.value=!1}}return(e,n)=>{const u=k("a-select"),B=k("a-space"),_=k("b-card"),W=k("b-collapse"),H=P,J=k("router-link"),X=ut,tt=ne,et=nt("b-toggle");return r(),p("div",ie,[t("div",le,[t("div",ce,[t("div",de,[t("h5",re,a(e.$t("Qualification")),1),t("div",ue,[t("button",{class:"btns c-save py-1.5 px-4 me-3",type:"button",onClick:n[0]||(n[0]=d=>N(null))},[_e,v(a(e.$t("add")),1)]),t("div",pe,[it((r(),p("button",me,[fe,v(a(e.$t("Filter")),1)])),[[et,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",he,[m(W,{visible:"",id:"collapse-3"},{default:L(()=>[m(_,null,{default:L(()=>[t("form",{class:"row",onSubmit:Y(l,["prevent"])},[t("div",ye,[m(B,null,{default:L(()=>[m(u,{"filter-option":I(S).filterOptionByName,"show-search":"",class:"form--item",value:o.edu_type_id,"onUpdate:value":n[1]||(n[1]=d=>o.edu_type_id=d),"field-names":{value:"id",label:"name"},"allow-clear":"",options:C.educationTypeOptions},null,8,["filter-option","value","options"])]),_:1}),t("label",ve,a(e.$t("Choose_Education_Type")),1)]),t("div",be,[m(B,null,{default:L(()=>[m(u,{"filter-option":I(S).filterOptionByName,"show-search":"",class:"form--item","field-names":{value:"id",label:"name"},value:o.specialty_id,"onUpdate:value":n[2]||(n[2]=d=>o.specialty_id=d),options:C.specialListOptions,"allow-clear":""},null,8,["filter-option","value","options"])]),_:1}),t("label",ge,a(e.$t("select__specialty")),1)])],32)]),_:1})]),_:1})]),t("div",$e,[t("div",we,[g.value?(r(),x(H,{key:0})):y("",!0),s.data.length?(r(),p("div",ke,[t("table",Ce,[t("thead",null,[t("tr",ze,[Be,t("th",null,a(e.$t("Name")),1),t("th",null,a(e.$t("by_Specialty")),1),t("th",null,a(e.$t("Education_Type")),1),t("th",null,a(e.$t("action")),1),t("th",null,a(e.$t("Enable")),1)])]),t("tbody",null,[(r(!0),p(lt,null,ct(s==null?void 0:s.data,(d,M)=>{var R,Q;return r(),p("tr",{class:"table-row d-grid w-100",key:M},[t("td",null,a((s.current_page-1)*s.per_page+M+1),1),t("td",null,[m(J,{to:"/student/qualification/creat"}),v(a(d==null?void 0:d.name),1)]),t("td",null,a((R=d==null?void 0:d.specialty)==null?void 0:R.code),1),t("td",null,a((Q=d==null?void 0:d.edu_type)==null?void 0:Q.name),1),t("td",Oe,[t("ul",Ue,[t("li",qe,[t("div",Ne,[t("a",{type:"text",onClick:j=>N(d==null?void 0:d.id)},Le,8,Ee)])]),t("li",Se,[t("div",Te,[t("a",{class:"text-danger",type:"danger",onClick:j=>E(d.id)},Me,8,xe)])])])]),t("td",null,[t("div",Re,[t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:d.status,disabled:g.value,onChange:j=>c(d.id)},null,40,Qe)])])])}),128))])]),s.last_page>1?(r(),x(X,dt({key:0,class:"mt-2"},{...s},{"current-page":s.current_page,"onUpdate:currentPage":n[3]||(n[3]=d=>s.current_page=d)}),null,16,["current-page"])):y("",!0)])):(r(),p("div",je,[t("h5",Ae,a(e.$t("No_data")),1),t("p",Pe,a(e.$t("No_information_found")),1)]))]),m(tt,{"qual-id":z.value,"onUpdate:list":$,onClose:D},null,8,["qual-id"])]),s.data.length?(r(),p("span",Fe,a(s.current_page)+"-"+a(s.data.length+s.per_page*(s.current_page-1))+"/ "+a(e.$t("Total_Point"))+": "+a(s.total),1)):y("",!0)])}}});export{es as default};
