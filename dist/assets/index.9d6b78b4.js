import{_ as P}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{d as T,a as j,bO as E,B as v,Z as N,bn as x,o as l,e as r,f as t,t as s,s as M,l as f,F as R,r as F,g as O,bU as U,p as tt,m as st,u as at,bq as et,w as A,i as D,j as b,k as S,z as w,v as ot,aR as nt,bS as ct}from"./index.3390162f.js";import{a as dt,c as lt,d as it,b as rt}from"./order-list.31611d4b.js";import{_ as _t}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as ut}from"./Pagination.f4a9fc5d.js";import{S as ht}from"./sweetalert2.all.fdef424e.js";import{h as z}from"./helper.569bc08f.js";import"./vue.runtime.esm-bundler.84001772.js";import"./moment.2cad4b18.js";const V=m=>(tt("data-v-c4f210de"),m=m(),st(),m),mt={id:"attachCommandsModal",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},pt={class:"modal-dialog"},ft={class:"modal-content"},yt={class:"modal-header bg-card-header"},gt={class:"modal-title",id:"myModalLabel"},bt=V(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},[t("i",{class:"mdi mdi-close font-size-18"})],-1)),vt={class:"modal-body"},$t={key:1,class:"table-responsive"},wt={class:"table-vertical"},Ct={class:"table-row-import d-grid w-100"},kt=V(()=>t("th",null,"#",-1)),Dt={key:2},St={class:"text-center"},Nt={class:"text-center mb-0"},Mt={class:"pb-2 mt-2"},Bt={key:0,class:"element-count"},It=T({__name:"AttachCommandsModal",props:{commandId:null},emits:["update:list","close"],setup(m,{emit:C}){const y=m;j(),E();const _=v(!1);v();const i=N({data:[]});return x(async()=>{if(y.commandId){_.value=!0;const c=await dt(y.commandId);i.data=await c.result,_.value=!1}}),(c,B)=>{var p,$,n;const g=P;return l(),r("div",mt,[t("div",pt,[t("div",ft,[t("div",yt,[t("h5",gt,s(c.$t("Students_attached_to_the_command")),1),bt]),t("div",vt,[_.value?(l(),M(g,{key:0})):f("",!0),(p=i==null?void 0:i.data)!=null&&p.length?(l(),r("div",$t,[t("table",wt,[t("thead",null,[t("tr",Ct,[kt,t("th",null,s(c.$t("First_Name")),1),t("th",null,s(c.$t("Semester_Name")),1),t("th",null,s(c.$t("Group")),1),t("th",null,s(c.$t("apply_Date")),1)])]),t("tbody",null,[(l(!0),r(R,null,F(i.data,(o,u)=>(l(),r("tr",{class:"table-row-import d-grid w-100",key:u},[t("td",null,s(u+1),1),t("td",null,s(o==null?void 0:o.fullname),1),t("td",null,s(o==null?void 0:o.semester)+"-"+s(c.$t("semester_number")),1),t("td",null,s(o==null?void 0:o.academic_group),1),t("td",null,s(O(U)(new Date(o==null?void 0:o.updated_at),"YYYY-MM-DD")),1)]))),128))])])])):(l(),r("div",Dt,[t("h5",St,s(c.$t("No_data")),1),t("p",Nt,s(c.$t("No_information_found")),1)])),t("div",Mt,[($=i==null?void 0:i.data)!=null&&$.length?(l(),r("span",Bt,s(c.$t("Total_Point"))+": "+s((n=i==null?void 0:i.data)==null?void 0:n.length),1)):f("",!0)])])])])])}}});const Yt=_t(It,[["__scopeId","data-v-c4f210de"]]),Lt={pagetitle:"'Buyruqlar'",class:"order-list-page"},At={class:"card panel-header-bg"},zt={class:"card-body"},Pt={class:"panel-header"},Tt={class:"card-title"},jt={class:"panel-toggles"},Et=t("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),Rt=t("i",{class:"mdi mdi-check-all font-size-14 align-middle me-1"},null,-1),Ft={class:"card"},Ot={class:"card-body"},Ut={class:"my-2 col-md-10 form--item"},Vt={for:"yu"},qt={class:"my-2 col-xl-2"},Ht={type:"submit",class:"btn-search search-color"},Gt=t("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Wt={class:"card"},Zt={class:"card-body"},Jt={key:1,class:"table-responsive"},Kt={class:"content-table"},Qt={class:"table-row w-100 d-grid"},Xt=t("th",null,"#",-1),xt={key:0},ts=["onClick"],ss=t("i",{class:"mdi mdi-eye c-sacces ml-2"},null,-1),as={class:"justify-content-center"},es=["href"],os=t("i",{class:"mdi mdi-download me-1"},null,-1),ns=[os],cs={class:"gridjs-td"},ds={class:"list-inline mb-0"},ls={class:"list-inline-item"},is={class:"edit__project"},rs=["onClick"],_s=t("i",{class:"mdi mdi-pencil font-size-18 text-primary"},null,-1),us=[_s],hs={class:"list-inline-item"},ms={class:"delete__project"},ps=["onClick"],fs=t("i",{class:"mdi mdi-delete font-size-18"},null,-1),ys=[fs],gs={class:"form-check form-switch my-auto"},bs=["checked","disabled","onChange"],vs={key:2},$s={class:"text-center"},ws={class:"text-center"},Cs={key:0,class:"element-count mb-2"},zs=T({__name:"index",async setup(m){let C,y;const{t:_}=j(),i=E(),c=v(!1),B=at(),g=v(!0),p=v(null);async function $(){await u()}const n=N({current_page:1,data:[],links:[]}),o=N({page:1,academic_year_id:null,faculty_id:null,search:"",per_page:z.pagePer});[C,y]=et(()=>u()),await C,y(),A(()=>o.academic_year_id,async(a,d)=>{await u()}),A(()=>n.current_page,async a=>{Number(a)&&(o.page=Number(a),await u(a))});async function u(a){let d={page:a||1,per_page:o.per_page};o.academic_year_id&&(d.academic_year_id=o.academic_year_id),o.faculty_id&&(d.faculty_id=o.faculty_id),o.search&&(d.search=o.search),c.value=!0;try{if(g.value){g.value=!1;const h=await lt(d);Object.assign(n,h.result),setTimeout(()=>{g.value=!0},z.loaderRefresh)}}catch(h){console.log(h)}finally{c.value=!1}}async function q(a){B.push(`/status-student/order-list/${a}`)}async function H(a){const d=ht.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger ml-2"},buttonsStyling:!1});try{(await d.fire({title:_("Delete_message.Are_you_sure"),text:_("Delete_message.Action_irreversible"),icon:"warning",confirmButtonText:_("Delete_message.Yes_Delete"),cancelButtonText:_("Delete_message.Yo_Cancel"),showCancelButton:!0})).isConfirmed&&(await it(a),await u(),d.fire(_("Delete_message.Removed"),_("Delete_message.Record_deleted_successfull"),"success"))}catch(h){d.fire(_("Dashboard_Error"),h.message,"error")}}async function G(a){try{c.value=!0,await rt(a),await u(),i.success(_("Data_stored_successfully"))}catch(d){i.error(d.message)}finally{c.value=!1}}function W(){p.value=null}function Z(a){p.value=a,ct.getOrCreateInstance("#attachCommandsModal").show()}return(a,d)=>{const h=D("router-link"),J=D("a-input"),K=D("a-space"),Q=ut,X=Yt;return l(),r("div",Lt,[t("div",At,[t("div",zt,[t("div",Pt,[t("h5",Tt,s(a.$t("Commands")),1),t("div",jt,[b(h,{to:"/status-student/order-list/create-order",class:"btns c-save py-1.5 px-4 me-3"},{default:S(()=>[Et,w(" "+s(a.$t("Create")),1)]),_:1}),b(h,{to:"/status-student/order-list/apply-order",class:"btns c-save py-1.5 px-4"},{default:S(()=>[Rt,w(s(a.$t("apply_Decree")),1)]),_:1})])])])]),t("div",Ft,[t("div",Ot,[t("form",{onSubmit:ot($,["prevent"]),class:"row"},[t("div",Ut,[b(K,null,{default:S(()=>[b(J,{id:"yu",class:"form-control","allow-clear":"",value:o.search,"onUpdate:value":d[0]||(d[0]=e=>o.search=e)},null,8,["value"])]),_:1}),t("label",Vt,s(a.$t("Search_by_Name_Number")),1)]),t("div",qt,[t("button",Ht,[Gt,w(s(a.$t("Search")),1)])])],32)])]),t("div",Wt,[t("div",Zt,[c.value?(l(),M(P,{key:0})):f("",!0),n.data.length?(l(),r("div",Jt,[t("table",Kt,[t("thead",null,[t("tr",Qt,[Xt,t("th",null,s(a.$t("Command_number")),1),t("th",null,s(a.$t("Decree_Date")),1),t("th",null,s(a.$t("Name")),1),t("th",null,s(a.$t("Decree_Type")),1),t("th",null,s(a.$t("Structure_Faculty")),1),t("th",null,s(a.$t("Student_Contingents")),1),t("th",null,s(a.$t("Created_At")),1),t("th",null,s(a.$t("Download")),1),t("th",null,s(a.$t("action")),1),t("th",null,s(a.$t("Enable")),1)])]),t("tbody",null,[(l(!0),r(R,null,F(n.data,(e,I)=>{var Y,L;return l(),r("tr",{class:"table-row w-100 d-grid",key:I},[t("td",null,s((n.current_page-1)*n.per_page+I+1),1),t("td",null,s(e.number),1),t("td",null,s(e.date),1),t("td",null,s(e.name),1),t("td",null,s((Y=e==null?void 0:e.command_type)==null?void 0:Y.name),1),t("td",null,s((L=e==null?void 0:e.department)==null?void 0:L.name),1),t("td",null,[e!=null&&e.student_count?(l(),r("span",xt,[t("a",{onClick:k=>Z(e.id)},[w(s(e.student_count)+" ",1),ss],8,ts)])):f("",!0)]),t("td",null,s(O(U)(new Date(e.created_at),"YYYY-MM-DD HH:mm:ss")),1),t("td",as,[t("a",{href:e==null?void 0:e.file,target:"_blank",class:"btns c-save"},ns,8,es)]),t("td",cs,[t("ul",ds,[t("li",ls,[t("div",is,[t("a",{onClick:k=>q(e.id)},us,8,rs)])]),t("li",hs,[t("div",ms,[t("a",{class:"text-danger",type:"danger",onClick:k=>H(e.id)},ys,8,ps)])])])]),t("td",null,[t("div",gs,[t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:e.status,disabled:c.value,onChange:k=>G(e.id)},null,40,bs)])])])}),128))])]),n.last_page>1?(l(),M(Q,nt({key:0,class:"mt-2"},{...n},{"current-page":n.current_page,"onUpdate:currentPage":d[1]||(d[1]=e=>n.current_page=e)}),null,16,["current-page"])):f("",!0)])):(l(),r("div",vs,[t("h5",$s,s(a.$t("No_data")),1),t("p",ws,s(a.$t("No_information_found")),1)]))])]),n.data.length?(l(),r("span",Cs,s(n.current_page)+"-"+s(n.data.length+n.per_page*(n.current_page-1))+"/ "+s(a.$t("Total_Point"))+": "+s(n.total),1)):f("",!0),b(X,{"command-id":p.value,"onUpdate:list":u,onClose:W},null,8,["command-id"])])}}});export{zs as default};
