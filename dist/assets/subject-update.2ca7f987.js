import{u as V,f as O}from"./subject.a5ecd5ae.js";import{p as z}from"./plan.0a3ba948.js";import{d as L,n as R,a as q,bO as A,B as F,bq as B,Z as C,i as T,o as U,e as X,f as a,j as c,k as f,z as o,t as n,g as y,bV as Z}from"./index.3390162f.js";import{_ as G}from"./SubjectForm.vue_vue_type_script_setup_true_lang.506bd05c.js";import"./SubmitButton.vue_vue_type_script_setup_true_lang.fe21b651.js";import"./index.30e99442.js";import"./helper.569bc08f.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const H={pagetitle:"'Xaftaliklar'",class:"weeksPage"},J={class:"card panel-header-bg"},K={class:"card-body"},M={class:"panel-header"},P={class:"card-title"},Q={class:"panel-toggles"},W={class:"btns black-c py-1.5 px-4",type:"submit"},Y=a("i",{class:"mdi mdi-arrow-left font-size-14 align-middle me-1 me-1"},null,-1),ee={class:"card"},te={class:"card-body"},me=L({__name:"subject-update",async setup(ae){var j,v,x,k,w,S;let r,i;const _=R(),d=(v=(j=_.params)==null?void 0:j.id)!=null?v:null,D=(k=(x=_.params)==null?void 0:x.idSemester)!=null?k:null,b=(S=(w=_.params)==null?void 0:w.idSubject)!=null?S:null,{t:g}=q(),h=A(),l=F(!1),u=([r,i]=B(()=>z().then(t=>t.result)),r=await r,i(),r);let $=u==null?void 0:u.data.find(t=>t.id==d).name;const e=C({edu_plan_id:d,semester_id:D,ratinggrade_id:null,final_exam_type_id:null,credit:null,total_load:null,type:null,date_start:"",date_end:"",subjects:[],audience_hours:[],exam_types:[],additional_types:[],subject_type_code:null}),m=C({edu_plan_id:[],semester_id:[],ratinggrade_id:[],final_exam_type_id:[],credit:[],total_load:[],type:[],date_start:[],date_end:[],subjects:[],audience_hours:[],exam_types:[],additional_types:[]});async function E(){var t,p;try{l.value=!0;let s={edu_plan_id:e.edu_plan_id,semester_id:e.semester_id,ratinggrade_id:e.ratinggrade_id,final_exam_type_id:e.final_exam_type_id,credit:e.credit,total_load:e.total_load,type:e.type,date_start:e.date_start,date_end:e.date_end,subjects:e.subjects,audience_hours:e.audience_hours,exam_types:e.exam_types,additional_types:e.additional_types,subject_type_code:e.subject_type_code};const se=await V(b,e);h.success(g("Data_stored_successfully")),Z.back()}catch(s){Object.assign(m,(p=(t=s.response)==null?void 0:t.data)==null?void 0:p.errors),h.error(g("Failed")+": "+s.message)}finally{l.value=!1}}[r,i]=B(()=>I()),await r,i();async function I(){const t=await O(b);Object.assign(e,t.result)}function N(t){m[t]=[]}return(t,p)=>{const s=T("router-link");return U(),X("div",H,[a("div",J,[a("div",K,[a("div",M,[a("h5",P,[c(s,{to:"/curriculum/curriculum"},{default:f(()=>[o(n(t.$t("Curriculum")),1)]),_:1}),o(" / "),c(s,{to:`/curriculum/curriculum/${y(d)}/subjects`},{default:f(()=>[o(n(y($)),1)]),_:1},8,["to"]),o(" / "+n(t.$t("Revision_of_science_program")),1)]),a("div",Q,[c(s,{to:`/curriculum/curriculum/${y(d)}/subjects`},{default:f(()=>[a("button",W,[Y,o(n(t.$t("Back")),1)])]),_:1},8,["to"])])])])]),a("div",ee,[a("div",te,[c(G,{"form-state":e,errors:m,"is-loading":l.value,onSubmit:E,onClearError:N},null,8,["form-state","errors","is-loading"])])])])}}});export{me as default};
