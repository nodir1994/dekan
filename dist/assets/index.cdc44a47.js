import{bR as ie,d as R,a as A,bO as G,B,h as Y,c as q,Z as j,y as le,bn as ne,w as N,i as k,o as y,e as f,f as e,t as o,v as W,j as m,g,l as E,z as M,bS as Z,bq as D,b6 as ce,bs as de,k as O,s as V,F as re,r as _e,aR as ue}from"./index.3390162f.js";import{e as H,am as pe}from"./index.30e99442.js";import{h as L}from"./helper.569bc08f.js";import{_ as me}from"./NoData.ac42776e.js";import{_ as ye}from"./Pagination.f4a9fc5d.js";import{_ as he}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{S as fe}from"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";/* empty css                                                               */import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";const $=ie();async function ve(_){try{const{data:a}=await $({url:"api/specialties",method:"GET",params:_});return a}catch(a){throw a}}async function be(_){try{const{data:a}=await $({url:`api/specialties/${_}`,method:"DELETE"});return a}catch(a){throw a}}async function ge(_){try{const{data:a}=await $({url:`/api/specialties/${_}/status`,method:"PUT"});return a}catch(a){throw a}}async function we(_,a){try{const{data:d}=await $({url:`api/gov-specialties?edu_type_id=${_}`,method:"GET",params:a});return d}catch(d){throw d}}async function $e(_,a){try{const{data:d}=await $({url:`api/specialties/${_}`,method:"PUT",data:a});return d}catch(d){throw d}}async function Ce(_){try{const{data:a}=await $({url:"api/specialties",method:"POST",data:_});return a}catch(a){throw a}}async function Se(_){try{const{data:a}=await $({url:`api/specialties/${_}`,method:"PUT"});return a}catch(a){throw a}}const ke={id:"createSpecialityModal",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},Be={class:"modal-dialog"},Te={class:"modal-content"},Oe={class:"modal-header bg-card-header"},Ee={class:"modal-title",id:"myModalLabel"},Me=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},[e("i",{class:"mdi mdi-close font-size-18"})],-1),Ie={class:"modal-body"},Ne={class:"card-body"},Le={class:"mb-3",name:"nameFaculty"},je={for:"division-name-select",class:"form-label"},xe={class:"mb-3",name:"optionsEducationType"},Fe={for:"division-name-select",class:"form-label"},Pe={key:0,class:"text-danger small"},Ue={class:"mb-3",name:"nameSpecial"},ze={for:"division-name-select",class:"form-label"},De={key:0,class:"text-danger small"},Ve={class:"mb-3",name:"paymentForm"},Re={for:"division-name-select",class:"form-label"},Ae={key:0,class:"text-danger small"},Ge={class:"d-flex justify-content-end"},Ye={type:"button",class:"btns c-cancel me-1","data-bs-dismiss":"modal"},qe=e("i",{class:"mdi mdi-close font-size-14 align-middle me-1"},null,-1),We=["disabled"],Ze=e("i",{class:"mdi mdi-content-save font-size-14 align-middle me-1"},null,-1),He=R({__name:"CreateSpecialtyFormModal",props:{specialId:null},emits:["update:list","close"],setup(_,{emit:a}){const{t:d}=A(),C=G(),h=B(!1),w=_,v=a,b=Y(),T=q(()=>{var t,s;return(s=(t=b==null?void 0:b.user)==null?void 0:t.faculty)==null?void 0:s.name}),I=B([]),i=B([]),u=B([]),c=j({faculty_id:null,edu_type_id:null,gov_specialty_id:null,type_id:null}),r=j({edu_type_id:[],gov_specialty_id:[],type_id:[]});le(async()=>{var s,n;const t=document.getElementById("createSpecialityModal");t==null||t.addEventListener("hidden.bs.modal",p=>{S(),F(),v("close")}),c.faculty_id=(n=(s=b==null?void 0:b.user)==null?void 0:s.faculty)==null?void 0:n.id,I.value=await H().then(p=>p.result),u.value=await pe().then(p=>p.result)}),ne(async()=>{if(w.specialId){const t=await Se(w.specialId);Object.assign(c,t.result)}}),N(()=>c.edu_type_id,async t=>{c.edu_type_id&&(i.value=await we(c.edu_type_id).then(s=>s.result.map(n=>({id:n.id,name:n.name+`-(${n.code})`}))),i.value.length||(c.gov_specialty_id=null))});async function x(){var t,s;try{h.value=!0,S();const n=w.specialId?await $e(w.specialId,c):await Ce(c);C.success(d("Data_stored_successfully")),v("update:list"),P()}catch(n){Object.assign(r,(s=(t=n.response)==null?void 0:t.data)==null?void 0:s.errors),C.error(d("Failed")+": "+n.message)}finally{h.value=!1}}function F(){Object.assign(c,{edu_type_id:null,gov_specialty_id:null,type_id:null})}function S(){Object.assign(r,{edu_type_id:[],gov_specialty_id:[],type_id:[]})}function P(){Z.getOrCreateInstance("#createSpecialityModal").hide()}return(t,s)=>{const n=k("a-select");return y(),f("div",ke,[e("div",Be,[e("div",Te,[e("div",Oe,[e("h5",Ee,o(t.$t("Student_Special")),1),Me]),e("div",Ie,[e("div",Ne,[e("form",{onSubmit:W(x,["prevent"])},[e("div",Le,[e("label",je,o(t.$t("Structure_Faculty")),1),m(n,{class:"form--item",value:T.value,disabled:""},null,8,["value"])]),e("div",xe,[e("label",Fe,o(t.$t("Education_Type")),1),m(n,{value:c.edu_type_id,"onUpdate:value":s[0]||(s[0]=p=>c.edu_type_id=p),"filter-option":g(L).filterOptionByName,"show-search":"","field-names":{value:"id",label:"name"},options:I.value,placeholder:g(d)("Choose_Education_Type")},null,8,["value","filter-option","options","placeholder"]),r.edu_type_id?(y(),f("span",Pe,o(r.edu_type_id[0]),1)):E("",!0)]),e("div",Ue,[e("label",ze,o(t.$t("by_Specialty")),1),m(n,{value:c.gov_specialty_id,"onUpdate:value":s[1]||(s[1]=p=>c.gov_specialty_id=p),options:i.value,"filter-option":g(L).filterOptionByName,"show-search":"","field-names":{value:"id",label:"name"},placeholder:g(d)("select__specialty"),disabled:!c.edu_type_id},null,8,["value","options","filter-option","placeholder","disabled"]),r.gov_specialty_id?(y(),f("span",De,o(r.gov_specialty_id[0]),1)):E("",!0)]),e("div",Ve,[e("label",Re,o(t.$t("Publication_Property_Type")),1),m(n,{value:c.type_id,"onUpdate:value":s[2]||(s[2]=p=>c.type_id=p),options:u.value,"filter-option":g(L).filterOptionByName,"show-search":"","field-names":{value:"id",label:"name"},placeholder:g(d)("choose__type")},null,8,["value","options","filter-option","placeholder"]),r.type_id?(y(),f("span",Ae,o(r.type_id[0]),1)):E("",!0)]),e("div",Ge,[e("button",Ye,[qe,M(" "+o(t.$t("Close")),1)]),e("button",{class:"btns c-save",type:"submit",disabled:!c.gov_specialty_id||!c.type_id||!c.edu_type_id},[Ze,M(" "+o(t.$t("Save")),1)],8,We)])],32)])])])])])}}}),Je={pagetitle:"'Mutaxassislik'",class:"special-page"},Ke={class:"card panel-header-bg"},Qe={class:"card-body"},Xe={class:"panel-header"},et={class:"card-title"},tt={class:"filterBlock"},st=e("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),at={class:"btns c-filter py-1.5 px-4"},ot=e("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),it={class:"collapse__block"},lt={class:"my-2 col-xl-3 form--item"},nt={for:"yu"},ct={class:"my-2 col-xl-3 form--item"},dt={for:"yu"},rt={class:"my-2 col-xl-4 form--item"},_t={for:"yu"},ut={class:"my-2 col-xl-2"},pt={class:"btn-search search-color"},mt=e("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),yt={class:"card"},ht={class:"card-body"},ft={key:1,class:"table-responsive"},vt={class:"content-table"},bt={class:"table-row d-grid w-100"},gt=e("th",null,"#",-1),wt=["onClick"],$t={class:"gridjs-td"},Ct={class:"list-inline mb-0"},St={class:"list-inline-item"},kt={class:"edit__project"},Bt=["onClick"],Tt=e("i",{class:"mdi mdi-pencil font-size-18 text-primary"},null,-1),Ot=[Tt],Et={class:"list-inline-item"},Mt={class:"delete__project"},It=["onClick"],Nt=e("i",{class:"mdi mdi-delete font-size-18"},null,-1),Lt=[Nt],jt={class:"gridjs-td"},xt={class:"form-check form-switch my-auto"},Ft=["checked","disabled","onChange"],Pt={key:2},Ut={class:"element-count mb-2"},Kt=R({__name:"index",async setup(_){let a,d;const C=B(null),{t:h}=A(),w=G(),v=B(!1),b=q(()=>{var t,s;return(s=(t=T==null?void 0:T.user)==null?void 0:t.faculty)==null?void 0:s.name}),T=Y(),I=([a,d]=D(()=>H().then(t=>t.result)),a=await a,d(),a),i=j({current_page:1,data:[],links:[]}),u=j({edu_type_id:null,page:1,search:""});function c(){C.value=null}N(()=>u.edu_type_id,async(t,s)=>{await r()}),N(()=>u.search,async(t,s)=>{u.search===""&&await r()}),N(()=>i.current_page,async t=>{Number(t)&&(u.page=Number(t),await r(t))});async function r(t){let s={page:t||1,per_page:10};u.edu_type_id&&(s.edu_type_id=u.edu_type_id),u.search&&(s.search=u.search),v.value=!0;const n=await ve(s);Object.assign(i,n.result),v.value=!1}[a,d]=D(()=>r()),await a,d();async function x(t){const s=fe.mixin({customClass:{confirmButton:"btn btn-danger me-2",cancelButton:"btn btn-success"},buttonsStyling:!1});try{(await s.fire({title:h("Delete_message.Are_you_sure"),text:h("Delete_message.Action_irreversible"),icon:"warning",confirmButtonText:h("Delete_message.Yes_Delete"),cancelButtonText:h("Delete_message.Yo_Cancel"),showCancelButton:!0})).isConfirmed&&(await be(t),await r(),s.fire(h("Delete_message.Removed"),h("Delete_message.Record_deleted_successfull"),"success"))}catch(n){s.fire(h("Dashboard_Error"),n.message,"error")}}async function F(t){try{v.value=!0,await ge(t),await r(),w.success(h("Data_stored_successfully"))}catch(s){w.error(s.message)}finally{v.value=!1}}function S(t){C.value=t,Z.getOrCreateInstance("#createSpecialityModal").show()}async function P(){await r()}return(t,s)=>{const n=k("a-select"),p=k("a-space"),J=k("a-input"),K=k("b-card"),Q=k("b-collapse"),X=he,ee=ye,te=me,se=He,ae=ce("b-toggle");return y(),f("div",Je,[e("div",Ke,[e("div",Qe,[e("div",Xe,[e("h5",et,o(t.$t("Student_Special")),1),e("div",tt,[e("button",{class:"btns c-save py-1.5 px-4 me-3",type:"button",onClick:s[0]||(s[0]=l=>S(null))},[st,M(o(t.$t("Create_Special")),1)]),de((y(),f("button",at,[ot,M(o(t.$t("Filter")),1)])),[[ae,void 0,void 0,{"collapse-3":!0}]])])])])]),e("div",it,[m(Q,{visible:"",id:"collapse-3"},{default:O(()=>[m(K,null,{default:O(()=>[e("form",{onSubmit:W(P,["prevent"]),class:"row"},[e("div",lt,[m(p,null,{default:O(()=>[m(n,{class:"form--item",value:b.value,disabled:""},null,8,["value"])]),_:1}),e("label",nt,o(t.$t("Choose_faculty")),1)]),e("div",ct,[m(p,null,{default:O(()=>[m(n,{class:"form--item",value:u.edu_type_id,"onUpdate:value":s[1]||(s[1]=l=>u.edu_type_id=l),options:g(I),"filter-option":g(L).filterOptionByName,"show-search":"","field-names":{value:"id",label:"name"},"allow-clear":""},null,8,["value","options","filter-option"])]),_:1}),e("label",dt,o(t.$t("Choose_Education_Type")),1)]),e("div",rt,[m(p,null,{default:O(()=>[m(J,{id:"yu",class:"form-control","allow-clear":"",value:u.search,"onUpdate:value":s[2]||(s[2]=l=>u.search=l)},null,8,["value"])]),_:1}),e("label",_t,o(t.$t("Search_by_speciality_Name_Code")),1)]),e("div",ut,[e("button",pt,[mt,M(o(t.$t("Search")),1)])])],32)]),_:1})]),_:1})]),e("div",yt,[e("div",ht,[v.value?(y(),V(X,{key:0})):E("",!0),i.data.length?(y(),f("div",ft,[e("table",vt,[e("thead",null,[e("tr",bt,[gt,e("th",null,o(t.$t("Code")),1),e("th",null,o(t.$t("Name")),1),e("th",null,o(t.$t("Education_Type")),1),e("th",null,o(t.$t("action")),1),e("th",null,o(t.$t("Enable")),1)])]),e("tbody",null,[(y(!0),f(re,null,_e(i.data,(l,oe)=>{var z;return y(),f("tr",{class:"table-row d-grid w-100",key:l.id},[e("td",null,o((i.current_page-1)*i.per_page+oe+1),1),e("td",null,o(l==null?void 0:l.code),1),e("td",null,[e("a",{type:"text",onClick:U=>S(l.id)},o(l==null?void 0:l.name),9,wt)]),e("td",null,o((z=l==null?void 0:l.edu_type)==null?void 0:z.name),1),e("td",$t,[e("ul",Ct,[e("li",St,[e("div",kt,[e("a",{type:"text",onClick:U=>S(l==null?void 0:l.id)},Ot,8,Bt)])]),e("li",Et,[e("div",Mt,[e("a",{class:"text-danger",type:"danger",onClick:U=>x(l.id)},Lt,8,It)])])])]),e("td",jt,[e("div",xt,[e("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:l.status,disabled:v.value,onChange:U=>F(l.id)},null,40,Ft)])])])}),128))])]),i.last_page>1?(y(),V(ee,ue({key:0,class:"mt-2"},{...i},{"current-page":i.current_page,"onUpdate:currentPage":s[3]||(s[3]=l=>i.current_page=l)}),null,16,["current-page"])):E("",!0)])):(y(),f("div",Pt,[m(te)]))]),m(se,{"special-id":C.value,"onUpdate:list":r,onClose:c},null,8,["special-id"])]),e("span",Ut,o(i==null?void 0:i.current_page)+"-"+o((i==null?void 0:i.data.length)+i.per_page*((i==null?void 0:i.current_page)-1))+"/ "+o(t.$t("Total_Point"))+": "+o(i==null?void 0:i.total),1)])}}});export{Kt as default};
