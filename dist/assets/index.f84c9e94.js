import{_ as A}from"./NoData.ac42776e.js";import{bR as z,d as I,B as y,a as M,bq as q,Z as k,y as Y,w as E,i as h,b6 as G,o as u,e as d,f as e,t as a,bs as Z,z as m,j as i,k as p,v as x,g as H,s as D,l as C,F as J,r as K,aR as Q,q as W}from"./index.3390162f.js";import{_ as X,v as ee,E as te}from"./index.30e99442.js";import{_ as ae}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{P as se}from"./PaginationForStatistical.bc37bc8c.js";import{h as U}from"./helper.569bc08f.js";/* empty css                                                               */import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const oe=z();async function le(L){try{const{data:r}=await oe({url:"/api/report/exams",params:L});return r}catch(r){throw r}}const ne={pagetitle:"`Imtihonlar ro'yhati`",class:"reportByExamPage"},ie={class:"card panel-header-bg"},re={class:"card-body"},ue={class:"panel-header"},de={class:"card-title"},ce={class:"panel-toggles"},_e={class:"filterBlock"},me={class:"btns c-filter py-1.5 px-4"},pe=e("i",{class:"mdi mdi-filter me-2"},null,-1),ge={class:"collapse__block"},ve={class:"my-2 col-md-4 form--item"},he={for:"yu"},be={class:"my-2 col-md-4 form--item"},fe={for:"yu"},ye={class:"my-2 col-md-4 form--item"},we={for:"yu"},$e={class:"my-2 col-md-10 form--item"},Ne={for:"yu"},ke={class:"my-2 col-md-2"},Ce={type:"submit",class:"btn-search search-color"},Le=e("i",{class:"mdi mdi-magnify me-1"},null,-1),Pe={class:"row table-division"},Fe={class:"col-md-12"},Se={class:"card"},Be={class:"card-body"},qe={key:1,class:"table-responsive"},Ee={class:"content-table"},De={class:"table-row d-grid w-100"},Ue=e("th",null,[e("b",null,"#")],-1),Oe=e("br",null,null,-1),Re=e("br",null,null,-1),Te={key:2,class:"table-responsive"},Ve={key:0},Qe=I({__name:"index",async setup(L){let r,b;const P=y(),{t:F}=M(),f=y(!1),w=y(!0),O=([r,b]=q(()=>te().then(t=>t.result.data.map(s=>({id:s.id,name:s.name})))),r=await r,b(),r),S=k({value:[]}),n=k({academic_year_id:null,semester_id:null,edu_form_id:null,text:null,page:1,per_page:U.pagePer}),o=k({pagination:{current_page:1,per_page:n.per_page,loading:!1},result:[]}),c=y({sequenceNumber:null,theNumber:null,sorting:null});Y(async()=>{P.value=await X().then(t=>t.result.map(s=>({id:s.semester,name:s.semester+"-"+F("semester")}))),S.value=await ee().then(t=>t.result)}),[r,b]=q(()=>g()),await r,b(),E(()=>[n.academic_year_id,n.semester_id,n.edu_form_id],async(t,s)=>{await g()}),E(()=>o.pagination.current_page,async t=>{Number(t)&&(n.page=Number(t),await g(t))});async function R(){await g()}async function g(t){delete n.page;let s={...n,page:t||1};if(w.value){w.value=!1,f.value=!0;const N=await le(s);Object.assign(o,N),setTimeout(()=>{w.value=!0},U.loaderRefresh)}let v=`${o.pagination.per_page*(o.pagination.current_page-1)+1}- ${o.result.length+o.pagination.per_page*(o.pagination.current_page-1)}`,_=`${F("Total_Point")} : ${o.pagination.total}`,$=o.pagination.per_page*(o.pagination.current_page-1);f.value=!1,c.value.sequenceNumber=v,c.value.theNumber=_,c.value.sorting=$}return(t,s)=>{const v=h("a-select"),_=h("a-space"),$=h("a-input"),N=h("b-card"),T=h("b-collapse"),V=A,j=G("b-toggle");return u(),d("div",ne,[e("div",ie,[e("div",re,[e("div",ue,[e("h5",de,a(t.$t("List_of_exams")),1),e("div",ce,[e("div",_e,[Z((u(),d("button",me,[pe,m(a(t.$t("Filtr")),1)])),[[j,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",ge,[i(T,{visible:"",id:"collapse-3"},{default:p(()=>[i(N,null,{default:p(()=>[e("form",{class:"row",onSubmit:x(R,["prevent"])},[e("div",ve,[i(_,null,{default:p(()=>[i(v,{value:n.academic_year_id,"onUpdate:value":s[0]||(s[0]=l=>n.academic_year_id=l),options:H(O),"field-names":{value:"id",label:"name"},allowClear:""},null,8,["value","options"])]),_:1}),e("label",he,a(t.$t("Select_academic_year")),1)]),e("div",be,[i(_,null,{default:p(()=>[i(v,{value:n.semester_id,"onUpdate:value":s[1]||(s[1]=l=>n.semester_id=l),options:P.value,"field-names":{value:"id",label:"name"},allowClear:""},null,8,["value","options"])]),_:1}),e("label",fe,a(t.$t("Select_semester")),1)]),e("div",ye,[i(_,null,{default:p(()=>[i(v,{value:n.edu_form_id,"onUpdate:value":s[2]||(s[2]=l=>n.edu_form_id=l),"field-names":{value:"id",label:"name"},options:S.value,allowClear:""},null,8,["value","options"])]),_:1}),e("label",we,a(t.$t("Choose_Education_Form")),1)]),e("div",$e,[i(_,null,{default:p(()=>[i($,{allowClear:"",id:"yu",class:"form-control",value:n.text,"onUpdate:value":s[3]||(s[3]=l=>n.text=l)},null,8,["value"])]),_:1}),e("label",Ne,a(t.$t("Search_by_name")),1)]),e("div",ke,[e("button",Ce,[Le,m(a(t.$t("search")),1)])])],32)]),_:1})]),_:1})]),e("div",Pe,[e("div",Fe,[e("div",Se,[e("div",Be,[f.value?(u(),D(ae,{key:0})):C("",!0),o.result.length?(u(),d("div",qe,[e("table",Ee,[e("thead",null,[e("tr",De,[Ue,e("th",null,[e("b",null,a(t.$t("employee")),1)]),e("th",null,[e("b",null,a(t.$t("student_Sciences")),1)]),e("th",null,[e("b",null,a(t.$t("name")),1)]),e("th",null,[e("b",null,a(t.$t("Groups")),1)]),e("th",null,[e("b",null,a(t.$t("Academic_year")),1)]),e("th",null,[e("b",null,a(t.$t("Time"))+"("+a(t.$t("minute"))+")",1)])])]),e("tbody",null,[(u(!0),d(J,null,K(o.result,(l,B)=>(u(),d("tr",{class:"table-row d-grid w-100",key:B},[e("td",null,a(c.value.sorting+B+1),1),e("td",null,a(l.employee),1),e("td",null,a(l.subject),1),e("td",null,a(l.name),1),e("td",null,a(l.academic_group),1),e("td",null,[m(a(l.academic_year)+" ",1),Oe]),e("td",null,[m(a(l.duration)+" "+a(t.$t("minute"))+" ",1),Re,m(" "+a(l.datetime_start)+"-"+a(l.datetime_end),1)])]))),128))])]),o.pagination.last_page>1?(u(),D(se,Q({key:0,class:"mt-2"},{...o.pagination},{"current-page":o.pagination.current_page,"onUpdate:currentPage":s[4]||(s[4]=l=>o.pagination.current_page=l),loading:f.value,onOnPageChange:g}),null,16,["current-page","loading"])):C("",!0)])):(u(),d("div",Te,[i(V)]))])])])]),e("span",{class:W(["element-count mb-2",o.pagination.total?"":"d-none"])},[o.pagination.last_page?(u(),d("span",Ve,a(c.value.sequenceNumber)+" / ",1)):C("",!0),m(a(c.value.theNumber),1)],2)])}}});export{Qe as default};
