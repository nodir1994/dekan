import{_ as I}from"./Pagination.f4a9fc5d.js";import{d as S,h as z,c as V,a as j,bO as R,B as C,Z as w,bq as q,y as x,w as b,i as g,b6 as A,o as _,e as f,f as o,t,j as a,k as u,z as p,bs as M,g as h,F as Z,r as H,s as J,aR as K,l as P}from"./index.3390162f.js";import{e as Q,b as W}from"./index.30e99442.js";import{g as X}from"./transcript.605beb58.js";import{l as Y,e as D,b as ss,f as os}from"./id.5a6e5f30.js";import{h as y}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const ls={pagetitle:"`Transkript`",class:"diploma-list"},es={class:"card panel-header-bg"},ts={class:"card-body"},is={class:"panel-header"},as={class:"card-title"},ds={class:"panel-toggles"},ns={class:"filterBlock"},rs=o("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),cs={class:"btns c-filter py-1.5 px-4"},us=o("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),_s={class:"collapse__block"},ps={class:"row"},hs={class:"my-2 col-xl-4 form--item"},fs={for:"yu"},ys={class:"my-2 col-xl-4 form--item"},ms={for:"yu"},vs={class:"my-2 col-xl-4 form--item"},bs={for:"yu"},gs={class:"my-2 col-xl-4 form--item"},ws={class:"my-2 col-xl-4 form--item"},Os={for:"yu"},$s={class:"my-2 col-xl-4 form--item"},ks={for:"yu"},Bs={class:"row table-division"},Ns={class:"col-xl-12"},Cs={class:"card"},Ps={class:"card-body"},Ts={key:0,class:"table-responsive"},Fs={class:"content-table"},Es={class:"table-row-transcript-index"},Gs=o("th",null,"#",-1),Us=o("br",null,null,-1),Ls={style:{color:"#ccc"}},Is=o("br",null,null,-1),Ss={style:{color:"#ccc"}},zs=o("br",null,null,-1),Vs={style:{color:"#ccc"}},js=o("br",null,null,-1),Rs={style:{color:"#ccc"}},qs=o("br",null,null,-1),xs={style:{color:"#ccc"}},As={class:"action__td"},Ms=o("i",{class:"mdi mdi-eye"},null,-1),Zs={key:1},Hs={class:"text-center"},Js={class:"text-center"},Ks={key:0,class:"element-count mb-2"},io=S({__name:"index",async setup(Qs){let k,B;const O=z(),T=V(()=>{var e,i;return(i=(e=O==null?void 0:O.user)==null?void 0:e.faculty)==null?void 0:i.name}),{t:v}=j();R();const N=C(!1);w({});const s=w({search:"",specialty_id:null,edu_plan_id:null,edu_type_id:null,academic_group_id:null,edu_form_id:null,data:[],links:[],current_page:1,per_page:y.pagePer}),d=w({eduTypeOptions:null,specialOptions:null,eduFormOptions:null,eduPlanOptions:null,academicGroupOptions:null}),$=C(!0);[k,B]=q(()=>m()),await k,B(),x(async()=>{d.eduTypeOptions=await Q().then(e=>e.result),d.eduFormOptions=await W().then(e=>e.result)}),b(()=>s.edu_type_id,async()=>{await m(),s.specialty_id=null,d.specialOptions=null,s.edu_type_id&&(d.specialOptions=await Y(s.edu_type_id).then(e=>{var i;return(i=e.result)==null?void 0:i.data.map(n=>({id:n.id,name:n.name+`-(${n.code})`}))}))}),b(()=>s.edu_form_id,async()=>{s.edu_plan_id=null,await m(),s.edu_form_id&&(d.eduPlanOptions=await D(s.edu_form_id).then(e=>{var i;return(i=e.result)==null?void 0:i.data}))}),b(()=>s.edu_plan_id,async()=>{var e,i;if(s.semester_id=null,s.academic_group_id=null,d.semesterOptions=null,d.academicGroupOptions=null,await m(),s.edu_plan_id){let n=await ss(s.edu_plan_id);d.academicGroupOptions=(e=n==null?void 0:n.result)==null?void 0:e.data.map(r=>({id:r.id,name:r.name}));let c=await os(s.edu_plan_id);d.semesterOptions=(i=c==null?void 0:c.result)==null?void 0:i.data.map(r=>({id:r.id,name:r.course+"-"+v("course")+" "+r.semester+"-"+v("semester")}))}}),b(()=>s.academic_group_id,async()=>{await m()}),b(()=>s.current_page,async e=>{Number(e)&&(s.page=Number(e),await m(e))}),w({command_id:[],reference_id:[],students:[]});async function m(e){let i={page:e,per_page:s.per_page};s.edu_type_id&&(i.edu_type_id=s==null?void 0:s.edu_type_id),s.edu_form_id&&(i.edu_form_id=s==null?void 0:s.edu_form_id),s.specialty_id&&(i.specialty_id=s==null?void 0:s.specialty_id),s.edu_plan_id&&(i.edu_plan_id=s==null?void 0:s.edu_plan_id),s.academic_group_id&&(i.academic_group_id=s==null?void 0:s.academic_group_id);try{if(N.value=!0,$.value){$.value=!1;const n=await X(i);Object.assign(s,n.result),setTimeout(()=>{$.value=!0},y.loaderRefresh)}}catch(n){console.log(n)}finally{N.value=!1}}return(e,i)=>{const n=g("router-link"),c=g("a-select"),r=g("a-space"),F=g("b-card"),E=g("b-collapse"),G=I,U=A("b-toggle");return _(),f("div",ls,[o("div",es,[o("div",ts,[o("div",is,[o("h5",as,t(e.$t("archive_Transcript")),1),o("div",ds,[o("div",ns,[a(n,{to:"/archive/transcript/create",class:"btns d-inline-block c-save py-1.5 px-4 me-3"},{default:u(()=>[rs,p(t(e.$t("add")),1)]),_:1}),M((_(),f("button",cs,[us,p(t(e.$t("Filter")),1)])),[[U,void 0,void 0,{"collapse-3":!0}]])])])])])]),o("div",_s,[a(E,{visible:"",id:"collapse-3"},{default:u(()=>[a(F,null,{default:u(()=>[o("div",ps,[o("div",hs,[a(r,null,{default:u(()=>[a(c,{class:"form--item",value:T.value,disabled:""},null,8,["value"])]),_:1}),o("label",fs,t(e.$t("Choose_faculty")),1)]),o("div",ys,[a(r,null,{default:u(()=>[a(c,{"filter-option":h(y).filterOptionByName,"show-search":"","allow-clear":"",value:s.edu_type_id,"onUpdate:value":i[0]||(i[0]=l=>s.edu_type_id=l),"field-names":{value:"id",label:"name"},options:d.eduTypeOptions,placeholder:h(v)("Choose_Education_Type")},null,8,["filter-option","value","options","placeholder"])]),_:1}),o("label",ms,t(e.$t("Choose_Education_Type")),1)]),o("div",vs,[a(r,null,{default:u(()=>[a(c,{"filter-option":h(y).filterOptionByName,"show-search":"","allow-clear":"",value:s.specialty_id,"onUpdate:value":i[1]||(i[1]=l=>s.specialty_id=l),"field-names":{value:"id",label:"name"},options:d.specialOptions,disabled:!s.edu_type_id,placeholder:e.$t("Please_select_curriculum")},null,8,["filter-option","value","options","disabled","placeholder"])]),_:1}),o("label",bs,t(e.$t("select__specialty")),1)]),o("div",gs,[a(r,null,{default:u(()=>[a(c,{"filter-option":h(y).filterOptionByName,"show-search":"","allow-clear":"",value:s.edu_form_id,"onUpdate:value":i[2]||(i[2]=l=>s.edu_form_id=l),"field-names":{value:"id",label:"name"},options:d.eduFormOptions,placeholder:h(v)("Choose_Education_Form")},null,8,["filter-option","value","options","placeholder"])]),_:1}),o("label",null,t(e.$t("Choose_Education_Form")),1)]),o("div",ws,[a(r,null,{default:u(()=>[a(c,{"filter-option":h(y).filterOptionByName,"show-search":"","allow-clear":"",value:s.edu_plan_id,"onUpdate:value":i[3]||(i[3]=l=>s.edu_plan_id=l),"field-names":{value:"id",label:"name"},disabled:!s.edu_form_id,options:d.eduPlanOptions,placeholder:e.$t("Please_select_curriculum")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),o("label",Os,t(e.$t("Choose_Curriculum")),1)]),o("div",$s,[a(r,null,{default:u(()=>[a(c,{"filter-option":h(y).filterOptionByName,"show-search":"","allow-clear":"",value:s.academic_group_id,"onUpdate:value":i[4]||(i[4]=l=>s.academic_group_id=l),"field-names":{value:"id",label:"name"},disabled:!s.specialty_id,options:d.academicGroupOptions,placeholder:h(v)("Choose_Group")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),o("label",ks,t(e.$t("Choose_Group")),1)])])]),_:1})]),_:1})]),o("div",Bs,[o("div",Ns,[o("div",Cs,[o("div",Ps,[s.data.length?(_(),f("div",Ts,[o("table",Fs,[o("thead",null,[o("tr",Es,[Gs,o("th",null,t(e.$t("Student")),1),o("th",null,t(e.$t("Education_Type")),1),o("th",null,t(e.$t("by_Specialty")),1),o("th",null,t(e.$t("Group")),1),o("th",null,t(e.$t("Number")),1),o("th",null,t(e.$t("action")),1)])]),o("tbody",null,[(_(!0),f(Z,null,H(s.data,(l,L)=>(_(),f("tr",{class:"table-row-transcript-index",key:l==null?void 0:l.id},[o("td",null,t((s.current_page-1)*s.per_page+L+1),1),o("td",null,[o("div",null,[p(t(l==null?void 0:l.full_name)+" ",1),Us,o("span",Ls,t(l==null?void 0:l.id),1)])]),o("td",null,[o("div",null,[p(t(l==null?void 0:l.edu_type),1),Is,o("span",Ss,t(l==null?void 0:l.edu_form),1)])]),o("td",null,[o("div",null,[p(t(l==null?void 0:l.speciality),1),zs,o("span",Vs,t(l==null?void 0:l.shifr),1)])]),o("td",null,[o("div",null,[p(t(l==null?void 0:l.group),1),js,o("span",Rs,t(l==null?void 0:l.specialty),1)])]),o("td",null,[o("div",null,[p(t(l==null?void 0:l.number)+" ",1),qs,o("span",xs,t(l==null?void 0:l.given_date),1)])]),o("td",null,[o("div",As,[a(n,{class:"btns c-save py-1 px-2 me-2",to:"/archive/transcript/edit?id="+(l==null?void 0:l.id)},{default:u(()=>[Ms,p(" "+t(e.$t("View")),1)]),_:2},1032,["to"])])])]))),128))])]),s.last_page>1?(_(),J(G,K({key:0,class:"mt-2"},{...s},{"current-page":s.current_page,"onUpdate:currentPage":i[5]||(i[5]=l=>s.current_page=l)}),null,16,["current-page"])):P("",!0)])):(_(),f("div",Zs,[o("h5",Hs,t(e.$t("No_data")),1),o("p",Js,t(e.$t("No_information_found")),1)]))])]),s!=null&&s.total?(_(),f("span",Ks,t(s==null?void 0:s.current_page)+"-"+t((s==null?void 0:s.data.length)+s.per_page*((s==null?void 0:s.current_page)-1))+"/ "+t(e.$t("Total_Point"))+": "+t(s==null?void 0:s.total),1)):P("",!0)])])])}}});export{io as default};
