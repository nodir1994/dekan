import{_ as x}from"./Pagination.f4a9fc5d.js";import{bR as z,d as M,a as V,bO as A,B as $,Z as j,y as Z,w as y,i as g,b6 as q,o as _,e as p,f as s,t as d,bs as H,z as k,j as r,k as m,v as J,g as f,s as B,l as S,F as K,r as Q,aR as W}from"./index.3390162f.js";import{e as X,b as Y}from"./index.30e99442.js";import{e as ee,b as se,f as ae,j as te}from"./id.5a6e5f30.js";import{_ as le}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{h as F}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const L=z();async function oe(b){try{const{data:n}=await L({url:"api/archive/diploma-scores",method:"GET",params:b});return n}catch(n){throw n}}async function de(b){try{const{data:n}=await L({url:"/api/archive/diploma-scores",method:"PUT",data:{datas:b}});return n}catch(n){throw n}}const ie={pagetitle:"`Akademik ma'lumotnoma`",class:"diploma-list"},ne={class:"card panel-header-bg"},ue={class:"card-body"},re={class:"panel-header"},ce={class:"card-title"},_e={class:"panel-toggles"},pe={class:"filterBlock"},me={class:"btns c-filter py-1.5 px-4"},he=s("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),fe={class:"collapse__block"},be={class:"my-2 col-xl-4 form--item"},ve={for:"yu"},ye={class:"my-2 col-xl-4 form--item"},ge={class:"my-2 col-xl-4 form--item"},we={for:"yu"},Oe={class:"my-2 col-xl-3 form--item"},$e={class:"my-2 col-xl-3 form--item"},je={for:"yu"},Ce={class:"my-2 col-xl-4 form--item"},ke={for:"yu"},Be={class:"my-2 col-md-2"},Se=["disabled"],Fe=s("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Le={class:"row table-division"},Ne={class:"col-xl-12"},Pe={class:"card"},Ie={class:"card-body"},Te={key:1,class:"table-responsive"},Ue={class:"content-table"},Ge={class:"table-row-diplom-ball-index"},Ee=s("th",null,"#",-1),De={key:0},Re={key:1},xe=["value","onInput"],ze={class:"text-end mt-3"},Me={key:2},Ve={class:"text-center"},Ae={class:"text-center"},as=M({__name:"index",setup(b){const{t:n}=V(),C=A(),h=$(!1),e=j({search:"",edu_plan_id:null,edu_type_id:null,semester_id:null,academic_group_id:null,edu_form_id:null,edu_year_id:null,data:[],links:[],students:[],current_page:1,per_page:F.pagePer,subject_id:null,balls:[]}),u=j({eduTypeOptions:null,eduFormOptions:null,eduPlanOptions:null,semesterOptions:null,academicGroupOptions:null,subjectListOptions:null}),N=j([]),w=$(!0),v=$([]);Z(async()=>{u.eduTypeOptions=await X().then(a=>a.result),u.eduFormOptions=await Y().then(a=>a.result)}),y(()=>e.edu_form_id,async()=>{e.edu_plan_id=null,e.edu_form_id&&(u.eduPlanOptions=await ee(e.edu_form_id).then(a=>{var t;return(t=a.result)==null?void 0:t.data}))}),y(()=>e.edu_plan_id,async()=>{var a,t;if(e.semester_id=null,e.academic_group_id=null,u.semesterOptions=null,u.academicGroupOptions=null,e.edu_plan_id){let o=await se(e.edu_plan_id);u.academicGroupOptions=(a=o==null?void 0:o.result)==null?void 0:a.data.map(c=>({id:c.id,name:c.name}));let i=await ae(e.edu_plan_id);u.semesterOptions=(t=i==null?void 0:i.result)==null?void 0:t.data.map(c=>({id:c.id,name:c.course+"-"+n("Course")+" "+c.semester+"-"+n("semester")}))}}),y(()=>e.semester_id,async a=>{e.subject_id=null,u.subjectListOptions=null,a&&(u.subjectListOptions=await te(e.edu_plan_id,e.semester_id).then(t=>t.result.map(o=>{var i,c;return{id:(i=o==null?void 0:o.subject)==null?void 0:i.id,name:(c=o==null?void 0:o.subject)==null?void 0:c.name}})))}),y(()=>e.current_page,async a=>{Number(a)&&(e.page=Number(a),await O(a))});async function P(){await O()}async function I(){var a,t;try{h.value=!0;const o=await de(v.value);C.success(n("updated_successfully")),O()}catch(o){Object.assign(o,(t=(a=o.response)==null?void 0:a.data)==null?void 0:t.errors),C.error(n("Failed")+": "+o.message)}finally{h.value=!1}}async function O(a){h.value=!0;let t={page:e.page};a||(t.page=1),e.edu_form_id&&(t.edu_form_id=e.edu_form_id),e.edu_type_id&&(t.edu_type_id=e.edu_type_id),e.edu_plan_id&&(t.edu_plan_id=e.edu_plan_id),e.semester_id&&(t.semester_id=e.semester_id),e.academic_group_id&&(t.academic_group_id=e.academic_group_id),e.subject_id&&(t.subject_id=e.subject_id);try{if(h.value=!0,w.value){w.value=!1;const o=await oe(t);Object.assign(e,o.result),N.value=e.data.map(i=>({id:i==null?void 0:i.id,grade:i==null?void 0:i.ball})),setTimeout(()=>{w.value=!0},F.loaderRefresh)}}catch(o){console.log(o)}finally{h.value=!1}}function T(a,t){const o=a.target,i=v.value.findIndex(c=>c.id==t);i===-1?v.value.push({id:t,ball:o.value}):v.value.splice(i,1,{id:t,ball:o.value})}return(a,t)=>{const o=g("a-select"),i=g("a-space"),c=g("b-card"),U=g("b-collapse"),G=x,E=q("b-toggle");return _(),p("div",ie,[s("div",ne,[s("div",ue,[s("div",re,[s("h5",ce,d(a.$t("archive_Batch_Rate")),1),s("div",_e,[s("div",pe,[H((_(),p("button",me,[he,k(d(a.$t("Filter")),1)])),[[E,void 0,void 0,{"collapse-3":!0}]])])])])])]),s("div",fe,[r(U,{visible:"",id:"collapse-3"},{default:m(()=>[r(c,null,{default:m(()=>[s("form",{class:"row",onSubmit:J(P,["prevent"])},[s("div",be,[r(i,null,{default:m(()=>[r(o,{"allow-clear":"",value:e.edu_type_id,"onUpdate:value":t[0]||(t[0]=l=>e.edu_type_id=l),"field-names":{value:"id",label:"name"},options:u.eduTypeOptions,placeholder:f(n)("Choose")},null,8,["value","options","placeholder"])]),_:1}),s("label",ve,d(a.$t("Choose_Education_Type")),1)]),s("div",ye,[r(i,null,{default:m(()=>[r(o,{"allow-clear":"",value:e.edu_form_id,"onUpdate:value":t[1]||(t[1]=l=>e.edu_form_id=l),"field-names":{value:"id",label:"name"},options:u.eduFormOptions,placeholder:f(n)("Choose")},null,8,["value","options","placeholder"])]),_:1}),s("label",null,d(a.$t("Choose_Education_Form")),1)]),s("div",ge,[r(i,null,{default:m(()=>[r(o,{"allow-clear":"",value:e.edu_plan_id,"onUpdate:value":t[2]||(t[2]=l=>e.edu_plan_id=l),disabled:!e.edu_form_id,"field-names":{value:"id",label:"name"},options:u.eduPlanOptions,placeholder:a.$t("Choose")},null,8,["value","disabled","options","placeholder"])]),_:1}),s("label",we,d(a.$t("Choose_Curriculum")),1)]),s("div",Oe,[r(i,null,{default:m(()=>[r(o,{"allow-clear":"",value:e.semester_id,"onUpdate:value":t[3]||(t[3]=l=>e.semester_id=l),disabled:!e.edu_plan_id,"field-names":{value:"id",label:"name"},options:u.semesterOptions,placeholder:f(n)("Choose")},null,8,["value","disabled","options","placeholder"])]),_:1}),s("label",null,d(a.$t("Choose_Semester")),1)]),s("div",$e,[r(i,null,{default:m(()=>[r(o,{"allow-clear":"",value:e.academic_group_id,"onUpdate:value":t[4]||(t[4]=l=>e.academic_group_id=l),disabled:!e.edu_plan_id,"field-names":{value:"id",label:"name"},options:u.academicGroupOptions,placeholder:f(n)("Choose")},null,8,["value","disabled","options","placeholder"])]),_:1}),s("label",je,d(a.$t("Choose_Group")),1)]),s("div",Ce,[r(i,null,{default:m(()=>[r(o,{"allow-clear":"",value:e.subject_id,"onUpdate:value":t[5]||(t[5]=l=>e.subject_id=l),"field-names":{value:"id",label:"name"},disabled:!e.semester_id,options:u.subjectListOptions,placeholder:f(n)("Choose")},null,8,["value","disabled","options","placeholder"])]),_:1}),s("label",ke,d(a.$t("Choose_Subject")),1)]),s("div",Be,[s("button",{type:"submit",disabled:!e.subject_id||!e.academic_group_id||!e.edu_plan_id||!e.semester_id||!e.edu_form_id,class:"btn-search search-color"},[Fe,k(" "+d(a.$t("View")),1)],8,Se)])],32)]),_:1})]),_:1})]),s("div",Le,[s("div",Ne,[s("div",Pe,[s("div",Ie,[h.value?(_(),B(le,{key:0})):S("",!0),e.data.length?(_(),p("div",Te,[s("table",Ue,[s("thead",null,[s("tr",Ge,[Ee,s("th",null,d(a.$t("Student")),1),s("th",null,d(a.$t("mastered__subjects")),1),s("th",null,d(a.$t("mastered")),1),s("th",null,d(a.$t("acload/credit")),1),s("th",null,d(a.$t("Curriculum_Marking_System")),1),s("th",null,d(a.$t("Score")),1),s("th",null,d(a.$t("gradeSome")),1)])]),s("tbody",null,[(_(!0),p(K,null,Q(e.data,(l,D)=>(_(),p("tr",{class:"table-row-diplom-ball-index",key:l.id},[s("td",null,d((e.current_page-1)*e.per_page+D+1),1),s("td",null,d(l==null?void 0:l.student),1),s("td",null,d(l==null?void 0:l.subject),1),s("td",null,[l!=null&&l.is_learning?(_(),p("span",De,d(a.$t("yes")),1)):(_(),p("span",Re,d(a.$t("No")),1))]),s("td",null,d(l==null?void 0:l.load)+" / "+d(l==null?void 0:l.credit),1),s("td",null,d(l==null?void 0:l.rating_system),1),s("td",null,[s("input",{class:"text-end",type:"number",min:"1",max:"100",value:l.ball,onInput:R=>T(R,l.id)},null,40,xe)]),s("td",null,d(l==null?void 0:l.grade),1)]))),128))])]),s("div",ze,[s("button",{class:"btns c-save py-1.5 px-4",onClick:I},d(a.$t("assign")),1)]),e.last_page>1?(_(),B(G,W({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":t[6]||(t[6]=l=>e.current_page=l)}),null,16,["current-page"])):S("",!0)])):(_(),p("div",Me,[s("h5",Ve,d(a.$t("No_data")),1),s("p",Ae,d(a.$t("No_information_found")),1)]))])])])])])}}});export{as as default};
