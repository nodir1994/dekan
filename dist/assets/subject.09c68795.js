import{_ as U}from"./Pagination.f4a9fc5d.js";import{_ as I}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as E,d as V,a as z,bO as A,B as N,Z as b,y as K,w as $,i as g,b6 as M,o as n,e as d,f as a,t as o,bs as Z,z as P,j as _,k as y,g as j,s as C,l as f,F as v,r as w,aR as q}from"./index.3390162f.js";import{j as H}from"./index.30e99442.js";import{a as J,b as Q,s as W}from"./id.5a6e5f30.js";import{h as x}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const X=E();async function D(B){try{const{data:u}=await X({url:"/api/academic-groups/subjects-attendance",method:"GET",params:B});return u}catch(u){throw u}}const ee={pagetitle:"'Fanlar davomati'",class:"transferPage"},ae={class:"card panel-header-bg"},se={class:"card-body"},te={class:"panel-header"},le={class:"card-title"},oe={class:"filterBlock"},ne={class:"btns c-filter py-1.5 px-4"},de=a("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ie={class:"collapse__block"},ce={class:"row"},re={class:"col-xl-3 form--item"},_e={class:"col-xl-3 form--item"},ue={class:"col-xl-3 form--item"},pe={class:"col-xl-2 form--item"},me={class:"my-2 col-xl-1"},he=["disabled"],ye=a("i",{class:"fas fa-check me-1"},null,-1),fe={class:"row"},ve={class:"col-xl-12"},be={class:"card"},ge={class:"card-body"},we={key:1,class:"table-responsive table-statistical"},ke=a("th",{rowspan:"2",style:{"min-width":"60px"}},"#",-1),Oe={rowspan:"2",style:{"min-width":"200px"}},$e={colspan:"2"},Pe={key:0},je={key:1},Be={style:{"min-width":"50px"}},Fe={style:{"min-width":"50px"}},Ne={style:{"text-align":"start"}},Ce=a("br",null,null,-1),xe={key:0},Ge={key:0},Le={key:2},Ye={class:"text-center"},Re={class:"text-center"},Se={key:0,class:"element-count mb-2"},He=V({__name:"subject",setup(B){const{t:u}=z();A();const k=N(!1),O=N(!0);b({});const e=b({search:"",edu_plan_id:null,academic_year_id:null,semester_id:null,academic_group_id:null,current_page:1,students:[],subjects:[],data:[],per_page:x.pagePer,links:[]}),i=b({eduPlanOptions:null,academicYearsOptions:null,semesterOptions:null,academicGroupOptions:null});K(async()=>{i.eduPlanOptions=await H().then(s=>{var l;return(l=s==null?void 0:s.result)==null?void 0:l.data})}),$(()=>e.edu_plan_id,async()=>{var s,l;if(e.academic_year_id=null,e.semester_id=null,e.academic_group_id=null,i.academicYearsOptions=null,i.academicGroupOptions=null,i.semesterOptions=null,e.edu_plan_id){let c=await J(e.edu_plan_id);i.academicYearsOptions=(s=c==null?void 0:c.result)==null?void 0:s.data.map(m=>({id:m.id,name:m.name}));let p=await Q(e.edu_plan_id);i.academicGroupOptions=(l=p==null?void 0:p.result)==null?void 0:l.data.map(m=>({id:m.id,name:m.name}))}}),$(()=>e.academic_year_id,async()=>{var s;if(e.semester_id=null,i.semesterOptions=null,e.edu_plan_id&&e.academic_year_id){let l=await W(e);console.log("res",l),i.semesterOptions=(s=l==null?void 0:l.result)==null?void 0:s.data.map(c=>({id:c.id,name:c.course+"-"+u("course")+" "+c.semester+"-"+u("semester")}))}}),$(()=>e.current_page,async s=>{Number(s)&&(e.page=Number(s),await F())});async function G(){await F()}async function F(){let s=b({});e.edu_plan_id&&(s.edu_plan_id=e.edu_plan_id),e.academic_year_id&&(s.academic_year_id=e.academic_year_id),e.semester_id&&(s.semester_id=e.semester_id),e.academic_group_id&&(s.academic_group_id=e.academic_group_id);try{if(k.value=!0,O.value){O.value=!1;const l=await D(s);Object.assign(e,l.result[0]),setTimeout(()=>{O.value=!0},x.loaderRefresh)}}catch(l){console.log(l)}finally{k.value=!1}}return(s,l)=>{const c=g("a-select"),p=g("a-form-item"),m=g("b-card"),L=g("b-collapse"),Y=I,R=U,S=M("b-toggle");return n(),d("div",ee,[a("div",ae,[a("div",se,[a("div",te,[a("h5",le,o(s.$t("attendance_By_Subjects")),1),a("div",oe,[Z((n(),d("button",ne,[de,P(o(s.$t("Filter")),1)])),[[S,void 0,void 0,{"collapse-3":!0}]])])])])]),a("div",ie,[_(L,{visible:"",id:"collapse-3"},{default:y(()=>[_(m,null,{default:y(()=>[a("div",ce,[a("div",re,[_(p,{class:"my-2",name:"nameFaculty"},{default:y(()=>[_(c,{"allow-clear":"",value:e.edu_plan_id,"onUpdate:value":l[0]||(l[0]=t=>e.edu_plan_id=t),"field-names":{value:"id",label:"name"},options:i.eduPlanOptions,placeholder:s.$t("Please_select_curriculum")},null,8,["value","options","placeholder"])]),_:1})]),a("div",_e,[_(p,{class:"my-2",name:"nameFaculty"},{default:y(()=>[_(c,{"allow-clear":"",value:e.academic_year_id,"onUpdate:value":l[1]||(l[1]=t=>e.academic_year_id=t),"field-names":{value:"id",label:"name"},options:i.academicYearsOptions,placeholder:j(u)("Choose_Education_Year"),disabled:!e.edu_plan_id},null,8,["value","options","placeholder","disabled"])]),_:1})]),a("div",ue,[_(p,{class:"my-2",name:"nameFaculty"},{default:y(()=>[_(c,{"allow-clear":"",value:e.semester_id,"onUpdate:value":l[2]||(l[2]=t=>e.semester_id=t),"field-names":{value:"id",label:"name"},options:i.semesterOptions,placeholder:j(u)("Choose_Semester"),disabled:!e.academic_year_id},null,8,["value","options","placeholder","disabled"])]),_:1})]),a("div",pe,[_(p,{class:"my-2",name:"nameFaculty"},{default:y(()=>[_(c,{"allow-clear":"",value:e.academic_group_id,"onUpdate:value":l[3]||(l[3]=t=>e.academic_group_id=t),"field-names":{value:"id",label:"name"},options:i.academicGroupOptions,disabled:!e.semester_id,placeholder:j(u)("Choose_Group")},null,8,["value","options","disabled","placeholder"])]),_:1})]),a("div",me,[a("button",{disabled:!e.edu_plan_id||!e.academic_group_id||!e.semester_id||!e.academic_year_id,class:"btn-search search-color",onClick:G},[ye,P("OK ")],8,he)])])]),_:1})]),_:1})]),a("div",fe,[a("div",ve,[a("div",be,[a("div",ge,[k.value?(n(),C(Y,{key:0})):f("",!0),e!=null&&e.students.length?(n(),d("div",we,[a("table",null,[a("thead",null,[a("tr",null,[ke,a("th",Oe,o(s.$t("Fullname_of_Student")),1),(n(!0),d(v,null,w(e==null?void 0:e.subjects,(t,h)=>(n(),d("th",{style:{"min-width":"160px"},colspan:"2",key:h},o(t==null?void 0:t.name),1))),128)),a("th",$e,o(s.$t("Total_Point")),1)]),a("tr",null,[(n(!0),d(v,null,w(2*(e==null?void 0:e.subjects.length),(t,h)=>(n(),d("th",{key:h},[h%2==0?(n(),d("span",Pe,o(s.$t("Reasonably_s")),1)):(n(),d("span",je,o(s.$t("uncaused_s")),1))]))),128)),a("th",Be,o(s.$t("Reasonably_s")),1),a("th",Fe,o(s.$t("uncaused_s")),1)])]),a("tbody",null,[(n(!0),d(v,null,w(e==null?void 0:e.students,(t,h)=>(n(),d("tr",{class:"",key:t.id},[a("td",null,o(h+1),1),a("td",Ne,[P(o(t==null?void 0:t.fullname)+" ",1),Ce]),(n(!0),d(v,null,w(t==null?void 0:t.caused_uncaused,(r,T)=>(n(),d(v,{key:T+"11"},[a("td",null,[(r==null?void 0:r.caused)>0?(n(),d("span",xe,o(r==null?void 0:r.caused),1)):f("",!0)]),a("td",null,[(r==null?void 0:r.uncaused)>0?(n(),d("span",Ge,o(r==null?void 0:r.uncaused),1)):f("",!0)])],64))),128)),a("td",null,o(t==null?void 0:t.total_caused),1),a("td",null,o(t==null?void 0:t.total_uncaused),1)]))),128))])]),e.last_page>1?(n(),C(R,q({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":l[4]||(l[4]=t=>e.current_page=t)}),null,16,["current-page"])):f("",!0)])):(n(),d("div",Le,[a("h5",Ye,o(s.$t("No_data")),1),a("p",Re,o(s.$t("No_information_found")),1)]))])])])]),e.data.length?(n(),d("span",Se,o(e.current_page)+"-"+o((e==null?void 0:e.data.length)+e.per_page*(e.current_page-1))+"/ "+o(s.$t("Total_Point"))+": "+o(e.total),1)):f("",!0)])}}});export{He as default};
