import{_ as R}from"./Pagination.f4a9fc5d.js";import{_ as A}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as I,d as q,h as Z,c as H,a as J,B as k,Z as M,bq as K,y as Q,w as S,i as f,b6 as W,o as n,e as c,f as s,t as o,bs as X,z as d,j as r,k as _,v as x,g as ss,s as O,l as y,F as ts,r as as,aR as os}from"./index.3390162f.js";import{h as N}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const P=I();async function ls(u,i){try{i?i="/"+i:i="";const{data:p}=await P({url:`/api/topics-monitoring${i}`,method:"GET",params:u});return p}catch(p){throw p}}async function es(){try{const{data:u}=await P({url:"/api/references/monitoring-lessons",method:"GET"});return u}catch(u){throw u}}const rs={pagetitle:"`Darslar monitoringi`",class:"lessonsPage"},ns={class:"card panel-header-bg"},is={class:"card-body"},cs={class:"panel-header"},ds={class:"card-title"},_s={class:"panel-toggles"},us={class:"filterBlock"},ps={class:"btns c-filter py-1.5 px-4"},hs=s("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),fs={class:"collapse__block"},vs={class:"my-2 col-md-3 form--item"},gs={for:"yu"},ys={class:"my-2 col-md-3 form--item"},bs={for:"yu"},ms={class:"my-2 col-md-3 form--item"},ws={for:"yu"},$s={class:"my-2 col-md-3 form--item"},ks={for:"yu"},Ss={class:"my-2 col-md-9 form--item"},Ns={for:"yu"},Cs={class:"my-2 col-md-3"},Ys={class:"btn-search search-color"},Bs=s("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Es={class:"card"},Ls={class:"card-body"},Ms={key:1,class:"table-responsive"},Os={class:"content-table"},Ps={class:"table-row w-100 d-grid"},Us=s("th",null,[s("strong",null,"#")],-1),Vs=s("br",null,null,-1),js={class:"c-gray"},Ts=s("br",null,null,-1),Ds={class:"c-gray"},Fs=s("br",null,null,-1),Gs={class:"c-gray"},zs={key:0},Rs=s("br",null,null,-1),As=s("br",null,null,-1),Is={class:"c-gray"},qs={key:2},Zs={class:"text-center"},Hs={class:"text-center"},Js={key:0,class:"element-count mb-2"},lt=q({__name:"index",async setup(u){let i,p;const b=Z(),U=H(()=>{var l,e;return(e=(l=b==null?void 0:b.user)==null?void 0:l.faculty)==null?void 0:e.name});J();const m=k(!0),w=k(!1),$=k(!1),a=M({search:"",page:1,date_start:null,date_end:null,statistic:"faculty",current_page:1,data:[],per_page:N.pagePer,links:[]}),C=M({statisticOptions:null});[i,p]=K(()=>v()),await i,p(),Q(async()=>{C.statisticOptions=await es().then(l=>l.result.map(e=>({id:e.code,name:e.name})))}),S(()=>[a.date_start,a.date_end,a.statistic],async l=>{await v()}),S(()=>a.search,async l=>{$.value=!0,a.search==""&&$.value==!0&&(await v(),$.value=!1)}),S(()=>a.current_page,async l=>{Number(l)&&(a.page=Number(l),await v())});async function v(l){let e={page:1,per_page:a.per_page};a.search&&(e.search=a.search),a.date_start&&(e.date_start=a.date_start),a.date_end&&(e.date_end=a.date_end),w.value=!0;try{if(m.value){m.value=!1;const h=await ls(e,a.statistic);Object.assign(a,h.result),setTimeout(()=>{m.value=!0},N.loaderRefresh)}}catch(h){console.log(h)}finally{w.value=!1}}return(l,e)=>{const h=f("a-select"),g=f("a-space"),Y=f("a-date-picker"),V=f("a-input"),j=f("b-card"),T=f("b-collapse"),D=A,F=R,G=W("b-toggle");return n(),c("div",rs,[s("div",ns,[s("div",is,[s("div",cs,[s("h5",ds,o(l.$t("Monitoring_of_lessons")),1),s("div",_s,[s("div",us,[X((n(),c("button",ps,[hs,d(o(l.$t("Filter")),1)])),[[G,void 0,void 0,{"collapse-3":!0}]])])])])])]),s("div",fs,[r(T,{visible:"",id:"collapse-3"},{default:_(()=>[r(j,null,{default:_(()=>[s("form",{class:"row",onSubmit:e[4]||(e[4]=x(t=>v(),["prevent"]))},[s("div",vs,[r(g,null,{default:_(()=>[r(h,{class:"form--item",value:U.value,disabled:""},null,8,["value"])]),_:1}),s("label",gs,o(l.$t("Choose_faculty")),1)]),s("div",ys,[r(g,null,{default:_(()=>[r(Y,{value:a.date_start,"onUpdate:value":e[0]||(e[0]=t=>a.date_start=t),"allow-clear":"","value-format":"YYYY-MM-DD",placeholder:l.$t("Enter_start_date")},null,8,["value","placeholder"])]),_:1}),s("label",bs,o(l.$t("Choice_Start_Date")),1)]),s("div",ms,[r(g,null,{default:_(()=>[r(Y,{value:a.date_end,"onUpdate:value":e[1]||(e[1]=t=>a.date_end=t),"value-format":"YYYY-MM-DD","allow-clear":"",placeholder:l.$t("Enter_end_date")},null,8,["value","placeholder"])]),_:1}),s("label",ws,o(l.$t("End_date")),1)]),s("div",$s,[r(g,null,{default:_(()=>[r(h,{"filter-option":ss(N).filterOptionByName,"show-search":"",value:a.statistic,"onUpdate:value":e[2]||(e[2]=t=>a.statistic=t),options:C.statisticOptions,"field-names":{value:"id",label:"name"},placeholder:l.$t("choose__statistics")},null,8,["filter-option","value","options","placeholder"])]),_:1}),s("label",ks,o(l.$t("choose__statistics")),1)]),s("div",Ss,[r(g,null,{default:_(()=>[r(V,{"allow-clear":"",id:"yu",class:"form-control",value:a.search,"onUpdate:value":e[3]||(e[3]=t=>a.search=t)},null,8,["value"])]),_:1}),s("label",Ns,o(l.$t("Search_by_Employee_Group_Subject_Lesson_Pair")),1)]),s("div",Cs,[s("button",Ys,[Bs,d(o(l.$t("Search")),1)])])],32)]),_:1})]),_:1})]),s("div",Es,[s("div",Ls,[w.value?(n(),O(D,{key:0})):y("",!0),a.data.length?(n(),c("div",Ms,[s("table",Os,[s("thead",null,[s("tr",Ps,[Us,s("th",null,[s("strong",null,o(l.$t("employee")),1)]),s("th",null,[s("strong",null,o(l.$t("Group")),1)]),s("th",null,[s("strong",null,o(l.$t("Subjects")),1)]),s("th",null,[s("strong",null,o(l.$t("Couple")),1)])])]),s("tbody",null,[(n(!0),c(ts,null,as(a.data,(t,z)=>{var B,E,L;return n(),c("tr",{class:"table-row w-100 d-grid",key:t==null?void 0:t.id},[s("td",null,o((a.current_page-1)*a.per_page+z+1),1),s("td",null,[s("div",null,[d(o(t==null?void 0:t.employee)+" ",1),Vs,s("span",js,o(t==null?void 0:t.department),1)])]),s("td",null,[s("div",null,[d(o(t==null?void 0:t.academic_group)+" ",1),Ts,s("span",Ds,o(t==null?void 0:t.faculty),1)])]),s("td",null,[s("div",null,[d(o(t==null?void 0:t.subject)+" ",1),Fs,s("span",Gs,o(t==null?void 0:t.lesson_activity),1),t!=null&&t.topic_count?(n(),c("span",zs,o(t==null?void 0:t.topic_count),1)):y("",!0)])]),s("td",null,[s("div",null,[d(o((B=t==null?void 0:t.pair)==null?void 0:B.position)+" ",1),Rs,d(" "+o((E=t==null?void 0:t.pair)==null?void 0:E.time_start)+" - "+o((L=t==null?void 0:t.pair)==null?void 0:L.time_end)+" ",1),As,s("span",Is,o(t==null?void 0:t.date),1)])])])}),128))])]),a.last_page>1?(n(),O(F,os({key:0,class:"mt-2"},{...a},{"current-page":a.current_page,"onUpdate:currentPage":e[5]||(e[5]=t=>a.current_page=t)}),null,16,["current-page"])):y("",!0)])):(n(),c("div",qs,[s("h5",Zs,o(l.$t("No_data")),1),s("p",Hs,o(l.$t("No_information_found")),1)]))])]),a!=null&&a.total?(n(),c("span",Js,o(a.current_page)+"-"+o((a==null?void 0:a.data.length)+a.per_page*(a.current_page-1))+"/ "+o(l.$t("Total_Point"))+": "+o(a==null?void 0:a.total),1)):y("",!0)])}}});export{lt as default};
