import{_ as J}from"./Pagination.f4a9fc5d.js";import{_ as K}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as Q,d as W,a as X,bO as ee,B as $,Z as C,c as te,bq as se,y as ae,w as y,i as x,o as m,e as b,f as t,t as l,s as z,l as B,bs as I,bH as R,F as oe,r as le,z as w,aR as ne,j as _,g as c}from"./index.3390162f.js";import{e as ie,b as de}from"./index.30e99442.js";import{e as re,b as ce,f as ue}from"./id.5a6e5f30.js";import{S as _e}from"./sweetalert2.all.fdef424e.js";import{h as f}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./moment.2cad4b18.js";const F=Q();async function pe(g){try{const{data:n}=await F({url:"api/students/academic-mobility",method:"GET",params:g});return n}catch(n){throw n}}async function me(g){try{const{data:n}=await F({url:"api/references/mobility-categories",method:"GET"});return n}catch(n){throw n}}async function fe(g){try{const{data:n}=await F({url:"api/commands/list/academic-mobility",method:"GET"});return n}catch(n){throw n}}async function he(g){try{const{data:n}=await F({url:"/api/student-actions/academic-mobility",method:"POST",data:g});return n}catch(n){throw n}}const ve={pagetitle:"'Akademik mobillik'",class:"transfer-mobile-page"},ye={class:"card panel-header-bg"},be={class:"card-body"},ge={class:"panel-header"},we={style:{padding:"7px 0"},class:"card-title"},Oe={class:"row"},ke={class:"col-xl-8"},Ce={class:"card"},Be={class:"card-body"},Fe={key:1,class:"table-responsive"},Ne={class:"content-table"},Te={class:"table-row d-grid w-100"},$e=t("th",null,"#",-1),Le={class:"form-check"},Me={class:"form-check"},Pe=["value"],Se=t("br",null,null,-1),Ue={class:"c-gray"},Ge=t("br",null,null,-1),Ae={class:"c-gray"},Ye=t("br",null,null,-1),Ee={class:"c-gray"},je=t("br",null,null,-1),De={class:"c-gray"},xe={key:2},ze={class:"text-center"},Ie={class:"text-center"},Re={key:0,class:"element-count mb-2"},Ve={class:"col-xl-4"},qe={class:"card"},He={class:"card-body"},Ze={class:"row"},Je={class:"mb-3 col-md-10"},Ke=t("i",{class:"mdi mdi-magnify font-size-14 align-middle"},null,-1),Qe=[Ke],We={class:"row"},Xe={class:"mb-3",name:"nameFaculty"},et={class:"mb-3",name:"nameFaculty"},tt={class:"mb-3",name:"nameFaculty"},st={class:"mb-3",name:"nameFaculty"},at={class:"mb-3",name:"nameFaculty"},ot={class:"d-flex justify-content-end"},lt=t("i",{class:"mdi mdi-close font-size-14 align-middle me-1"},null,-1),nt={class:"card"},it={class:"card-body"},dt={class:"mb-3",name:"nameFaculty"},rt={for:"division-name-select",class:"form-label"},ct={class:"mb-3",name:"nameFaculty"},ut={for:"division-name-select",class:"form-label"},_t={key:0,class:"text-danger small"},pt={class:"mb-3",name:"nameFaculty"},mt={for:"division-name-input",class:"form-label"},ft={class:"mb-3"},ht={for:"division-name-select",class:"form-label"},vt={class:"d-flex justify-content-end"},yt=["disabled"],bt=t("i",{class:"mdi mdi-check font-size-14 align-middle me-1"},null,-1),Mt=W({__name:"transfer-mobile",async setup(g){let n,L;const{t:r}=X(),M=ee(),O=$(!1);C({});const e=C({search:"",edu_plan_id:null,edu_type_id:null,semester_id:null,academic_group_id:null,edu_form_id:null,data:[],links:[],students:[],current_page:1,per_page:f.pagePer,command_id:null,reference_id:null,dateCommand:null}),d=C({eduTypeOptions:null,eduFormOptions:null,eduPlanOptions:null,semesterOptions:null,academicGroupOptions:null,orderListOptions:null,typeMobileOptions:null}),k=$([]),N=$(!0),P=te({get(){var o,s;return((o=e==null?void 0:e.students)==null?void 0:o.length)===((s=k==null?void 0:k.value)==null?void 0:s.length)},set(o){o?e.students=k.value:e.students=[]}});[n,L]=se(()=>h()),await n,L(),ae(async()=>{d.typeMobileOptions=await me().then(o=>o.result),d.orderListOptions=await fe().then(o=>{var s;return(s=o.result)==null?void 0:s.data.map(i=>({id:i.id,name:i.name,date:i.date}))}),d.eduTypeOptions=await ie().then(o=>o.result),d.eduFormOptions=await de().then(o=>o.result)}),y(()=>e.edu_type_id,async()=>{await h()}),y(()=>e.edu_form_id,async()=>{e.edu_plan_id=null,await h(),e.edu_form_id&&(d.eduPlanOptions=await re(e.edu_form_id).then(o=>{var s;return(s=o.result)==null?void 0:s.data}))}),y(()=>e.edu_plan_id,async()=>{var o,s;if(e.semester_id=null,e.academic_group_id=null,d.semesterOptions=null,d.academicGroupOptions=null,await h(),e.edu_plan_id){let i=await ce(e.edu_plan_id);d.academicGroupOptions=(o=i==null?void 0:i.result)==null?void 0:o.data.map(u=>({id:u.id,name:u.name}));let p=await ue(e.edu_plan_id);d.semesterOptions=(s=p==null?void 0:p.result)==null?void 0:s.data.map(u=>({id:u.id,name:u.course+"-"+r("course")+" "+u.semester+"-"+r("semester")}))}}),y(()=>e.command_id,()=>{e.command_id?e.dateCommand=d.orderListOptions.find(o=>o.id==e.command_id).date:e.dateCommand=null}),y(()=>e.semester_id,async()=>{await h()}),y(()=>e.academic_group_id,async()=>{await h()}),y(()=>e.current_page,async o=>{Number(o)&&(e.page=Number(o),await h(o))});async function V(){await h()}function S(){e.students=[],e.search="",e.edu_form_id=null,e.edu_type_id=null,e.edu_plan_id=null,e.academic_group_id=null,e.semester_id=null,e.reference_id=null,e.command_id=null}async function q(){var o,s;try{O.value=!0;let i={students:e.students,command_id:e.command_id,reference_id:e.reference_id};_e.fire({title:r("Delete_message.Are_you_sure"),text:r("Delete_message.Action_irreversible"),showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:r("No_Cancel"),confirmButtonText:r("transfer")}).then(async p=>{p.value&&(await he(i),M.success(r("Data_was_successfully_transferred")),S())})}catch(i){Object.assign(T,(s=(o=i.response)==null?void 0:o.data)==null?void 0:s.errors),M.error(r("Failed")+": "+i.message)}finally{O.value=!1}}const T=C({command_id:[],reference_id:[],students:[]});async function h(o){let s=C({page:o||1,per_page:e.per_page});e.edu_type_id&&(s.edu_type_id=e.edu_type_id),e.edu_form_id&&(s.edu_form_id=e.edu_form_id),e.edu_plan_id&&(s.edu_plan_id=e.edu_plan_id),e.semester_id&&(s.semester_id=e.semester_id),e.academic_group_id&&(s.academic_group_id=e.academic_group_id);try{if(O.value=!0,N.value){N.value=!1;const i=await pe(s);Object.assign(e,i.result),k.value=e.data.map(p=>p.id),setTimeout(()=>{N.value=!0},f.loaderRefresh)}}catch(i){console.log(i)}finally{O.value=!1}}return(o,s)=>{var U,G;const i=K,p=J,u=x("a-input"),v=x("a-select");return m(),b("div",ve,[t("div",ye,[t("div",be,[t("div",ge,[t("h5",we,l(o.$t("Transfer_Academic_Mobile")),1)])])]),t("div",Oe,[t("div",ke,[t("div",Ce,[t("div",Be,[O.value?(m(),z(i,{key:0})):B("",!0),e.data.length?(m(),b("div",Fe,[t("table",Ne,[t("thead",null,[t("tr",Te,[$e,t("th",null,[t("div",Le,[I(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>P.value=a)},null,512),[[R,P.value]])])]),t("th",null,l(o.$t("Student")),1),t("th",null,l(o.$t("Education_Type")),1),t("th",null,l(o.$t("by_Level")),1),t("th",null,l(o.$t("Group")),1)])]),t("tbody",null,[(m(!0),b(oe,null,le(e.data,(a,H)=>{var A,Y,E,j,D;return m(),b("tr",{class:"table-row w-100 d-grid",key:a.id},[t("td",null,l((e.current_page-1)*e.per_page+H+1),1),t("td",null,[t("div",Me,[I(t("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":s[1]||(s[1]=Z=>e.students=Z),value:a.id},null,8,Pe),[[R,e.students]])])]),t("td",null,[t("div",null,[w(l(a==null?void 0:a.surname)+" "+l(a==null?void 0:a.name)+" ",1),Se,t("span",Ue,l(a.id),1)])]),t("td",null,[t("div",null,[w(l((Y=(A=a==null?void 0:a.specialty)==null?void 0:A.edu_type)==null?void 0:Y.name)+" ",1),Ge,t("span",Ae,l(a.edu_form),1)])]),t("td",null,[t("div",null,[w(l((E=a==null?void 0:a.semester)==null?void 0:E.course)+" - kurs ",1),Ye,t("span",Ee,l((j=a==null?void 0:a.semester)==null?void 0:j.semester)+" - semestr ",1)])]),t("td",null,[t("div",null,[w(l((D=a==null?void 0:a.academic_group)==null?void 0:D.name)+" ",1),je,t("span",De,l(a.academicYear),1)])])])}),128))])]),e.last_page>1?(m(),z(p,ne({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":s[2]||(s[2]=a=>e.current_page=a)}),null,16,["current-page"])):B("",!0)])):(m(),b("div",xe,[t("h5",ze,l(o.$t("No_data")),1),t("p",Ie,l(o.$t("No_information_found")),1)]))])]),e.data.length?(m(),b("span",Re,l(e.current_page)+"-"+l((e==null?void 0:e.data.length)+e.per_page*(e.current_page-1))+"/ "+l(o.$t("Total_Point"))+": "+l(e.total),1)):B("",!0)]),t("div",Ve,[t("div",qe,[t("div",He,[t("div",Ze,[t("div",Je,[_(u,{id:"yu",value:e.search,"onUpdate:value":s[3]||(s[3]=a=>e.search=a),class:"form-control",placeholder:c(r)("choose__fish__student__passport__code")},null,8,["value","placeholder"])]),t("div",{class:"col-md-2"},[t("button",{onClick:V,type:"button",class:"btn-search search-color"},Qe)])]),t("div",We,[t("div",Xe,[_(v,{"filter-option":c(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_type_id,"onUpdate:value":s[4]||(s[4]=a=>e.edu_type_id=a),"field-names":{value:"id",label:"name"},options:d.eduTypeOptions,placeholder:c(r)("Choose_Education_Type")},null,8,["filter-option","value","options","placeholder"])]),t("div",et,[_(v,{"filter-option":c(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_form_id,"onUpdate:value":s[5]||(s[5]=a=>e.edu_form_id=a),"field-names":{value:"id",label:"name"},options:d.eduFormOptions,placeholder:c(r)("Choose_Education_Form")},null,8,["filter-option","value","options","placeholder"])]),t("div",tt,[_(v,{"filter-option":c(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_plan_id,"onUpdate:value":s[6]||(s[6]=a=>e.edu_plan_id=a),"field-names":{value:"id",label:"name"},options:d.eduPlanOptions,placeholder:o.$t("Please_select_curriculum")},null,8,["filter-option","value","options","placeholder"])]),t("div",st,[_(v,{"filter-option":c(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.semester_id,"onUpdate:value":s[7]||(s[7]=a=>e.semester_id=a),"field-names":{value:"id",label:"name"},options:d.semesterOptions,placeholder:c(r)("Choose_Semester")},null,8,["filter-option","value","options","placeholder"])]),t("div",at,[_(v,{"filter-option":c(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.academic_group_id,"onUpdate:value":s[8]||(s[8]=a=>e.academic_group_id=a),"field-names":{value:"id",label:"name"},options:d.academicGroupOptions,placeholder:c(r)("Choose_Group")},null,8,["filter-option","value","options","placeholder"])]),t("div",ot,[t("button",{class:"btns c-delet",type:"button",onClick:S},[lt,w(l(o.$t("Clear")),1)])])])])]),t("div",nt,[t("div",it,[t("div",dt,[t("label",rt,l(o.$t("Transfer_Academic_Mobile")),1),_(v,{"filter-option":c(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.reference_id,"onUpdate:value":s[9]||(s[9]=a=>e.reference_id=a),"field-names":{value:"id",label:"name"},options:d.typeMobileOptions,placeholder:"Mobillik toifasini tanlang"},null,8,["filter-option","value","options"])]),t("div",ct,[t("label",ut,l(o.$t("Decree")),1),_(v,{"filter-option":c(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.command_id,"onUpdate:value":s[10]||(s[10]=a=>e.command_id=a),"field-names":{value:"id",label:"name"},options:d.orderListOptions,placeholder:c(r)("Select_the_command")},null,8,["filter-option","value","options","placeholder"]),T.command_id?(m(),b("span",_t,l(T.command_id[0]),1)):B("",!0)]),t("div",pt,[t("label",mt,l(o.$t("Circulation_Doc_Date")),1),_(u,{value:e.dateCommand,"onUpdate:value":s[11]||(s[11]=a=>e.dateCommand=a),placeholder:"YYYY-MM-DD",disabled:"","value-format":"YYYY-MM-DD"},null,8,["value"])]),t("div",ft,[t("label",ht,l(o.$t("Count_of_Contract_Student")),1),_(u,{disabled:"",value:(U=e==null?void 0:e.students)==null?void 0:U.length},null,8,["value"])]),t("div",vt,[t("button",{class:"btns c-save",type:"button",disabled:!((G=e==null?void 0:e.students)!=null&&G.length)||!e.reference_id,onClick:q},[bt,w(l(o.$t("Send_Grades")),1)],8,yt)])])])])])])}}});export{Mt as default};
