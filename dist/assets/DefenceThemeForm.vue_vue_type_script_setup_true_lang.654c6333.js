import{_ as j}from"./SubmitButton.vue_vue_type_script_setup_true_lang.fe21b651.js";import{d as F,h as L,c as Y,n as x,u as D,a as I,bO as R,B as M,Z as k,y as W,w as E,i as N,o as m,e as p,f as n,j as s,k as c,t as o,g as f,l as _,z as y,v as Z}from"./index.3390162f.js";import{R as P,B as q,a as H}from"./index.30e99442.js";import{l as J,g as K,n as Q}from"./id.5a6e5f30.js";import{o as X,u as ee,c as ae}from"./bmi.921ed74e.js";import{h}from"./helper.569bc08f.js";const te={class:"row"},se={class:"col-md-6"},le={for:"division-name-select",class:"form-label"},oe={for:"division-name-select",class:"form-label"},ne={key:0,class:"text-danger small"},ie={for:"division-name-select",class:"form-label"},de={key:0,class:"text-danger small"},re={for:"division-name-select",class:"form-label"},ue={key:0,class:"text-danger small"},me={for:"division-name-select",class:"form-label"},pe={key:0,class:"text-danger small"},ce={for:"division-name-select",class:"form-label"},_e={key:0,class:"text-danger small"},fe={class:"col-md-6"},ve={for:"division-name-input",class:"form-label"},ye=n("sup",null,"\u26AC",-1),he={key:0,class:"text-danger small"},be={for:"division-name-input",class:"form-label"},Oe=n("sup",null,"\u26AC",-1),we={key:0,class:"text-danger small"},ge={for:"division-name-input",class:"form-label"},ke=n("sup",null,"\u26AC",-1),Ee={key:0,class:"text-danger small"},Ne={for:"division-name-input",class:"form-label"},Ue={key:0,class:"text-danger small"},Be={for:"division-name-input",class:"form-label"},Ce=n("sup",null,"\u26AC",-1),$e={key:0,class:"text-danger small"},Se={for:"division-name-input",class:"form-label"},Ae=n("sup",null,"\u26AC",-1),Ge={key:0,class:"text-danger small"},Ve={for:"division-name-input",class:"form-label"},ze=n("sup",null,"\u26AC",-1),Te={key:0,class:"text-danger small"},je={class:"row"},Fe={class:"col-md-8"},Le={for:"division-name-select",class:"form-label"},Ye={key:0,class:"text-danger small"},xe={class:"col-md-4"},De={for:"division-name-select",class:"form-label"},Ie={key:0,class:"text-danger small"},Re={class:"d-flex justify-content-end"},Je=F({__name:"DefenceThemeForm",props:{form:{}},setup(S){var C,$;const w=L(),A=Y(()=>{var a,t;return(t=(a=w==null?void 0:w.user)==null?void 0:a.faculty)==null?void 0:t.name}),U=S,G=x(),V=D();($=(C=G.params)==null?void 0:C.id)!=null;const{t:b}=I(),B=R(),g=M(!1),e=k({});Object.assign(e,U.form);const u=k({eduTypeOptions:null,departmentOptions:null,specialOptions:null,academicGroupOptions:null,academicYearOptions:null,studentOptions:null,orderOptions:null}),l=k({student_id:[],category_id:[],type_id:[],document:[],year:[]});W(async()=>{u.eduTypeOptions=await P().then(a=>a==null?void 0:a.result),u.departmentOptions=await q().then(a=>a==null?void 0:a.result),u.academicYearOptions=await H().then(a=>a==null?void 0:a.result.data.map(t=>({id:t.id,name:t.year}))),u.orderOptions=await X().then(a=>a==null?void 0:a.result)}),E(()=>e.edu_type_id,async(a,t)=>{e.edu_type_id?u.specialOptions=await J(e==null?void 0:e.edu_type_id).then(r=>{var i;return(i=r==null?void 0:r.result)==null?void 0:i.data}):(e.specialty_id=null,u.specialOptions=null)},{immediate:!0}),E(()=>e.specialty_id,async(a,t)=>{e.specialty_id?u.academicGroupOptions=await K(e.specialty_id).then(r=>r.result.data):(e.academic_group_id=null,u.academicGroupOptions=null)},{immediate:!0}),E(()=>e.academic_group_id,async()=>{e.academic_group_id?u.studentOptions=await Q(e.academic_group_id).then(a=>{var t;return(t=a==null?void 0:a.result)==null?void 0:t.data.map(r=>({id:r.id,name:r.name+" "+r.surname}))}):(e.student_id=null,u.studentOptions=null)},{immediate:!0});async function z(){var a,t,r;try{g.value=!0,T();const i=new FormData;Object.getOwnPropertyNames(e).forEach(O=>{e[O]&&i.append(O,e[O])}),i.append("theme[uz]",e.theme.uz),i.append("theme[ru]",e.theme.ru),i.append("theme[en]",e.theme.en);const v=(a=U.form)!=null&&a.id?await ee(e==null?void 0:e.id,e):await ae(i);B.success(v==null?void 0:v.result),await V.push("/archive/graduate-work")}catch(i){Object.assign(l,(r=(t=i.response)==null?void 0:t.data)==null?void 0:r.errors),console.log(i),B.error(b("Dashboard_Error"))}finally{g.value=!1}}function T(a){l[a]=[]}return(a,t)=>{const r=N("a-select"),i=N("a-form-item"),v=N("a-input"),O=j;return m(),p("form",{onSubmit:Z(z,["prevent"])},[n("div",te,[n("div",se,[s(i,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[n("label",le,o(a.$t("Structure_Faculty")),1),s(r,{class:"form--item",value:A.value,disabled:""},null,8,["value"])]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",oe,o(a.$t("Education_Type")),1),s(r,{"filter-option":f(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_type_id,"onUpdate:value":t[0]||(t[0]=d=>e.edu_type_id=d),"field-names":{value:"id",label:"name"},options:u.eduTypeOptions,placeholder:f(b)("Choose")},null,8,["filter-option","value","options","placeholder"]),l.edu_type_id?(m(),p("span",ne,o(l.edu_type_id[0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",ie,o(a.$t("Department")),1),s(r,{"filter-option":f(h).filterOptionByName,"show-search":"",value:e.department_id,"onUpdate:value":t[1]||(t[1]=d=>e.department_id=d),"field-names":{value:"id",label:"name"},placeholder:f(b)("Choose"),options:u.departmentOptions,"allow-clear":""},null,8,["filter-option","value","placeholder","options"]),l.department_id?(m(),p("span",de,o(l.department_id[0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",re,o(a.$t("by_Specialty")),1),s(r,{"filter-option":f(h).filterOptionByName,"show-search":"",value:e.specialty_id,"onUpdate:value":t[2]||(t[2]=d=>e.specialty_id=d),"field-names":{value:"id",label:"name"},disabled:!e.edu_type_id,options:u.specialOptions,placeholder:f(b)("Choose")},null,8,["filter-option","value","disabled","options","placeholder"]),l.specialty_id?(m(),p("span",ue,o(l.specialty_id[0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",me,o(a.$t("Group")),1),s(r,{"filter-option":f(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.academic_group_id,"onUpdate:value":t[3]||(t[3]=d=>e.academic_group_id=d),disabled:!e.specialty_id,"field-names":{value:"id",label:"name"},options:u.academicGroupOptions,placeholder:f(b)("Choose")},null,8,["filter-option","value","disabled","options","placeholder"]),l.academic_group_id?(m(),p("span",pe,o(l.academic_group_id[0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",ce,o(a.$t("Student")),1),s(r,{"filter-option":f(h).filterOptionByName,"show-search":"","field-names":{value:"id",label:"name"},value:e.student_id,"onUpdate:value":t[4]||(t[4]=d=>e.student_id=d),disabled:!e.academic_group_id,options:u.studentOptions,placeholder:f(b)("Choose"),"allow-clear":""},null,8,["filter-option","value","disabled","options","placeholder"]),l.student_id?(m(),p("span",_e,o(l.student_id[0]),1)):_("",!0)]),_:1})]),n("div",fe,[s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",ve,[y(o(a.$t("Graduation_work"))+" ",1),ye,y("(UZ)")]),s(v,{value:e.theme.uz,"onUpdate:value":t[5]||(t[5]=d=>e.theme.uz=d)},null,8,["value"]),l["theme.uz"]?(m(),p("span",he,o(l["theme.uz"][0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",be,[y(o(a.$t("Graduation_work"))+" ",1),Oe,y("(RU)")]),s(v,{value:e.theme.ru,"onUpdate:value":t[6]||(t[6]=d=>e.theme.ru=d)},null,8,["value"]),l["theme.ru"]?(m(),p("span",we,o(l["theme.ru"][0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",ge,[y(o(a.$t("Graduation_work"))+" ",1),ke,y("(EN)")]),s(v,{value:e.theme.en,"onUpdate:value":t[7]||(t[7]=d=>e.theme.en=d)},null,8,["value"]),l["theme.en"]?(m(),p("span",Ee,o(l["theme.en"][0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",Ne,o(a.$t("Supervisor_Name")),1),s(v,{value:e.supervisor_name,"onUpdate:value":t[8]||(t[8]=d=>e.supervisor_name=d)},null,8,["value"]),l.supervisor_name?(m(),p("span",Ue,o(l.supervisor_theme[0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",Be,[y(o(a.$t("Supervisor_Work"))+" ",1),Ce]),s(v,{value:e.supervisor_work_address,"onUpdate:value":t[9]||(t[9]=d=>e.supervisor_work_address=d)},null,8,["value"]),l.supervisor_work_address?(m(),p("span",$e,o(l.supervisor_work_address[0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",Se,[y(o(a.$t("advisor_Name"))+" ",1),Ae]),s(v,{value:e.advisor_name,"onUpdate:value":t[10]||(t[10]=d=>e.advisor_name=d)},null,8,["value"]),l.advisor_name?(m(),p("span",Ge,o(l.advisor_theme[0]),1)):_("",!0)]),_:1}),s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",Ve,[y(o(a.$t("advisor_Work"))+" ",1),ze]),s(v,{value:e.advisor_work_address,"onUpdate:value":t[11]||(t[11]=d=>e.advisor_work_address=d)},null,8,["value"]),l.advisor_work_address?(m(),p("span",Te,o(l.advisor_work_address[0]),1)):_("",!0)]),_:1}),n("div",je,[n("div",Fe,[s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",Le,o(a.$t("Command")),1),s(r,{"filter-option":f(h).filterOptionByName,"show-search":"",value:e.command_id,"onUpdate:value":t[12]||(t[12]=d=>e.command_id=d),"field-names":{value:"id",label:"name"},options:u.orderOptions},null,8,["filter-option","value","options"]),l.command_id?(m(),p("span",Ye,o(l.command_id[0]),1)):_("",!0)]),_:1})]),n("div",xe,[s(i,{class:"mb-3",name:"yearOfEnter"},{default:c(()=>[n("label",De,o(a.$t("Education_Year_Name")),1),s(r,{"filter-option":f(h).filterOptionByName,"show-search":"",value:e.academic_year_id,"onUpdate:value":t[13]||(t[13]=d=>e.academic_year_id=d),"field-names":{value:"id",label:"name"},options:u.academicYearOptions},null,8,["filter-option","value","options"]),l.academic_year_id?(m(),p("span",Ie,o(l.academic_year_id[0]),1)):_("",!0)]),_:1})])])])]),n("div",Re,[s(O,{loading:g.value,icon:"content-save"},null,8,["loading"])])],32)}}});export{Je as _};
