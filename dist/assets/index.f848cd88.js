import{_ as D}from"./StudentForm.vue_vue_type_script_setup_true_lang.09f22a4a.js";import{f as B,u as E}from"./create.451c2cea.js";import{d as F,n as O,a as j,bO as C,B as N,Z as b,bq as V,i as I,o as T,e as $,f as o,j as u,k as v,z as m,t as l,bV as w}from"./index.3390162f.js";import"./SubmitButton.vue_vue_type_script_setup_true_lang.fe21b651.js";import"./AvatarInput.vue_vue_type_style_index_0_lang.6e259ab2.js";import"./index.30e99442.js";import"./helper.569bc08f.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const q={pagetitle:"`Talaba yaratish`",class:"create-student-page"},P={class:"card panel-header-bg"},A={class:"card-body"},L={class:"panel-header"},R={class:"card-title"},U={class:"panel-toggles"},Z=o("i",{class:"mdi mdi-arrow-left font-size-14 align-middle me-1 me-1"},null,-1),G={class:"card"},H={class:"card-body"},se=F({__name:"index",props:{datas:{}},async setup(J){var y,g;let p,f;const k=O(),{t:_}=j(),r=C(),c=N(!1),e=b({faculty_id:null,specialty_id:null,date_start:null,payment_type_id:null,acceptance_id:null,citizenship_id:null,passport_issue_date:null,pinfl:null,passport:"",surname:"",name:"",last_name:"",birthdate:null,gender:null,nation_id:null,social_category_id:null,student_category_id:null,date_end:null,document_seria:"",document_number:"",country_id:null,region_id:null,now_district_id:null,address_home:"",live_place_id:null,now_region_id:null,district_id:null,now_address:"",count_of_people_living:null,category_live_together_id:null,residence_place_status:null,email:"",phone:"",phone_father:"",phone_person:"",student_status_id:null,dbt_count:null,residence_place_location:null,academic_group_id:null,semester_id:null,cource:null,fio_father:null,fio_mother:null,address_mother:null,address_father:null,phone_mother:null,workplace_mother:null,workplace_father:null,_method:"PUT"}),d=b({faculty_id:[],specialty_id:[],date_start:[],payment_type_id:[],acceptance_id:[],citizenship_id:[],passport_issue_date:[],pinfl:[],passport:[],surname:[],name:[],last_name:[],birthdate:[],gender:[],nation_id:[],social_category_id:[],student_category_id:[],date_end:[],["old_educational_name.uz"]:[],document_seria:[],document_number:[],country_id:[],region_id:[],now_district_id:[],address_home:[],live_place_id:[],now_region_id:[],district_id:[],now_address:[],count_of_people_living:[],category_live_together_id:[],residence_place_status:[],email:[],phone:[],phone_father:[],phone_person:[],student_status_id:[],dbt_count:[],residence_place_location:[],fio_father:[],fio_mother:[]}),h=(g=(y=k.params)==null?void 0:y.id)!=null?g:null;[p,f]=V(()=>S()),await p,f();async function S(){var i,a;const t=await B(h);Object.assign(e,t),e.academic_year_id=(i=t==null?void 0:t.semester)==null?void 0:i.academic_year_id,e.country_id=(a=t==null?void 0:t.country)==null?void 0:a.id}async function z(){var t,i;try{let a=function(n){return"File"in window&&n instanceof File};c.value=!0,Object.assign(d,{});const s=new FormData;Object.getOwnPropertyNames(e).forEach(n=>{!["id","citizenship","user_id"].includes(n)&&e[n]&&(n!="image"||a(e[n]))&&s.append(n,e[n])}),s.append("old_educational_name[uz]",e.old_educational_name.uz),s.append("old_educational_name[ru]",e.old_educational_name.ru),s.append("old_educational_name[en]",e.old_educational_name.en);const K=await E(h,s);r.success(_("Student_name_updated_successfully")),w.back(),w.push("/student/student")}catch(a){Object.assign(d,(i=(t=a.response)==null?void 0:t.data)==null?void 0:i.errors),a.response.status==422?r.error(_("Dashboard_Error")+": "+_("Fill_in_the_required_fields")):r.error(_("Dashboard_Error")+": "+a.message),c.value=!1}}function x(t){d[t]=[]}return(t,i)=>{const a=I("router-link"),s=D;return T(),$("div",q,[o("div",P,[o("div",A,[o("div",L,[o("h5",R,[u(a,{to:"/student/student"},{default:v(()=>[m(l(t.$t("Student_Student")),1)]),_:1}),m(" / "+l(e.surname)+" "+l(e.name)+" "+l(e.last_name),1)]),o("div",U,[u(a,{to:"/student/student",class:"btns black-c py-1.5 px-4"},{default:v(()=>[Z,m(l(t.$t("Back")),1)]),_:1})])])])]),o("div",G,[o("div",H,[u(s,{"form-state":e,errors:d,"is-loading":c.value,onSubmit:z,onClearError:x},null,8,["form-state","errors","is-loading"])])])])}}});export{se as default};
