import{_ as S}from"./SubmitButton.vue_vue_type_script_setup_true_lang.fe21b651.js";import{d as $,Z as f,h as N,c as O,B as z,bO as F,a as Y,u as B,y as C,w as V,i as L,o as r,e as p,f as o,j as l,k as u,t as d,l as _,z as k,v as R}from"./index.3390162f.js";import{b as I,u as M,c as P}from"./index.e7beba24.js";import{f as Z,a1 as q,a as x,R as G,P as H}from"./index.30e99442.js";const J={class:"row"},K={class:"col-md-6"},Q={for:"division-name-select",class:"form-label"},W={class:"col-md-6"},X={for:"division-name-select",class:"form-label"},ee={key:0,class:"text-danger small"},ae={class:"col-md-6"},se={for:"division-name-select",class:"form-label"},te={key:0,class:"text-danger small"},oe={class:"col-md-3"},ne={for:"division-name-select",class:"form-label"},le={key:0,class:"text-danger small"},ie={class:"col-md-3"},de={for:"division-name-select",class:"form-label"},ce={key:0,class:"text-danger small"},me={class:"col-md-6"},ue={for:"division-name-select",class:"form-label"},re={key:0,class:"text-danger small"},pe={class:"col-md-6"},_e={for:"division-name-select",class:"form-label"},fe=o("span",{class:"c-gray"},"(UZ)",-1),ve=o("sup",null,"o",-1),ye={class:"col-md-6"},be={for:"division-name-select",class:"form-label"},he=o("span",{class:"c-gray"},"(RU)",-1),ge=o("sup",null,"o",-1),Le={class:"col-md-6"},ke={for:"division-name-select",class:"form-label"},we=o("span",{class:"c-gray"},"(EN)",-1),De=o("sup",null,"o",-1),je={class:"d-flex justify-content-end"},Se=$({__name:"ArchiveDakFormList",props:{form:{type:Object,required:!0}},setup(U){const m=f({optionsAcademicYearList:null,optionsEduTypeList:null,optionsSpecialList:null,optionsDepartment:null,optionsDak:null,optionsAllDak:null,getListSubjectsAll:null,academicGroupsList:null,allStudents:null,optionsDakTypeList:null}),v=N(),w=O(()=>{var a,s;return(s=(a=v==null?void 0:v.user)==null?void 0:a.faculty)==null?void 0:s.name}),y=z(!1),b=F(),{t:A}=Y(),D=B(),h=U,e=f({name:{uz:"",ru:"",en:""}});Object.assign(e,h.form),C(async()=>{m.optionsDepartment=await Z().then(a=>a.result),m.optionsSpecialList=await q().then(a=>{var s;return(s=a==null?void 0:a.result)==null?void 0:s.data.map(t=>({id:t==null?void 0:t.id,name:(t==null?void 0:t.code)+" - "+(t==null?void 0:t.name)}))}),m.optionsAcademicYearList=await x().then(a=>{var s;return(s=a==null?void 0:a.result)==null?void 0:s.data}),m.optionsEduTypeList=await G().then(a=>a.result),m.optionsDakTypeList=await I().then(a=>a.result)});const c=f({edu_type:[],specialty:[],department:[],academic_year:[],type:[]});V(()=>e.academic_group_id||e.academic_year_id,async()=>{var a;if(e.academic_group_id&&e.academic_year_id){let s=f({academic_group_id:e.academic_group_id,academic_year_id:e.academic_year_id});const t=await H(s);m.getListSubjectsAll=(a=t==null?void 0:t.result)==null?void 0:a.map(n=>({id:n.subject.id,name:n.subject.name}))}});async function T(){var a,s;try{y.value=!0;const t=new FormData;if(Object.getOwnPropertyNames(e).forEach(n=>{e[n]&&!["name"].includes(n)&&t.append(n,e[n])}),t.append("name[uz]",e.name.uz),t.append("name[ru]",e.name.ru),t.append("name[en]",e.name.en),console.log(h.form.id),h.form.id){const n=await M(e==null?void 0:e.id,e);b.success(n.result),j(),setTimeout(async()=>{await D.push("/archive/certificate-committee")},1e3)}else{const n=await P(t);b.success(n.result),j(),setTimeout(async()=>{await D.push("/archive/certificate-committee")},1e3)}}catch(t){Object.assign(c,(s=(a=t.response)==null?void 0:a.data)==null?void 0:s.errors),b.error(A("Dashboard_Error"))}finally{y.value=!1}}function j(){Object.assign(c,{edu_type:[],specialty:[],department:[],academic_year:[],type:[],name:[]})}return(a,s)=>{const t=L("a-select"),n=L("a-form-item"),g=L("a-input"),E=S;return r(),p("form",{onSubmit:R(T,["prevent"])},[o("div",J,[o("div",K,[l(n,{class:"mb-3"},{default:u(()=>[o("label",Q,d(a.$t("Faculty")),1),l(t,{value:w.value,"onUpdate:value":s[0]||(s[0]=i=>w.value=i),disabled:""},null,8,["value"])]),_:1})]),o("div",W,[l(n,{class:"mb-3"},{default:u(()=>[o("label",X,d(a.$t("by_Specialty")),1),l(t,{value:e.specialty_id,"onUpdate:value":s[1]||(s[1]=i=>e.specialty_id=i),"field-names":{value:"id",label:"name"},options:m.optionsSpecialList},null,8,["value","options"]),c.specialty_id?(r(),p("span",ee,d(c.specialty_id[0]),1)):_("",!0)]),_:1})]),o("div",ae,[l(n,{class:"mb-3"},{default:u(()=>[o("label",se,d(a.$t("Hei_department")),1),l(t,{value:e.department_id,"onUpdate:value":s[2]||(s[2]=i=>e.department_id=i),"field-names":{value:"id",label:"name"},options:m.optionsDepartment},null,8,["value","options"]),c.department_id?(r(),p("span",te,d(c.department_id[0]),1)):_("",!0)]),_:1})]),o("div",oe,[l(n,{class:"mb-3"},{default:u(()=>[o("label",ne,d(a.$t("Curriculum_Education_Year")),1),l(t,{value:e.academic_year_id,"onUpdate:value":s[3]||(s[3]=i=>e.academic_year_id=i),"field-names":{value:"id",label:"name"},options:m.optionsAcademicYearList},null,8,["value","options"]),c.academic_year_id?(r(),p("span",le,d(c.academic_year_id[0]),1)):_("",!0)]),_:1})]),o("div",ie,[l(n,{class:"mb-3"},{default:u(()=>[o("label",de,d(a.$t("name")),1),l(t,{value:e.type_id,"onUpdate:value":s[4]||(s[4]=i=>e.type_id=i),"field-names":{value:"id",label:"name"},options:m.optionsDakTypeList},null,8,["value","options"]),c.type_id?(r(),p("span",ce,d(c.type_id[0]),1)):_("",!0)]),_:1})]),o("div",me,[l(n,{class:"mb-3"},{default:u(()=>[o("label",ue,d(a.$t("Education_Type")),1),l(t,{value:e.edu_type_id,"onUpdate:value":s[5]||(s[5]=i=>e.edu_type_id=i),"field-names":{value:"id",label:"name"},options:m.optionsEduTypeList},null,8,["value","options"]),c.edu_type_id?(r(),p("span",re,d(c.edu_type_id[0]),1)):_("",!0)]),_:1})]),o("div",pe,[l(n,{class:"mb-3",name:"nameFaculty"},{default:u(()=>[o("label",_e,[k(d(a.$t("name"))+" ",1),fe,ve]),l(g,{value:e.name.uz,"onUpdate:value":s[6]||(s[6]=i=>e.name.uz=i),class:"form--item"},null,8,["value"])]),_:1})]),o("div",ye,[l(n,{class:"mb-3",name:"nameFaculty"},{default:u(()=>[o("label",be,[k(d(a.$t("name"))+" ",1),he,ge]),l(g,{value:e.name.ru,"onUpdate:value":s[7]||(s[7]=i=>e.name.ru=i),class:"form--item"},null,8,["value"])]),_:1})]),o("div",Le,[l(n,{class:"mb-3",name:"nameFaculty"},{default:u(()=>[o("label",ke,[k(d(a.$t("name"))+" ",1),we,De]),l(g,{value:e.name.en,"onUpdate:value":s[8]||(s[8]=i=>e.name.en=i),class:"form--item"},null,8,["value"])]),_:1})])]),o("div",je,[l(E,{loading:y.value,icon:"content-save"},null,8,["loading"])])],32)}}});export{Se as _};
