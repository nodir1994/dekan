import{_ as T,f as j,E as Y}from"./index.30e99442.js";import{bR as z,d as A,a as E,B as k,Z as N,c as I,h as M,y as Z,bq as G,w as v,i as f,b6 as H,o as c,e as d,f as e,t as s,bs as J,z as r,j as i,k as p,g as L,s as B,l as C,F as K,r as Q,aR as W,q as X}from"./index.3390162f.js";import{_ as x}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{_ as ee}from"./NoData.ac42776e.js";import{P as ae}from"./PaginationForStatistical.bc37bc8c.js";import{h as te}from"./helper.569bc08f.js";import"./vue.runtime.esm-bundler.84001772.js";/* empty css                                                               */import"./_plugin-vue_export-helper.cdc0426e.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const se=z();async function le(V){try{const{data:_}=await se({url:"/api/report/resources",params:V});return _}catch(_){throw _}}const ne={pagetitle:"`O'zlashtirish statistikasi`",class:"byResourse"},oe={class:"card panel-header-bg"},ie={class:"card-body"},re={class:"panel-header"},ce={class:"card-title"},ue={class:"panel-toggles"},de={class:"filterBlock"},pe={class:"btns c-filter py-1.5 px-4"},_e=e("i",{class:"mdi mdi-filter me-2"},null,-1),me={class:"collapse__block"},ge={class:"row"},be={class:"row"},he={class:"card"},ve={class:"card-body"},fe={key:1,class:"table-responsive"},ye={class:"content-table"},we={class:"table-row d-grid w-100"},$e=e("th",null,[e("b",null,"#")],-1),ke=e("br",null,null,-1),Ne=e("br",null,null,-1),Le=e("br",null,null,-1),Ce=e("br",null,null,-1),Ve={key:2,class:"table-responsive"},Oe={key:0},Ae=A({__name:"index",async setup(V){let _,O;const{t:h}=E(),y=k(!1),P=k(),o=N({faculty_id:null,academic_year_id:null,semester:null,department_id:null,text:"",per_page:te.pagePer,page:1}),R=I(()=>{var a,t;return(t=(a=$==null?void 0:$.user)==null?void 0:a.faculty)==null?void 0:t.name}),$=M(),m=k({sequenceNumber:null,theNumber:null,sorting:null}),l=N({pagination:{current_page:1,per_page:o.per_page,loading:!1},result:[]}),w=N({departmentListOption:null,academicYearListOption:null});Z(async()=>{P.value=await T().then(a=>a.result.map(t=>({id:t.semester,name:t.semester+"-"+h("semester")}))),w.departmentListOption=await j().then(a=>a.result),w.academicYearListOption=await Y().then(a=>a.result.data.map(t=>({id:t.id,name:t.name})))}),[_,O]=G(()=>u()),await _,O(),v(()=>o.faculty_id,async(a,t)=>{await u(),l.pagination.current_page=1}),v(()=>o.academic_year_id,async(a,t)=>{await u(),l.pagination.current_page=1}),v(()=>o.department_id,async(a,t)=>{await u(),l.pagination.current_page=1}),v(()=>o.semester,async(a,t)=>{await u(),l.pagination.current_page=1}),v(()=>l.pagination.current_page,async a=>{Number(a)&&(o.page=Number(a),await u())});async function u(){try{y.value=!0;const a=await le(o);Object.assign(l,a);let t=`${l.pagination.per_page*(l.pagination.current_page-1)+1}- ${l.result.length+l.pagination.per_page*(l.pagination.current_page-1)}`,g=`${h("Total_Point")} : ${l.pagination.total}`,b=l.pagination.per_page*(l.pagination.current_page-1);m.value.sequenceNumber=t,m.value.theNumber=g,m.value.sorting=b}catch(a){console.log(a)}finally{y.value=!1}}return(a,t)=>{const g=f("a-select"),b=f("a-form-item"),S=f("a-form"),U=f("b-card"),D=f("b-collapse"),F=H("b-toggle");return c(),d("div",ne,[e("div",oe,[e("div",ie,[e("div",re,[e("h5",ce,s(a.$t("Resource_statistics")),1),e("div",ue,[e("div",de,[J((c(),d("button",pe,[_e,r(s(a.$t("Filtr")),1)])),[[F,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",me,[i(D,{visible:"",id:"collapse-3"},{default:p(()=>[i(U,null,{default:p(()=>[e("div",ge,[i(S,null,{default:p(()=>[e("div",be,[i(b,{class:"my-2 col-md-4"},{default:p(()=>[i(g,{value:R.value,"onUpdate:value":t[0]||(t[0]=n=>R.value=n),"field-names":{value:"id",label:"name"},disabled:"",allowClear:""},null,8,["value"])]),_:1}),i(b,{class:"my-2 col-md-4"},{default:p(()=>[i(g,{value:o.department_id,"onUpdate:value":t[1]||(t[1]=n=>o.department_id=n),options:w.departmentListOption,"field-names":{value:"id",label:"name"},allowClear:"",placeholder:L(h)("Select_a_cathedra")},null,8,["value","options","placeholder"])]),_:1}),i(b,{class:"my-2 col-md-2"},{default:p(()=>[i(g,{value:o.academic_year_id,"onUpdate:value":t[2]||(t[2]=n=>o.academic_year_id=n),options:w.academicYearListOption,"field-names":{value:"id",label:"name"},placeholder:L(h)("Select_academic_year"),allowClear:""},null,8,["value","options","placeholder"])]),_:1}),i(b,{class:"my-2 col-md-2"},{default:p(()=>[i(g,{value:o.semester,"onUpdate:value":t[3]||(t[3]=n=>o.semester=n),options:P.value,"field-names":{value:"id",label:"name"},allowClear:"",placeholder:L(h)("Select_semester")},null,8,["value","options","placeholder"])]),_:1})])]),_:1})])]),_:1})]),_:1})]),e("div",he,[e("div",ve,[y.value?(c(),B(x,{key:0})):C("",!0),l.result.length?(c(),d("div",fe,[e("table",ye,[e("thead",null,[e("tr",we,[$e,e("th",null,[e("b",null,s(a.$t("Department")),1)]),e("th",null,[e("b",null,s(a.$t("student_Sciences")),1)]),e("th",null,[e("b",null,s(a.$t("Type_of_education")),1)]),e("th",null,[e("b",null,s(a.$t("student_Training")),1)]),e("th",null,[e("b",null,s(a.$t("Topics")),1)]),e("th",null,[e("b",null,s(a.$t("Resourcess")),1)]),e("th",null,[e("b",null,s(a.$t("Assignments")),1)])])]),e("tbody",null,[(c(!0),d(K,null,Q(l.result,(n,q)=>(c(),d("tr",{class:"table-row d-grid w-100",key:q},[e("td",null,s(m.value.sorting+q+1),1),e("td",null,[r(s(n.department)+" ",1),ke,r(" "+s(n.faculty),1)]),e("td",null,[r(s(n.subject)+" ",1),Ne,r(" "+s(n.edu_plan),1)]),e("td",null,[r(s(n.edu_type)+" ",1),Le,r(" "+s(n.edu_form),1)]),e("td",null,[r(s(n.subject_type)+" ",1),Ce,r(" "+s(n.semester)+"-"+s(a.$t("semester")),1)]),e("td",null,s(n.topic_count),1),e("td",null,s(n.resource_count),1),e("td",null,s(n.task_count),1)]))),128))])]),l.pagination.last_page>1?(c(),B(ae,W({key:0,class:"mt-2"},{...l.pagination},{"current-page":l.pagination.current_page,"onUpdate:currentPage":t[4]||(t[4]=n=>l.pagination.current_page=n),loading:y.value,onOnPageChange:u}),null,16,["current-page","loading"])):C("",!0)])):(c(),d("div",Ve,[i(ee)]))])]),e("span",{class:X(["element-count mb-2",l.pagination.total?"":"d-none"])},[l.pagination.last_page?(c(),d("span",Oe,s(m.value.sequenceNumber)+" / ",1)):C("",!0),r(s(m.value.theNumber),1)],2)])}}});export{Ae as default};
