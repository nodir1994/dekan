import{bR as X,o as l,e as a,f as e,t,d as x,a as ee,B as p,bq as M,Z as D,i as k,b6 as te,bs as se,z as F,j as m,k as y,v as le,g as V,l as h,b5 as ae,s as Y,F as f,r as b}from"./index.3390162f.js";import{a as oe,V as ne}from"./index.30e99442.js";import{_ as N}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{_ as re}from"./NoData.ac42776e.js";import{_ as ue}from"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";/* empty css                                                               */const ce=X();async function ie(g){try{const{data:d}=await ce({url:`/api/statistic/student/social/${g.url}?&academic_year_id=${g.academic_year_id}&semester_type=${g.semester_type}`});return d}catch(d){throw d}}const de={},_e={colspan:"6",class:"py-5"},me={class:"text-center"};function pe(g,d){return l(),a("tr",null,[e("td",_e,[e("p",me,t(g.$t("Please_select_the_required_field")),1)])])}const he=ue(de,[["render",pe],["__scopeId","data-v-8a732174"]]),ve={pagetitle:"`Talaba (ijtimoiy)`",class:"byStudentGeneral"},ye={class:"card panel-header-bg"},fe={class:"card-body"},be={class:"panel-header"},ge={class:"card-title"},$e={class:"panel-toggles"},we={class:"filterBlock"},ke={class:"btns c-filter py-1.5 px-4"},Se=e("i",{class:"mdi mdi-filter me-2"},null,-1),Ce={class:"collapse__block"},Te={class:"my-2 col-md-4"},Be={class:"my-2 mt- col-md-2"},Ee=["disabled"],Le={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},Ae=e("i",{class:"mdi mdi-eye font-size-14 align-middle me-1"},null,-1),De={key:0,class:"card"},Fe={class:"card-body"},Ve={key:1,class:"table-responsive table-statistical"},Ye={class:"table-header"},Ne={rowspan:"2"},Pe={colspan:"5",style:{"min-width":"200px"}},ze={rowspan:"2"},je={key:1,class:"card"},Oe={class:"card-body"},Ue={key:1,class:"table-responsive table-statistical"},qe={class:"table-header"},Ge={style:{"min-width":"200px"}},Ie={style:{"min-width":"250px"}},Me={style:{width:"100px"}},Re=e("tr",null,null,-1),Ze=["rowspan"],He={style:{"text-align":"start"}},Je={style:{"text-align":"center"}},Ke={key:2,class:"card"},Qe={class:"card-body"},We={key:3,class:"card"},Xe={class:"card-body"},rt=x({__name:"index",async setup(g){let d,S;const{t:O}=ee(),v=p(!1),U=([d,S]=M(()=>oe().then(s=>s.result.data)),d=await d,S(),d),q=([d,S]=M(()=>ne().then(s=>s.result)),d=await d,S(),d),C=p(!1),T=p(!1),P=p(),z=p(),B=p([]),j=D({summ:0}),G=D({summ:0}),E=p([]),c=D({result:[]}),r=D({url:"",academic_year_id:null,semester_type:null}),$=p([]),L=p([]);async function R(){await H(),P.value=U.find(s=>s.id==r.academic_year_id).name,z.value=q.find(s=>s.code==r.semester_type).name}function Z(s){let o=[];return s.map(i=>{i.courses.map(n=>{o.push(n)})}),o}async function H(){try{v.value=!0;const s=await ie(r);Object.assign(c,s),r.url=="course"&&(C.value=!0,T.value=!1,L.value=[],c.result.forEach(o=>{const i=Z(o.edu_forms);L.value.push(i)}),j.summ=0,B.value=[],$.value=[],L.value.forEach(o=>{o.forEach((i,n)=>{$.value.length<n+1&&($.value.length=n+1,$.value[n]=0),$.value[n]+=i.count}),B.value.push(o.reduce((i,n)=>i+n.count,0)),j.summ=B.value.reduce((i,n)=>i+n,0)})),r.url=="social"&&(C.value=!1,T.value=!0,E.value=[],G.summ=0,c.result.forEach(o=>{const i=o==null?void 0:o.list;E.value.push(i.reduce((n,w)=>n+w.student_count,0)),G.summ=E.value.reduce((n,w)=>n+w,0)}))}catch(s){console.log(s)}finally{v.value=!1}}return(s,o)=>{const i=k("a-select"),n=k("a-form-item"),w=k("a-radio"),J=k("a-radio-group"),K=k("b-card"),Q=k("b-collapse"),W=te("b-toggle");return l(),a("div",ve,[e("div",ye,[e("div",fe,[e("div",be,[e("h5",ge,t(s.$t("Student"))+" ("+t(s.$t("social"))+")",1),e("div",$e,[e("div",we,[se((l(),a("button",ke,[Se,F(t(s.$t("Filtr")),1)])),[[W,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",Ce,[m(Q,{visible:"",id:"collapse-3"},{default:y(()=>[m(K,null,{default:y(()=>[e("form",{class:"row",onSubmit:le(R,["prevent"])},[m(n,{class:"my-2 col-md-3"},{default:y(()=>[m(i,{placeholder:V(O)("Choose_Education_Year"),value:r.academic_year_id,"onUpdate:value":o[0]||(o[0]=u=>r.academic_year_id=u),options:V(U),"field-names":{value:"id",label:"name"},"allow-clear":""},null,8,["placeholder","value","options"])]),_:1}),m(n,{class:"my-2 col-md-3"},{default:y(()=>[m(i,{placeholder:V(O)("Choose_Semestr_Type"),value:r.semester_type,"onUpdate:value":o[1]||(o[1]=u=>r.semester_type=u),options:V(q),"field-names":{value:"code",label:"name"},disabled:!r.academic_year_id,"allow-clear":""},null,8,["placeholder","value","options","disabled"])]),_:1}),e("div",Te,[m(J,{value:r.url,"onUpdate:value":o[2]||(o[2]=u=>r.url=u),name:"radioGroup",class:"d-flex"},{default:y(()=>[m(w,{value:"course",class:"font-size-16"},{default:y(()=>[F(t(s.$t("by_All_Student")),1)]),_:1}),m(w,{value:"social",class:"font-size-16"},{default:y(()=>[F(t(s.$t("by_Social_Category")),1)]),_:1})]),_:1},8,["value"])]),e("div",Be,[e("button",{disabled:!r.academic_year_id||!r.url||!r.semester_type,class:"btn-search c-save",type:"submit"},[e("span",null,[v.value?(l(),a("i",Le)):h("",!0)]),Ae,ae(s.$slots,"default",{},()=>[F(t(s.$t("View_Academic_Sheet")),1)])],8,Ee)])],32)]),_:3})]),_:3})]),C.value&&c.result.length>0?(l(),a("div",De,[e("div",Fe,[v.value?(l(),Y(N,{key:0})):h("",!0),c.result.length>0?(l(),a("div",Ve,[e("div",Ye,[e("table",null,[e("tr",null,[e("td",null,[e("span",null,t(s.$t("Curriculum_Education_Year"))+":",1),e("b",null,t(P.value),1)]),e("td",null,[e("span",null,t(s.$t("Semestr_Type"))+":",1),e("b",null,t(z.value),1)])])])]),e("table",null,[e("thead",null,[e("tr",null,[e("th",Ne,t(s.$t("Faculty")),1),(l(!0),a(f,null,b(c.result[0].edu_forms,u=>(l(),a("th",Pe,t(u.edu_form),1))),256)),e("th",ze,t(s.$t("Total_Point")),1)]),e("tr",null,[(l(!0),a(f,null,b(c.result[0].edu_forms.length*5,(u,_)=>(l(),a("th",{style:{"min-width":"75px"},key:_},t(_%5+1)+"-"+t(s.$t("course_number")),1))),128))])]),e("tbody",null,[(l(!0),a(f,null,b(c.result,(u,_)=>(l(),a("tr",{key:_},[e("td",null,t(u.faculty),1),(l(!0),a(f,null,b(L.value[_],(A,I)=>(l(),a("td",null,t(A.count),1))),256)),e("td",null,t(B.value[_]),1)]))),128)),e("tr",null,[e("th",null,t(s.$t("Total_Point")),1),(l(!0),a(f,null,b($.value,(u,_)=>(l(),a("th",null,t(u),1))),256)),e("th",null,t(j.summ),1)])])])])):h("",!0)])])):T.value&&c.result.length>0?(l(),a("div",je,[e("div",Oe,[v.value?(l(),Y(N,{key:0})):h("",!0),c.result.length>0?(l(),a("div",Ue,[e("div",qe,[e("table",null,[e("tr",null,[e("td",null,[e("span",null,t(s.$t("Curriculum_Education_Year"))+":",1),e("b",null,t(P.value),1)]),e("td",null,[e("span",null,t(s.$t("Semestr_Type"))+":",1),e("b",null,t(z.value),1)])])])]),e("table",null,[e("thead",null,[e("tr",null,[e("th",Ge,t(s.$t("Faculty")),1),e("th",Ie,t(s.$t("Social_class")),1),e("th",Me,t(s.$t("Number_of_students")),1)]),Re]),c.result.length>0?(l(!0),a(f,{key:0},b(c.result,(u,_)=>(l(),a("tbody",{key:_},[e("tr",null,[e("td",{rowspan:c.result[_].list.length+2},t(u.faculty),9,Ze)]),(l(!0),a(f,null,b(u.list,(A,I)=>(l(),a("tr",{key:I},[e("td",He,t(A.name),1),e("td",null,t(A.student_count),1)]))),128)),e("tr",null,[e("th",Je,t(s.$t("Total_Point")),1),e("th",null,t(E.value[_]),1)])]))),128)):h("",!0)])])):h("",!0)])])):!c.result.length&&!T.value&&!C.value?(l(),a("div",Ke,[e("div",Qe,[v.value?(l(),Y(N,{key:0})):h("",!0),m(he)])])):(l(),a("div",We,[e("div",Xe,[v.value?(l(),Y(N,{key:0})):h("",!0),m(re)])]))])}}});export{rt as default};
