import{_ as X}from"./Pagination.f4a9fc5d.js";import{_ as x}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{d as ss,B as N,a as as,bO as es,Z as g,h as ts,c as os,y as is,w,bq as ds,i as b,b6 as ls,o as _,e as c,f as a,t as o,z as y,l as $,bs as ns,j as d,k as p,v as rs,g as h,s as A,F as _s,r as us,bU as cs,aR as ps}from"./index.3390162f.js";import"./sweetalert2.all.fdef424e.js";import{p as ms,b as fs,k as ys}from"./index.30e99442.js";import{a as hs,e as V}from"./base.684f7cf4.js";import{b as vs,f as bs}from"./id.5a6e5f30.js";import{h as m}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./moment.2cad4b18.js";const gs={pagetitle:"`Talabalar ro'yxati`",class:"student-list-page"},ws={class:"card panel-header-bg"},$s={class:"card-body"},Os={class:"panel-header"},ks={class:"card-title"},Ns={class:"panel-toggles"},Bs=["disabled"],Cs={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},Ss={key:1,class:"mdi mdi-download font-size-14 align-middle me-1"},Ls=["disabled"],Fs={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},Ps=a("i",{class:"mdi mdi-download font-size-14 align-middle me-1"},null,-1),Us={class:"filterBlock"},Ts={class:"btns c-filter py-1.5 px-4"},Es=a("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),Gs={class:"collapse__block"},Is={class:"my-2 col-md-4 form--item"},zs={class:"my-2 col-md-4 form--item"},Ys={class:"my-2 col-md-4 form--item"},Ms={for:"yu"},As={class:"my-2 col-md-4 form--item"},Vs={for:"yu"},js={class:"my-2 col-md-4 form--item"},Hs={class:"my-2 col-md-4 form--item"},qs={class:"my-2 col-md-10 form--item"},Rs={for:"yu"},Zs={class:"my-2 col-md-2"},Ds={class:"btn-search search-color",type:"submit"},Js=a("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Ks={class:"row table-division"},Qs={class:"col-md-12"},Ws={class:"card"},Xs={class:"card-body"},xs={key:1,class:"table-responsive"},sa={class:"content-table"},aa={class:"table-row d-grid w-100"},ea=a("th",null,"#",-1),ta=a("br",null,null,-1),oa=a("br",null,null,-1),ia={class:"c-gray"},da=a("br",null,null,-1),la={class:"c-gray"},na=a("br",null,null,-1),ra={class:"c-gray"},_a={key:2},ua={class:"text-center"},ca={class:"text-center"},pa={key:0,class:"element-count mb-2"},Ca=ss({__name:"index",async setup(ma){var F;let B,C;N(null);const{t:S}=as();es();const O=N(!1),n=N(!1);g({});const k=ts(),L=os(()=>{var e,i;return(i=(e=k==null?void 0:k.user)==null?void 0:e.faculty)==null?void 0:i.name}),s=g({payment_type_id:null,edu_form_id:null,edu_plan_id:null,semester_id:null,academic_group_id:null,search:"",current_page:1,data:[],links:[],per_page:m.pagePer}),r=g({paymentTypeOptions:null,eduFormOptions:null,eduPlanOptions:null,semesterOptions:null,academicGroupOptions:null});is(async()=>{r.paymentTypeOptions=await ms().then(e=>e.result),r.eduFormOptions=await fs().then(e=>e.result),r.edu_plan_id=await ys().then(e=>{var i;return(i=e.result)==null?void 0:i.data.map(l=>({id:l.id,name:l.name}))})}),w(()=>[s.semester_id,s.academic_group_id,s.edu_type_id,s.edu_form_id,s.payment_type_id],async()=>{await v()}),w(()=>s.edu_plan_id,async()=>{var e,i;if(s.semester_id=null,s.academic_group_id=null,r.academicGroupOptions=null,r.semesterOptions=null,await v(),s.edu_plan_id){let l=await vs(s.edu_plan_id);r.academicGroupOptions=(e=l==null?void 0:l.result)==null?void 0:e.data.map(f=>({id:f.id,name:f.name}));let u=await bs(s.edu_plan_id);r.semesterOptions=(i=u==null?void 0:u.result)==null?void 0:i.data.map(f=>({id:f.id,name:f.semester+`-${S("semestr")} / `+f.course+`-${S("course_number")}`}))}}),w(()=>s.search,async e=>{O.value=!0,s.search==""&&O.value==!0&&(await v(),O.value=!1)}),w(()=>s.current_page,async e=>{Number(e)&&(s.page=Number(e),await v(e))}),[B,C]=ds(()=>v()),await B,C();async function v(e){let i={page:e||1,per_page:s.per_page};s.payment_type_id&&(i.payment_type_id=s.payment_type_id),s.edu_form_id&&(i.edu_form_id=s.edu_form_id),s.edu_plan_id&&(i.edu_plan_id=s.edu_plan_id),s.academic_year_id&&(i.academic_year_id=s.academic_year_id),s.semester_id&&(i.semester_id=s.semester_id),s.academic_group_id&&(i.academic_group_id=s.academic_group_id),s.search&&(i.search=s.search),n.value=!0;const l=await hs(i);Object.assign(s,l.result),n.value=!1}g({search:(F=s.search)!=null?F:""});async function j(){await v()}async function H(){let e={};s.search&&(e.search=s.search),s.payment_type_id&&(e.payment_type_id=s.payment_type_id),s.edu_form_id&&(e.edu_form_id=s.edu_form_id),s.edu_plan_id&&(e.edu_plan_id=s.edu_plan_id),s.semester_id&&(e.semester_id=s.semester_id),s.academic_group_id&&(e.academic_group_id=s.academic_group_id);try{n.value=!0,await m.downloadFile(V,e)}catch(i){console.log(i)}finally{n.value=!1}}async function q(){let e={};s.search&&(e.search=s.search),s.payment_type_id&&(e.payment_type_id=s.payment_type_id),s.edu_form_id&&(e.edu_form_id=s.edu_form_id),s.edu_plan_id&&(e.edu_plan_id=s.edu_plan_id),s.semester_id&&(e.semester_id=s.semester_id),s.academic_group_id&&(e.academic_group_id=s.academic_group_id);try{n.value=!0,await m.downloadFile(V,e)}catch(i){console.log(i)}finally{n.value=!1}}return(e,i)=>{const l=b("a-select"),u=b("a-space"),f=b("a-input"),R=b("b-card"),Z=b("b-collapse"),D=x,J=b("router-link"),K=X,Q=ls("b-toggle");return _(),c("div",gs,[a("div",ws,[a("div",$s,[a("div",Os,[a("h5",ks,o(e.$t("Student_Employment_List")),1),a("div",Ns,[a("button",{onClick:H,disabled:n.value,class:"btns c-save py-1.5 px-4 me-3",type:"button"},[n.value?(_(),c("span",Cs)):(_(),c("i",Ss)),y(o(e.$t("Import_Students")),1)],8,Bs),a("button",{onClick:q,disabled:n.value,class:"btns c-save py-1.5 px-4 me-3",type:"button"},[n.value?(_(),c("span",Fs)):$("",!0),Ps,y(o(e.$t("Student_Address")),1)],8,Ls),a("div",Us,[ns((_(),c("button",Ts,[Es,y(o(e.$t("Filter")),1)])),[[Q,void 0,void 0,{"collapse-3":!0}]])])])])])]),a("div",Gs,[d(Z,{visible:"",id:"collapse-3"},{default:p(()=>[d(R,null,{default:p(()=>[a("form",{onSubmit:rs(j,["prevent"]),class:"row"},[a("div",Is,[d(u,null,{default:p(()=>[d(l,{"filter-option":h(m).filterOptionByName,"show-search":"",class:"form--item","field-names":{value:"id",label:"name"},value:s.payment_type_id,"onUpdate:value":i[0]||(i[0]=t=>s.payment_type_id=t),options:r.paymentTypeOptions,"allow-clear":""},null,8,["filter-option","value","options"])]),_:1}),a("label",null,o(e.$t("Select_payment_form")),1)]),a("div",zs,[d(u,null,{default:p(()=>[d(l,{"filter-option":h(m).filterOptionByName,"show-search":"",class:"form--item","field-names":{value:"id",label:"name"},value:s.edu_form_id,"onUpdate:value":i[1]||(i[1]=t=>s.edu_form_id=t),options:r.eduFormOptions,"allow-clear":""},null,8,["filter-option","value","options"])]),_:1}),a("label",null,o(e.$t("Choose_Education_Form")),1)]),a("div",Ys,[d(u,null,{default:p(()=>[d(l,{"filter-option":h(m).filterOptionByName,"show-search":"",class:"form--item",disabled:"","field-names":{value:"id",label:"name"},value:L.value,"onUpdate:value":i[2]||(i[2]=t=>L.value=t)},null,8,["filter-option","value"])]),_:1}),a("label",Ms,o(e.$t("Choose_faculty")),1)]),a("div",As,[d(u,null,{default:p(()=>[d(l,{"filter-option":h(m).filterOptionByName,"show-search":"",class:"form--item","field-names":{value:"id",label:"name"},options:r.edu_plan_id,value:s.edu_plan_id,"onUpdate:value":i[3]||(i[3]=t=>s.edu_plan_id=t),"allow-clear":""},null,8,["filter-option","options","value"])]),_:1}),a("label",Vs,o(e.$t("Choose_Curriculum")),1)]),a("div",js,[d(u,null,{default:p(()=>[d(l,{"filter-option":h(m).filterOptionByName,"show-search":"",class:"form--item","field-names":{value:"id",label:"name"},disabled:!s.edu_plan_id,value:s.semester_id,"onUpdate:value":i[4]||(i[4]=t=>s.semester_id=t),options:r.semesterOptions,"allow-clear":""},null,8,["filter-option","disabled","value","options"])]),_:1}),a("label",null,o(e.$t("Choose_Semester")),1)]),a("div",Hs,[d(u,null,{default:p(()=>[d(l,{"filter-option":h(m).filterOptionByName,"show-search":"",class:"form--item","field-names":{value:"id",label:"name"},disabled:!s.edu_plan_id,options:r.academicGroupOptions,value:s.academic_group_id,"onUpdate:value":i[5]||(i[5]=t=>s.academic_group_id=t),"allow-clear":""},null,8,["filter-option","disabled","options","value"])]),_:1}),a("label",null,o(e.$t("Choose_Group")),1)]),a("div",qs,[d(u,null,{default:p(()=>[d(f,{id:"yu",value:s.search,"onUpdate:value":i[6]||(i[6]=t=>s.search=t),class:"form-control","allow-clear":""},null,8,["value"])]),_:1}),a("label",Rs,o(e.$t("choose__fish__passport__code")),1)]),a("div",Zs,[a("button",Ds,[Js,y(o(e.$t("Search")),1)])])],32)]),_:1})]),_:1})]),a("div",Ks,[a("div",Qs,[a("div",Ws,[a("div",Xs,[n.value?(_(),A(D,{key:0})):$("",!0),s.data.length?(_(),c("div",xs,[a("table",sa,[a("thead",null,[a("tr",aa,[ea,a("th",null,o(e.$t("Employee_Id_Number")),1),a("th",null,o(e.$t("Passport_Number")),1),a("th",null,o(e.$t("Student")),1),a("th",null,o(e.$t("by_Specialty")),1),a("th",null,o(e.$t("Education_Year_Name")),1),a("th",null,o(e.$t("Education_Type")),1),a("th",null,o(e.$t("Semester_Name")),1),a("th",null,o(e.$t("Group")),1),a("th",null,o(e.$t("Updated_At")),1)])]),a("tbody",null,[(_(!0),c(_s,null,us(s.data,(t,W)=>{var P,U,T,E,G,I,z,Y,M;return _(),c("tr",{class:"table-row d-grid w-100",key:t.id},[a("td",null,o((s.current_page-1)*s.per_page+W+1),1),a("td",null,o(t==null?void 0:t.id_number),1),a("td",null,o(t==null?void 0:t.passport),1),a("td",null,[d(J,{to:{path:`/student/student/${t==null?void 0:t.id}`}},{default:p(()=>[y(o(t==null?void 0:t.surname)+" "+o(t==null?void 0:t.name)+" "+o(t==null?void 0:t.last_name),1),ta]),_:2},1032,["to"])]),a("td",null,[a("div",null,[y(o((P=t.specialty)==null?void 0:P.code)+" ",1),oa,a("span",ia,o((U=t==null?void 0:t.payment_type)==null?void 0:U.name),1)])]),a("td",null,o((E=(T=t==null?void 0:t.semester)==null?void 0:T.academic_year)==null?void 0:E.name),1),a("td",null,[a("div",null,[y(o((I=(G=t==null?void 0:t.specialty)==null?void 0:G.edu_type)==null?void 0:I.name),1),da,a("span",la,o(t==null?void 0:t.edu_form_id),1)])]),a("td",null,[a("div",null,[y(o((z=t==null?void 0:t.semester)==null?void 0:z.semester)+" - "+o(e.$t("semester")),1),na,a("span",ra,o((Y=t==null?void 0:t.semester)==null?void 0:Y.course)+" - "+o(e.$t("Course")),1)])]),a("td",null,o((M=t==null?void 0:t.academic_group)==null?void 0:M.name),1),a("td",null,o(h(cs)(new Date(t==null?void 0:t.updated_at),"YYYY-MM-DD HH:mm:ss")),1)])}),128))])]),s.last_page>1?(_(),A(K,ps({key:0,class:"mt-2"},{...s},{"current-page":s.current_page,"onUpdate:currentPage":i[7]||(i[7]=t=>s.current_page=t),loading:n.value}),null,16,["current-page","loading"])):$("",!0)])):(_(),c("div",_a,[a("h5",ua,o(e.$t("No_data")),1),a("p",ca,o(e.$t("No_information_found")),1)]))])])])]),s!=null&&s.total?(_(),c("span",pa,o(s==null?void 0:s.current_page)+"-"+o((s==null?void 0:s.data.length)+s.per_page*((s==null?void 0:s.current_page)-1))+"/ "+o(e.$t("Total_Point"))+": "+o(s==null?void 0:s.total),1)):$("",!0)])}}});export{Ca as default};
