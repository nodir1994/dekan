import{_ as j}from"./Pagination.f4a9fc5d.js";import{_ as x}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as A,d as M,a as V,bO as q,B as F,h as Z,c as H,Z as N,bq as J,y as K,w as f,i as y,b6 as Q,o as n,e as _,f as s,t as e,bs as W,z as p,j as d,k as u,g as $,s as P,l as O,F as X,r as Y,aR as D}from"./index.3390162f.js";import{e as ss,b as os}from"./index.30e99442.js";import{e as ts,b as as}from"./id.5a6e5f30.js";import{h as T}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const es=A();async function ls(k){try{const{data:h}=await es({url:"api/archive/reference",method:"GET",params:k});return h}catch(h){throw h}}const ds={pagetitle:"`Ma'lumotnomalar`",class:"diploma-list"},is={class:"card panel-header-bg"},ns={class:"card-body"},cs={class:"panel-header"},_s={class:"card-title"},us={class:"panel-toggles"},rs={class:"filterBlock"},ps={class:"btns c-filter py-1.5 px-4"},hs=s("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ms={class:"collapse__block"},fs={class:"row"},ys={class:"my-2 col-xl-3 form--item"},vs={for:"yu"},bs={class:"my-2 col-xl-3 form--item"},gs={for:"yu"},ws={class:"my-2 col-xl-3 form--item"},$s={class:"my-2 col-xl-3 form--item"},Os={for:"yu"},ks={class:"my-2 col-xl-5 form--item"},Cs={for:"yu"},Fs={class:"my-2 col-xl-5 form--item"},Ns={for:"yu"},Ps={class:"my-2 col-xl-2"},Ts=s("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Bs={class:"row table-division"},Gs={class:"col-xl-12"},Ls={class:"card"},Es={class:"card-body"},Us={key:1,class:"table-responsive"},Ss={class:"content-table"},Is={class:"table-row-transcript-index"},Rs=s("th",null,"#",-1),zs=s("br",null,null,-1),js={style:{color:"#ccc"}},xs=s("br",null,null,-1),As={style:{color:"#ccc"}},Ms=s("br",null,null,-1),Vs={style:{color:"#ccc"}},qs=s("br",null,null,-1),Zs={style:{color:"#ccc"}},Hs=s("br",null,null,-1),Js={style:{color:"#ccc"}},Ks={key:0,class:"action__td"},Qs=["href"],Ws=s("i",{class:"mdi mdi-download"},null,-1),Xs=[Ws],Ys={key:1},Ds=s("button",{disabled:"",class:"btns c-save py-2 px-4 me-2"},[s("i",{class:"mdi mdi-download"})],-1),so=[Ds],oo={key:2},to={class:"text-center"},ao={class:"text-center"},eo={key:0,class:"element-count mb-2"},yo=M({__name:"index",async setup(k){let h,C;const{t:v}=V();q();const b=F(!1),g=Z(),B=H(()=>{var a,l;return(l=(a=g==null?void 0:g.user)==null?void 0:a.faculty)==null?void 0:l.name}),o=N({search:"",edu_plan_id:null,edu_type_id:null,academic_group_id:null,edu_form_id:null,edu_year_id:null,data:[],links:[],students:[],current_page:1,per_page:T.pagePer}),c=N({eduTypeOptions:null,eduFormOptions:null,eduPlanOptions:null,academicGroupOptions:null,semesterOptions:null}),w=F(!0);[h,C]=J(()=>r()),await h,C(),K(async()=>{c.eduTypeOptions=await ss().then(a=>a.result),c.eduFormOptions=await os().then(a=>a.result)});async function G(){await r()}f(()=>o.edu_type_id,async()=>{await r()}),f(()=>o.edu_form_id,async()=>{o.edu_plan_id=null,await r(),o.edu_form_id&&(c.eduPlanOptions=await ts(o.edu_form_id).then(a=>{var l;return(l=a.result)==null?void 0:l.data}))}),f(()=>o.edu_plan_id,async()=>{var a;if(o.semester_id=null,o.academic_group_id=null,c.semesterOptions=null,c.academicGroupOptions=null,await r(),o.edu_plan_id){let l=await as(o.edu_plan_id);c.academicGroupOptions=(a=l==null?void 0:l.result)==null?void 0:a.data.map(i=>({id:i.id,name:i.name}))}}),f(()=>o.academic_group_id,async()=>{await r()}),f(()=>o.current_page,async a=>{Number(a)&&(o.page=Number(a),await r(a))});async function r(a){let l={page:a||1,per_page:o.per_page};o.search.length>0&&(l.search=o==null?void 0:o.search),o.edu_type_id&&(l.edu_type_id=o==null?void 0:o.edu_type_id),o.edu_form_id&&(l.edu_form_id=o==null?void 0:o.edu_form_id),o.edu_plan_id&&(l.edu_plan_id=o==null?void 0:o.edu_plan_id),o.academic_group_id&&(l.academic_group_id=o==null?void 0:o.academic_group_id),b.value=!0;try{if(w.value){w.value=!1;const i=await ls(l);Object.assign(o,i.result),setTimeout(()=>{w.value=!0},T.loaderRefresh)}}catch(i){console.log(i)}finally{b.value=!1}}return(a,l)=>{const i=y("a-select"),m=y("a-space"),L=y("a-input"),E=y("b-card"),U=y("b-collapse"),S=x,I=j,R=Q("b-toggle");return n(),_("div",ds,[s("div",is,[s("div",ns,[s("div",cs,[s("h5",_s,e(a.$t("archive_Reference")),1),s("div",us,[s("div",rs,[W((n(),_("button",ps,[hs,p(e(a.$t("Filter")),1)])),[[R,void 0,void 0,{"collapse-3":!0}]])])])])])]),s("div",ms,[d(U,{visible:"",id:"collapse-3"},{default:u(()=>[d(E,null,{default:u(()=>[s("div",fs,[s("div",ys,[d(m,null,{default:u(()=>[d(i,{class:"form--item",value:B.value,disabled:""},null,8,["value"])]),_:1}),s("label",vs,e(a.$t("Choose_faculty")),1)]),s("div",bs,[d(m,null,{default:u(()=>[d(i,{"allow-clear":"",value:o.edu_type_id,"onUpdate:value":l[0]||(l[0]=t=>o.edu_type_id=t),"field-names":{value:"id",label:"name"},options:c.eduTypeOptions,placeholder:$(v)("Choose_Education_Type")},null,8,["value","options","placeholder"])]),_:1}),s("label",gs,e(a.$t("Choose_Education_Type")),1)]),s("div",ws,[d(m,null,{default:u(()=>[d(i,{"allow-clear":"",value:o.edu_form_id,"onUpdate:value":l[1]||(l[1]=t=>o.edu_form_id=t),"field-names":{value:"id",label:"name"},options:c.eduFormOptions,placeholder:$(v)("Choose_Education_Form")},null,8,["value","options","placeholder"])]),_:1}),s("label",null,e(a.$t("Choose_Education_Form")),1)]),s("div",$s,[d(m,null,{default:u(()=>[d(i,{"allow-clear":"",value:o.edu_plan_id,"onUpdate:value":l[2]||(l[2]=t=>o.edu_plan_id=t),"field-names":{value:"id",label:"name"},disabled:!o.edu_form_id,options:c.eduPlanOptions,placeholder:a.$t("Please_select_curriculum")},null,8,["value","disabled","options","placeholder"])]),_:1}),s("label",Os,e(a.$t("Choose_Curriculum")),1)]),s("div",ks,[d(m,null,{default:u(()=>[d(i,{"allow-clear":"",value:o.academic_group_id,"onUpdate:value":l[3]||(l[3]=t=>o.academic_group_id=t),"field-names":{value:"id",label:"name"},disabled:!o.edu_plan_id,options:c.academicGroupOptions,placeholder:$(v)("Choose_Group")},null,8,["value","disabled","options","placeholder"])]),_:1}),s("label",Cs,e(a.$t("Choose_Group")),1)]),s("div",Fs,[d(m,null,{default:u(()=>[d(L,{id:"yu",value:o.search,"onUpdate:value":l[4]||(l[4]=t=>o.search=t),class:"form-control","allow-clear":""},null,8,["value"])]),_:1}),s("label",Ns,e(a.$t("choose__fish__student__passport__code")),1)]),s("div",Ps,[s("button",{class:"btn-search search-color",onClick:G},[Ts,p(e(a.$t("Search")),1)])])])]),_:1})]),_:1})]),s("div",Bs,[s("div",Gs,[s("div",Ls,[s("div",Es,[b.value?(n(),P(S,{key:0})):O("",!0),o.data.length?(n(),_("div",Us,[s("table",Ss,[s("thead",null,[s("tr",Is,[Rs,s("th",null,e(a.$t("Student")),1),s("th",null,e(a.$t("Education_Type")),1),s("th",null,e(a.$t("by_Specialty")),1),s("th",null,e(a.$t("by_Level")),1),s("th",null,e(a.$t("Circulation_Doc_Number")),1),s("th",null,e(a.$t("Filename")),1)])]),s("tbody",null,[(n(!0),_(X,null,Y(o.data,(t,z)=>(n(),_("tr",{class:"table-row-transcript-index",key:t==null?void 0:t.id},[s("td",null,e((o.current_page-1)*o.per_page+z+1),1),s("td",null,[s("div",null,[p(e(t==null?void 0:t.student)+" ",1),zs,s("span",js,e(t==null?void 0:t.student_id),1)])]),s("td",null,[s("div",null,[p(e(t==null?void 0:t.edu_type),1),xs,s("span",As,e(t==null?void 0:t.edu_form),1)])]),s("td",null,[s("div",null,[p(e(t==null?void 0:t.specialty),1),Ms,s("span",Vs,e(t==null?void 0:t.academic_group),1)])]),s("td",null,[s("div",null,[p(e(t==null?void 0:t.course)+" - "+e(a.$t("course_number")),1),qs,s("span",Zs,e(t==null?void 0:t.semester)+" - "+e(a.$t("semester_number")),1)])]),s("td",null,[s("div",null,[p(e(t==null?void 0:t.document_number),1),Hs,s("span",Js,e(t==null?void 0:t.date),1)])]),s("td",null,[t.file?(n(),_("div",Ks,[s("a",{class:"btns c-save py-2 px-4 me-2",href:t.file},Xs,8,Qs)])):(n(),_("div",Ys,so))])]))),128))])]),o.last_page>1?(n(),P(I,D({key:0,class:"mt-2"},{...o},{"current-page":o.current_page,"onUpdate:currentPage":l[5]||(l[5]=t=>o.current_page=t)}),null,16,["current-page"])):O("",!0)])):(n(),_("div",oo,[s("h5",to,e(a.$t("No_data")),1),s("p",ao,e(a.$t("No_information_found")),1)]))])]),o.data.length?(n(),_("span",eo,e(o.current_page)+"-"+e((o==null?void 0:o.data.length)+o.per_page*(o.current_page-1))+"/ "+e(a.$t("Total_Point"))+": "+e(o.total),1)):O("",!0)])])])}}});export{yo as default};
