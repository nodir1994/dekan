import{_ as M}from"./NoData.ac42776e.js";import{_ as q}from"./Pagination.f4a9fc5d.js";import{bR as Z,d as H,a as J,bO as K,B,h as Q,c as W,Z as F,bq as X,y as Y,w as v,i as g,b6 as D,o as u,e as f,f as t,t as l,bs as x,z as y,j as i,k as _,v as ee,g as p,s as L,l as N,F as te,r as oe,aR as se}from"./index.3390162f.js";import{e as ae,b as le,p as ie}from"./index.30e99442.js";import{e as ne,b as de}from"./id.5a6e5f30.js";import{_ as re}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{h}from"./helper.569bc08f.js";/* empty css                                                               */import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const P=Z();async function ce(w){try{const{data:c}=await P({url:"api/archive/study-sheet",params:w});return c}catch(c){throw c}}async function ue(w){try{const{data:c}=await P({url:`api/archive/study-sheet/export-pdf/${w}`,responseType:"blob",method:"GET"});return c}catch(c){throw c}}const _e={pagetitle:"``",class:"studentListPage"},pe={class:"card panel-header-bg"},me={class:"card-body"},fe={class:"panel-header"},ye={class:"card-title"},he={class:"panel-toggles"},ve={class:"filterBlock"},be={class:"btns c-filter py-1.5 px-4"},ge=t("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),we={class:"collapse__block"},Oe={class:"my-2 col-md-3 form--item"},$e={for:"yu"},ke={class:"my-2 col-md-3 form--item"},Ce={class:"my-2 col-md-3 form--item"},Be={for:"yu"},Ne={class:"my-2 col-md-3 form--item"},Te={class:"my-2 col-md-4 form--item"},Fe={for:"yu"},Le={class:"my-2 col-md-2 form--item"},Pe={class:"my-2 col-md-4 form--item"},Ue={for:"yu"},Se={class:"my-2 col-md-2"},Ge={type:"submit",class:"btn-search search-color"},Ee=t("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Re={class:"row table-division"},je={class:"col-md-12"},Ie={class:"card"},ze={class:"card-body"},Ve={key:1,class:"table-responsive"},Ae={class:"content-table"},Me={class:"table-row-sheet-index"},qe=t("th",null,"#",-1),Ze={class:"justify-content-center"},He=t("br",null,null,-1),Je={style:{color:"#ccc"},class:"py-1 d-block"},Ke=t("br",null,null,-1),Qe={style:{color:"#ccc"}},We=t("br",null,null,-1),Xe={style:{color:"#ccc"}},Ye=t("br",null,null,-1),De={style:{color:"#ccc"}},xe={class:"justify-content-center"},et={class:"action__td"},tt=["onClick"],ot=t("i",{class:"mdi mdi-download font-size-12"},null,-1),st={key:2,class:"table-responsive"},at={key:0,class:"element-count mb-2"},bt=H({__name:"index",async setup(w){let c,T;const{t:O}=J();K();const b=B(!1),$=Q(),U=W(()=>{var o,a;return(a=(o=$==null?void 0:$.user)==null?void 0:o.faculty)==null?void 0:a.name}),k=B(!1),e=F({search:"",edu_plan_id:null,edu_type_id:null,payment_type_id:null,academic_group_id:null,edu_form_id:null,edu_year_id:null,data:[],links:[],students:[],current_page:1,per_page:h.pagePer}),d=F({eduTypeOptions:null,eduFormOptions:null,eduPlanOptions:null,semesterOptions:null,academicGroupOptions:null,paymentTypeOptions:null}),C=B(!0);[c,T]=X(()=>m()),await c,T(),Y(async()=>{d.eduTypeOptions=await ae().then(o=>o.result),d.eduFormOptions=await le().then(o=>o.result),d.paymentTypeOptions=await ie().then(o=>o==null?void 0:o.result)}),v(()=>e.edu_type_id,async()=>{await m()}),v(()=>e.edu_form_id,async()=>{e.edu_plan_id=null,await m(),e.edu_form_id&&(d.eduPlanOptions=await ne(e.edu_form_id).then(o=>{var a;return(a=o.result)==null?void 0:a.data}))}),v(()=>e.edu_plan_id,async()=>{var o;if(e.semester_id=null,e.academic_group_id=null,d.semesterOptions=null,d.academicGroupOptions=null,await m(),e.edu_plan_id){let a=await de(e.edu_plan_id);d.academicGroupOptions=(o=a==null?void 0:a.result)==null?void 0:o.data.map(n=>({id:n.id,name:n.name}))}}),v(()=>[e.academic_group_id,e.payment_type_id],async()=>{await m()}),v(()=>e.search,async(o,a)=>{k.value=!0,e.search==""&&k.value==!0&&(await m(),k.value=!1)}),v(()=>e.current_page,async o=>{Number(o)&&(e.page=Number(o),await m(o))});async function m(o){b.value=!0;let a={page:o||1,per_page:e.per_page};e.search!=""&&(a.search=e==null?void 0:e.search),e.edu_type_id&&(a.edu_type_id=e==null?void 0:e.edu_type_id),e.edu_form_id&&(a.edu_form_id=e==null?void 0:e.edu_form_id),e.edu_plan_id&&(a.edu_plan_id=e==null?void 0:e.edu_plan_id),e.payment_type_id&&(a.payment_type_id=e==null?void 0:e.payment_type_id),e.academic_group_id&&(a.academic_group_id=e==null?void 0:e.academic_group_id);try{if(b.value=!0,C.value){C.value=!1;const n=await ce(a);Object.assign(e,n.result),setTimeout(()=>{C.value=!0},h.loaderRefresh)}}catch(n){console.log(n)}finally{b.value=!1}}function S(o){const a=new Blob([o],{type:"application/pdf"}),n=URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download="FileName"+new Date+".pdf",r.click()}async function G(o){let a=await ue(o);S(a)}return(o,a)=>{const n=g("a-select"),r=g("a-space"),E=g("a-input"),R=g("b-card"),j=g("b-collapse"),I=q,z=M,V=D("b-toggle");return u(),f("div",_e,[t("div",pe,[t("div",me,[t("div",fe,[t("h5",ye,l(o.$t("Study__sheet")),1),t("div",he,[t("div",ve,[x((u(),f("button",be,[ge,y(l(o.$t("Filter")),1)])),[[V,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",we,[i(j,{visible:"",id:"collapse-3"},{default:_(()=>[i(R,null,{default:_(()=>[t("form",{class:"row",onSubmit:a[6]||(a[6]=ee(s=>m(),["prevent"]))},[t("div",Oe,[i(r,null,{default:_(()=>[i(n,{class:"form--item",value:U.value,disabled:""},null,8,["value"])]),_:1}),t("label",$e,l(o.$t("Choose_faculty")),1)]),t("div",ke,[i(r,null,{default:_(()=>[i(n,{"filter-option":p(h).filterOptionByName,"show-search":"",class:"form--item",value:e.payment_type_id,"onUpdate:value":a[0]||(a[0]=s=>e.payment_type_id=s),"field-names":{value:"id",label:"name"},options:d.paymentTypeOptions,placeholder:p(O)("Select_payment_form"),allowClear:""},null,8,["filter-option","value","options","placeholder"])]),_:1}),t("label",null,l(o.$t("Select_payment_form")),1)]),t("div",Ce,[i(r,null,{default:_(()=>[i(n,{"filter-option":p(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_type_id,"onUpdate:value":a[1]||(a[1]=s=>e.edu_type_id=s),"field-names":{value:"id",label:"name"},options:d.eduTypeOptions,placeholder:p(O)("Choose_Education_Type")},null,8,["filter-option","value","options","placeholder"])]),_:1}),t("label",Be,l(o.$t("Choose_Education_Type")),1)]),t("div",Ne,[i(r,null,{default:_(()=>[i(n,{"filter-option":p(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_form_id,"onUpdate:value":a[2]||(a[2]=s=>e.edu_form_id=s),"field-names":{value:"id",label:"name"},options:d.eduFormOptions,placeholder:p(O)("Choose_Education_Form")},null,8,["filter-option","value","options","placeholder"])]),_:1}),t("label",null,l(o.$t("Choose_Education_Form")),1)]),t("div",Te,[i(r,null,{default:_(()=>[i(n,{"filter-option":p(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_plan_id,"onUpdate:value":a[3]||(a[3]=s=>e.edu_plan_id=s),"field-names":{value:"id",label:"name"},disabled:!e.edu_form_id,options:d.eduPlanOptions,placeholder:o.$t("Please_select_curriculum")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),t("label",Fe,l(o.$t("Choose_Curriculum")),1)]),t("div",Le,[i(r,null,{default:_(()=>[i(n,{"filter-option":p(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.academic_group_id,"onUpdate:value":a[4]||(a[4]=s=>e.academic_group_id=s),"field-names":{value:"id",label:"name"},disabled:!e.edu_plan_id,options:d.academicGroupOptions,placeholder:p(O)("Choose_Group")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),t("label",null,l(o.$t("Choose_Group")),1)]),t("div",Pe,[i(r,null,{default:_(()=>[i(E,{id:"yu",value:e.search,"onUpdate:value":a[5]||(a[5]=s=>e.search=s),class:"form-control","allow-clear":""},null,8,["value"])]),_:1}),t("label",Ue,l(o.$t("choose__fish__student__passport__code")),1)]),t("div",Se,[t("button",Ge,[Ee,y(l(o.$t("Search")),1)])])],32)]),_:1})]),_:1})]),t("div",Re,[t("div",je,[t("div",Ie,[t("div",ze,[b.value?(u(),L(re,{key:0})):N("",!0),e.data.length>0?(u(),f("div",Ve,[t("table",Ae,[t("thead",null,[t("tr",Me,[qe,t("th",null,l(o.$t("Student")),1),t("th",null,l(o.$t("Education_Type")),1),t("th",null,l(o.$t("by_Specialty")),1),t("th",null,l(o.$t("Semester_Name")),1),t("th",null,l(o.$t("Group")),1),t("th",Ze,l(o.$t("action")),1)])]),t("tbody",null,[(u(!0),f(te,null,oe(e.data,(s,A)=>(u(),f("tr",{class:"table-row-sheet-index",key:s==null?void 0:s.id},[t("td",null,l((e.current_page-1)*e.per_page+A+1),1),t("td",null,[t("div",null,[y(l(s==null?void 0:s.full_name)+" ",1),He,t("span",Je,l(s==null?void 0:s.pinfl),1)])]),t("td",null,[t("div",null,[y(l(s==null?void 0:s.edu_type),1),Ke,t("span",Qe,l(s==null?void 0:s.edu_form),1)])]),t("td",null,[t("div",null,[y(l(s==null?void 0:s.specialty),1),We,t("span",Xe,l(s==null?void 0:s.academic_group),1)])]),t("td",null,[t("div",null,[y(l(s==null?void 0:s.semester)+" - "+l(o.$t("semester_number")),1),Ye,t("span",De,l(s==null?void 0:s.academic_year),1)])]),t("td",null,l(s==null?void 0:s.academic_group),1),t("td",xe,[t("div",et,[t("a",{onClick:lt=>G(s.id),class:"btns c-save py-2 px-4 me-2",target:"_blank"},[ot,y(" "+l(o.$t("Download")),1)],8,tt)])])]))),128))])]),e.last_page>1?(u(),L(I,se({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":a[7]||(a[7]=s=>e.current_page=s),loading:b.value}),null,16,["current-page","loading"])):N("",!0)])):(u(),f("div",st,[i(z)]))])]),e.data.length?(u(),f("span",at,l(e.current_page)+"-"+l((e==null?void 0:e.data.length)+e.per_page*(e.current_page-1))+"/ "+l(o.$t("Total_Point"))+": "+l(e.total),1)):N("",!0)])])])}}});export{bt as default};
