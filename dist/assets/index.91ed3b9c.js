import{_ as z}from"./NoData.ac42776e.js";import{_ as S}from"./Pagination.f4a9fc5d.js";import{_ as F}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as V,d as G,a as q,h as Z,c as H,B as N,Z as b,aU as J,w as K,i as y,b6 as Q,o as n,e as c,f as t,t as o,bs as W,z as O,j as _,k as f,v as X,l as w,F as P,r as B,s as j,aR as D}from"./index.3390162f.js";import{a as tt,f as st}from"./index.30e99442.js";import{h as at}from"./helper.569bc08f.js";/* empty css                                                               */import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const M=V();async function et(g){try{const{data:i}=await M({url:"/api/ratings/teachers",method:"GET",params:g});return i}catch(i){throw i}}async function ot(g){try{const{data:i}=await M({url:`api/ratings/teacher/${g}`,method:"GET"});return i}catch(i){throw i}}const lt={pagetitle:"`O'qituvchi reytingi`",class:"teacherRatingPage"},nt={class:"card panel-header-bg"},it={class:"card-body"},ct={class:"panel-header"},dt={class:"card-title"},rt={class:"panel-toggles"},_t={class:"filterBlock"},ut={class:"btns c-filter py-1.5 px-4"},ht=t("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),pt={class:"collapse__block"},mt={class:"my-2 col-xl-3 col-lg-6",name:"faculty"},bt={class:"my-2 col-xl-3 col-lg-6",name:"educationYear"},gt={key:0,class:"text-danger small"},vt={class:"my-2 col-xl-3 col-lg-6 form--item"},yt={key:0,class:"text-danger small"},ft={class:"my-2 col-xl-3 col-lg-6"},wt=["disabled"],kt=t("i",{class:"fas fa-eye me-1"},null,-1),$t={id:"myModalImportCriteriya",class:"modal fade import",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},Lt={class:"modal-dialog"},Ct={class:"modal-content"},Nt={class:"modal-header bg-card-header"},Ot={class:"modal-title",id:"myModalLabel"},Pt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},[t("i",{class:"mdi mdi-close font-size-18"})],-1),Bt={class:"modal-body"},jt={class:"table-responsive"},Mt={class:"table-vertical"},Et={class:"table-row-modal d-grid w-100"},Tt=t("th",null,"#",-1),Yt=t("th",null,[t("strong",null,"Nashr toifasi")],-1),At=t("th",null,[t("strong",null,"Nashr nomi")],-1),It={class:"table-row-modal w-100 d-grid"},Rt=t("th",null,[t("b")],-1),Ut=t("th",null,[t("b")],-1),xt=t("th",null,[t("b")],-1),zt={class:"row table-division"},St={class:"col-md-12"},Ft={class:"card"},Vt={class:"card-body"},Gt={key:1,class:"table-responsive"},qt={class:"table-vertical"},Zt={class:"table-row w-100 d-grid"},Ht=t("th",null,[t("b",null,"#")],-1),Jt=t("th",null,[t("b",null,"Action")],-1),Kt={class:"gridjs-td"},Qt={class:"list-inline mb-0"},Wt={class:"list-inline-item"},Xt={class:"see__project"},Dt=["onClick"],ts=t("i",{class:"far fa-eye font-size-14 b-actions c-see"},null,-1),ss=[ts],as={class:"table-row w-100 d-grid"},es=t("th",null,[t("b")],-1),os=t("th",null,[t("b")],-1),ls={key:2,class:"table-responsive"},ys=G({__name:"index",setup(g){q();const i=Z(),E=H(()=>{var s,l;return(l=(s=i==null?void 0:i.user)==null?void 0:s.faculty)==null?void 0:l.name}),k=N(!1),m=b({}),L=N(),u=b({page:1,academic_year_id:null,department_id:null,per_page:at.pagePer}),e=b({current_page:1,total:0,data:[],links:[]}),v=b({optionsAcademicYearList:null,departmentOptions:null});J(async()=>{v.optionsAcademicYearList=await tt().then(s=>s.result),v.departmentOptions=await st().then(s=>s.result)}),K(()=>e.current_page,async s=>{Number(s)&&(e.page=Number(s),await C())});const h=b({academic_year_id:[],department_id:[]});function T(){Object.assign(h,{academic_year_id:[],department_id:[]})}async function C(){var s,l;try{k.value=!0,T();const d=await et(u);Object.assign(e,d.result),e.total=e==null?void 0:e.data.reduce(function(p,$){return p+$.ball},0)}catch(d){Object.assign(h,(l=(s=d.response)==null?void 0:s.data)==null?void 0:l.errors)}finally{k.value=!1}}async function Y(s){let l=await ot(s);Object.assign(m,l.result),L.value=l==null?void 0:l.result.reduce(function(d,p){return d+p.ball},0)}return(s,l)=>{const d=y("a-select"),p=y("a-space"),$=y("b-card"),A=y("b-collapse"),I=F,R=S,U=z,x=Q("b-toggle");return n(),c("div",lt,[t("div",nt,[t("div",it,[t("div",ct,[t("h5",dt,o(s.$t("Rating_Teacher")),1),t("div",rt,[t("div",_t,[W((n(),c("button",ut,[ht,O(o(s.$t("Filter")),1)])),[[x,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",pt,[_(A,{visible:"",id:"collapse-3"},{default:f(()=>[_($,null,{default:f(()=>{var a;return[t("form",{onSubmit:X(C,["prevent"]),class:"row"},[t("div",mt,[_(p,null,{default:f(()=>[_(d,{class:"form--item",value:E.value,disabled:""},null,8,["value"])]),_:1})]),t("div",bt,[_(d,{value:u.academic_year_id,"onUpdate:value":l[0]||(l[0]=r=>u.academic_year_id=r),"field-names":{value:"id",label:"name"},options:(a=v.optionsAcademicYearList)==null?void 0:a.data,"allow-clear":"",placeholder:s.$t("Choose_Education_Year")},null,8,["value","options","placeholder"]),h.academic_year_id?(n(),c("span",gt,o(h.academic_year_id[0]),1)):w("",!0)]),t("div",vt,[_(p,null,{default:f(()=>[_(d,{class:"form--item","field-names":{value:"id",label:"name"},value:u.department_id,"onUpdate:value":l[1]||(l[1]=r=>u.department_id=r),options:v.departmentOptions,placeholder:s.$t("Choose_Department"),"allow-clear":""},null,8,["value","options","placeholder"])]),_:1}),h.department_id?(n(),c("span",yt,o(h.department_id[0]),1)):w("",!0)]),t("div",ft,[t("button",{disabled:!u.department_id||!u.academic_year_id,class:"btn-search c-save",type:"submit"},[kt,O(o(s.$t("Rating_view")),1)],8,wt)])],32)]}),_:1})]),_:1})]),t("div",$t,[t("div",Lt,[t("div",Ct,[t("div",Nt,[t("h5",Ot,o(m==null?void 0:m.fullname),1),Pt]),t("div",Bt,[t("div",jt,[t("table",Mt,[t("thead",null,[t("tr",Et,[Tt,t("th",null,o(s.$t("Publication")),1),Yt,At,t("th",null,o(s.$t("Score")),1)])]),t("tbody",null,[(n(!0),c(P,null,B(m,(a,r)=>(n(),c("tr",{class:"table-row-modal d-grid w-100",key:r},[t("td",null,o(+r+1),1),t("td",null,o(a==null?void 0:a.critery),1),t("td",null,o(a==null?void 0:a.publication_type),1),t("td",null,o(a==null?void 0:a.publication_name),1),t("td",null,o(a==null?void 0:a.ball),1)]))),128))]),t("thead",null,[t("tr",It,[Rt,t("th",null,[t("b",null,o(s.$t("Total_Point")),1)]),Ut,xt,t("th",null,[t("b",null,o(L.value),1)])])])])])])])])]),t("div",zt,[t("div",St,[t("div",Ft,[t("div",Vt,[k.value?(n(),j(I,{key:0})):w("",!0),(e==null?void 0:e.data.length)!==0?(n(),c("div",Gt,[t("table",qt,[t("thead",null,[t("tr",Zt,[Ht,t("th",null,[t("b",null,o(s.$t("Employee")),1)]),t("th",null,[t("b",null,o(s.$t("Score")),1)]),Jt])]),t("tbody",null,[(n(!0),c(P,null,B(e==null?void 0:e.data,(a,r)=>(n(),c("tr",{class:"table-row w-100 d-grid",key:a.id},[t("td",null,o((e.current_page-1)*e.per_page+r+1),1),t("td",null,o(a==null?void 0:a.fullname),1),t("td",null,o(a==null?void 0:a.ball),1),t("td",Kt,[t("ul",Qt,[t("li",Wt,[t("div",Xt,[t("a",{type:"text","data-bs-toggle":"modal",onClick:ns=>Y(a.id),"data-bs-target":"#myModalImportCriteriya"},ss,8,Dt)])])])])]))),128))]),t("thead",null,[t("tr",as,[es,t("th",null,[t("b",null,o(s.$t("Total_Point")),1)]),t("th",null,[t("b",null,o(e==null?void 0:e.total),1)]),os])])]),e.last_page>1?(n(),j(R,D({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":l[2]||(l[2]=a=>e.current_page=a)}),null,16,["current-page"])):w("",!0)])):(n(),c("div",ls,[_(U)]))])])])])])}}});export{ys as default};
