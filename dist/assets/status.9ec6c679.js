import{_ as H}from"./Pagination.f4a9fc5d.js";import{bR as J,d as K,a as Q,B as L,h as W,c as X,Z as U,bq as w,w as z,i as p,b6 as Y,o as n,e as d,f as s,t as a,bs as x,z as u,j as _,k as h,v as ss,g as E,F as ts,r as as,s as os,aR as rs,l as F}from"./index.3390162f.js";import{n as is,q as cs}from"./index.30e99442.js";import{h as I}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const ls=J();async function ns(m){try{const{data:i}=await ls({url:"/api/students/status",method:"GET",params:m});return i}catch(i){throw i}}const us={pagetitle:"'Talaba holati'",class:"student-status-page"},_s={class:"card panel-header-bg"},ds={class:"card-body"},es={class:"panel-header"},ps={class:"card-title"},hs={class:"panel-toggles"},fs={class:"filterBlock"},gs={class:"btns c-filter py-1.5 px-4"},bs=s("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),vs={class:"collapse__block"},ys={class:"my-2 col-xl-3 form--item"},ws={for:"yu"},ms={class:"my-2 col-xl-3 form--item"},$s={for:"yu"},ks={class:"my-2 col-xl-4 form--item"},Ns={for:"yu"},Ss={class:"my-2 col-xl-2"},Ds={type:"submit",class:"btn-search search-color"},Cs=s("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Ts={class:"card"},Bs={class:"card-body"},Ps={key:0,class:"table-responsive"},Ls={class:"content-table"},Us={class:"table-row d-grid w-100"},zs=s("th",null,"#",-1),Es=s("br",null,null,-1),Fs={class:"c-gray"},Is=s("br",null,null,-1),js={class:"c-gray"},qs=s("br",null,null,-1),As={class:"c-gray"},Gs=s("br",null,null,-1),Os={class:"c-gray"},Rs=s("br",null,null,-1),Vs=s("br",null,null,-1),Ms={class:"c-gray"},Zs={key:1},Hs={class:"text-center"},Js={class:"text-center"},Ks={key:0,class:"element-count mb-2"},at=K({__name:"status",async setup(m){let i,e;Q(),L(!1);const b=W(),j=X(()=>{var o,c;return(c=(o=b==null?void 0:b.user)==null?void 0:o.faculty)==null?void 0:c.name}),r=U({current_page:1,data:[],links:[]}),v=L(!0),l=U({student_status_id:null,search:"",page:1,per_page:I.pagePer}),q=([i,e]=w(()=>is().then(o=>o.result)),i=await i,e(),i);[i,e]=w(()=>cs().then(o=>o.result)),i=await i,e(),[i,e]=w(()=>f()),await i,e();async function A(){await f()}z(()=>l.student_status_id,async()=>{await f()}),z(()=>r.current_page,async o=>{Number(o)&&(r.page=Number(o),await f(o))});async function f(o){if(v.value){v.value=!1;let c={student_status_id:l.student_status_id||null,search:l.search||null,page:o||1,per_page:l.per_page};const g=await ns(c);Object.assign(r,g.result),setTimeout(()=>{v.value=!0},100)}}return(o,c)=>{const g=p("a-select"),y=p("a-space"),G=p("a-input"),O=p("b-card"),R=p("b-collapse"),V=H,M=Y("b-toggle");return n(),d("div",us,[s("div",_s,[s("div",ds,[s("div",es,[s("h5",ps,a(o.$t("Transfer_Status")),1),s("div",hs,[s("div",fs,[x((n(),d("button",gs,[bs,u(a(o.$t("Filter")),1)])),[[M,void 0,void 0,{"collapse-3":!0}]])])])])])]),s("div",vs,[_(R,{visible:"",id:"collapse-3"},{default:h(()=>[_(O,null,{default:h(()=>[s("form",{class:"row",onSubmit:ss(A,["prevent"])},[s("div",ys,[_(y,null,{default:h(()=>[_(g,{class:"form--item",value:j.value,disabled:""},null,8,["value"])]),_:1}),s("label",ws,a(o.$t("Choose_faculty")),1)]),s("div",ms,[_(y,null,{default:h(()=>[_(g,{class:"form--item",allowClear:"","filter-option":E(I).filterOptionByName,"show-search":"",value:l.student_status_id,"onUpdate:value":c[0]||(c[0]=t=>l.student_status_id=t),options:E(q),"field-names":{value:"id",label:"name"}},null,8,["filter-option","value","options"])]),_:1}),s("label",$s,a(o.$t("select__status__student")),1)]),s("div",ks,[_(y,null,{default:h(()=>[_(G,{id:"yu",class:"form-control",value:l.search,"onUpdate:value":c[1]||(c[1]=t=>l.search=t),"allow-clear":""},null,8,["value"])]),_:1}),s("label",Ns,a(o.$t("Search_by_Name_ID_Number_Passport_Decree_Number_Decree_Date")),1)]),s("div",Ss,[s("button",Ds,[Cs,u(a(o.$t("Search")),1)])])],32)]),_:1})]),_:1})]),s("div",Ts,[s("div",Bs,[r.data.length?(n(),d("div",Ps,[s("table",Ls,[s("thead",null,[s("tr",Us,[zs,s("th",null,a(o.$t("Student")),1),s("th",null,a(o.$t("Education_Type")),1),s("th",null,a(o.$t("by_Level")),1),s("th",null,a(o.$t("Group")),1),s("th",null,a(o.$t("Transfer_Status")),1),s("th",null,a(o.$t("Document_number")),1)])]),s("tbody",null,[(n(!0),d(ts,null,as(r.data,(t,Z)=>{var $,k,N,S,D,C,T,B,P;return n(),d("tr",{class:"table-row d-grid w-100",key:t==null?void 0:t.id},[s("td",null,a((r.current_page-1)*r.per_page+Z+1),1),s("td",null,[s("div",null,[u(a(t==null?void 0:t.fullname)+" ",1),Es,s("span",Fs,a(t==null?void 0:t.user_id)+" / "+a(t==null?void 0:t.passport)+" / "+a(($=t==null?void 0:t.faculty)==null?void 0:$.name),1)])]),s("td",null,[s("div",null,[u(a((N=(k=t==null?void 0:t.specialty)==null?void 0:k.edu_type)==null?void 0:N.name)+" ",1),Is,s("span",js,a((S=t==null?void 0:t.edu_form)==null?void 0:S.name),1)])]),s("td",null,[s("div",null,[u(a((D=t==null?void 0:t.semester)==null?void 0:D.course)+"-"+a(o.$t("Course"))+" ",1),qs,s("span",As,a((C=t==null?void 0:t.semester)==null?void 0:C.semester)+"-"+a(o.$t("semester")),1)])]),s("td",null,[s("div",null,[u(a((T=t==null?void 0:t.academic_group)==null?void 0:T.name)+" ",1),Gs,s("span",Os,a((B=t==null?void 0:t.semester)==null?void 0:B.date_start),1)])]),s("td",null,a((P=t==null?void 0:t.student_status)==null?void 0:P.name),1),s("td",null,[s("div",null,[u(a(t==null?void 0:t.document_number),1),Rs,u(" "+a(t==null?void 0:t.document_seria),1),Vs,s("span",Ms,a(t==null?void 0:t.date),1)])])])}),128))])]),r.last_page>1?(n(),os(V,rs({key:0,class:"mt-2"},{...r},{"current-page":r.current_page,"onUpdate:currentPage":c[2]||(c[2]=t=>r.current_page=t)}),null,16,["current-page"])):F("",!0)])):(n(),d("div",Zs,[s("h5",Hs,a(o.$t("No_data")),1),s("p",Js,a(o.$t("No_information_found")),1)]))])]),r.data.length?(n(),d("span",Ks,a(r.current_page)+"-"+a(r.data.length+r.per_page*(r.current_page-1))+"/ "+a(o.$t("Total_Point"))+": "+a(r.total),1)):F("",!0)])}}});export{at as default};
