import{_ as S}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{d as z,a as K,bO as M,B as L,Z as w,h as R,c as V,bq as Z,y as H,w as h,i as v,b6 as J,o as c,e as m,f as s,t as l,bs as Q,z as Y,j as i,k as _,g as O,s as W,l as I,F as X,r as x}from"./index.3390162f.js";import{j as D}from"./index.30e99442.js";import{a as ee,b as ae,s as se}from"./id.5a6e5f30.js";import{g as oe}from"./groups.f8e17714.js";import{h as U}from"./helper.569bc08f.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const te={pagetitle:"'Kordinator'",class:"group-coordinator"},le={class:"card panel-header-bg"},de={class:"card-body"},ie={class:"panel-header"},re={class:"card-title"},ne={class:"panel-toggles"},ce={class:"filterBlock"},_e={class:"btns c-filter py-1.5 px-4"},ue=s("i",{class:"mdi mdi-filter me-2"},null,-1),pe={class:"collapse__block"},me={class:"row"},he={class:"my-2 col-md-6 form--item"},fe={for:"yu"},ve={class:"my-2 col-md-6 form--item"},ye={for:"yu"},ge={class:"my-2 col-md-4 form--item"},be={for:"yu"},we={class:"my-2 col-md-4 form--item"},Oe={for:"yu"},Ce={class:"my-2 col-md-4 form--item"},$e={for:"yu"},ke={class:"card"},Ne={class:"card-body"},Be={key:1,class:"table-responsive"},Ge={class:"content-table"},Pe={class:"table-row-schedule"},Le=s("th",null,"#",-1),Ye={key:2},Ie={class:"text-center"},Ue={class:"text-center"},Fe={key:0,class:"element-count mb-2"},Ze=z({__name:"index",async setup(je){let C,$;const{t:f}=K();M();const y=L(!1);w({});const g=R(),F=V(()=>{var a,t;return(t=(a=g==null?void 0:g.user)==null?void 0:a.faculty)==null?void 0:t.name}),e=w({edu_plan_id:null,academic_year_id:null,semester_id:null,academic_group_id:null,current_page:1,data:[],per_page:U.pagePer,links:[]}),r=w({eduPlanOptions:null,academicYearsOptions:null,semesterOptions:null,academicGroupOptions:null}),b=L(!0);[C,$]=Z(()=>u()),await C,$(),H(async()=>{r.eduPlanOptions=await D().then(a=>{var t;return(t=a==null?void 0:a.result)==null?void 0:t.data})}),h(()=>e.current_page,async a=>{Number(a)&&(e.page=Number(a),await u(a))}),h(()=>e.edu_plan_id,async()=>{var a,t;if(e.academic_year_id=null,e.semester_id=null,e.academic_group_id=null,r.academicGroupOptions=null,r.semesterOptions=null,await u(),e.edu_plan_id){let d=await ee(e.edu_plan_id);r.academicYearsOptions=(a=d==null?void 0:d.result)==null?void 0:a.data.map(p=>({id:p.id,name:p.name}));let n=await ae(e.edu_plan_id);r.academicGroupOptions=(t=n==null?void 0:n.result)==null?void 0:t.data.map(p=>({id:p.id,name:p.name}))}}),h(()=>e.academic_year_id,async()=>{var a;if(e.semester_id=null,r.semesterOptions=null,await u(),e.edu_plan_id&&e.academic_year_id){let t=await se(e);r.semesterOptions=(a=t==null?void 0:t.result)==null?void 0:a.data.map(d=>({id:d.id,semester:d.semester,name:d.course+"-"+f("Course")+" "+d.semester+"-"+f("semester")}))}}),h(()=>e.semester_id,async()=>{await u()}),h(()=>e.academic_group_id,async()=>{await u()}),h(()=>e.current_page,async a=>{Number(a)&&(e.page=Number(a),await u())});async function u(a){let t={page:e==null?void 0:e.page};a||(t.page=a),e.edu_plan_id&&(t.edu_plan_id=e==null?void 0:e.edu_plan_id),e.academic_year_id&&(t.academic_year_id=e==null?void 0:e.academic_year_id),e.semester_id&&(t.semester_id=e==null?void 0:e.semester_id),e.academic_group_id&&(t.academic_group_id=e==null?void 0:e.academic_group_id),y.value=!0;try{if(b.value){b.value=!1;const d=await oe(t);Object.assign(e,d.result),setTimeout(()=>{b.value=!0},U.loaderRefresh)}}catch(d){console.log(d)}finally{y.value=!1}}return(a,t)=>{const d=v("a-select"),n=v("a-space"),p=v("b-card"),j=v("b-collapse"),E=S,T=v("router-link"),q=J("b-toggle");return c(),m("div",te,[s("div",le,[s("div",de,[s("div",ie,[s("h5",re,l(a.$t("coordinator_groups")),1),s("div",ne,[s("div",ce,[Q((c(),m("button",_e,[ue,Y(l(a.$t("Filter")),1)])),[[q,void 0,void 0,{"collapse-3":!0}]])])])])])]),s("div",pe,[i(j,{visible:"",id:"collapse-3"},{default:_(()=>[i(p,null,{default:_(()=>[s("div",me,[s("div",he,[i(n,null,{default:_(()=>[i(d,{class:"form--item",value:F.value,"field-names":{value:"id",label:"name"},disabled:"","allow-clear":"","show-search":""},null,8,["value"])]),_:1}),s("label",fe,l(a.$t("Choose_faculty")),1)]),s("div",ve,[i(n,null,{default:_(()=>[i(d,{"allow-clear":"",value:e.edu_plan_id,"onUpdate:value":t[0]||(t[0]=o=>e.edu_plan_id=o),"field-names":{value:"id",label:"name"},options:r.eduPlanOptions,placeholder:a.$t("Choose")},null,8,["value","options","placeholder"])]),_:1}),s("label",ye,l(a.$t("Please_select_curriculum")),1)]),s("div",ge,[i(n,null,{default:_(()=>[i(d,{"allow-clear":"",value:e.academic_year_id,"onUpdate:value":t[1]||(t[1]=o=>e.academic_year_id=o),"field-names":{value:"id",label:"name"},disabled:!e.edu_plan_id,options:r.academicYearsOptions,placeholder:O(f)("Choose")},null,8,["value","disabled","options","placeholder"])]),_:1}),s("label",be,l(a.$t("Choose_Education_Year")),1)]),s("div",we,[i(n,null,{default:_(()=>[i(d,{"allow-clear":"",value:e.semester_id,"onUpdate:value":t[2]||(t[2]=o=>e.semester_id=o),"field-names":{value:"semester",label:"name"},options:r.semesterOptions,disabled:!e.academic_year_id,placeholder:O(f)("Choose")},null,8,["value","options","disabled","placeholder"])]),_:1}),s("label",Oe,l(a.$t("Choose_Semester")),1)]),s("div",Ce,[i(n,null,{default:_(()=>[i(d,{"allow-clear":"",value:e.academic_group_id,"onUpdate:value":t[3]||(t[3]=o=>e.academic_group_id=o),"field-names":{value:"id",label:"name"},options:r.academicGroupOptions,disabled:!e.edu_plan_id,placeholder:O(f)("Choose")},null,8,["value","options","disabled","placeholder"])]),_:1}),s("label",$e,l(a.$t("Choose_Group")),1)])])]),_:1})]),_:1})]),s("div",ke,[s("div",Ne,[y.value?(c(),W(E,{key:0})):I("",!0),e.data.length?(c(),m("div",Be,[s("table",Ge,[s("thead",null,[s("tr",Pe,[Le,s("th",null,l(a.$t("Group")),1),s("th",null,l(a.$t("study_plan")),1),s("th",null,l(a.$t("Curriculum_Education_Year")),1),s("th",null,l(a.$t("coordinator_fish")),1)])]),s("tbody",null,[(c(!0),m(X,null,x(e.data,(o,A)=>{var k,N,B,G;return c(),m("tr",{class:"table-row-schedule",key:o==null?void 0:o.id},[s("td",null,l((e.current_page-1)*e.per_page+A+1),1),s("td",null,[i(T,{to:{path:"/coordinator/group-coordinator/"+(o==null?void 0:o.id),query:{groupName:(k=o==null?void 0:o.academic_group)==null?void 0:k.name,semester_id:(N=o==null?void 0:o.semester)==null?void 0:N.id}},class:"actions-h me-1 mt-1"},{default:_(()=>{var P;return[Y(l((P=o==null?void 0:o.academic_group)==null?void 0:P.name),1)]}),_:2},1032,["to"])]),s("td",null,l((B=o==null?void 0:o.edu_plan)==null?void 0:B.name),1),s("td",null,l((G=o==null?void 0:o.semester)==null?void 0:G.academic_year),1),s("td",null,l(o.fullname),1)])}),128))])])])):(c(),m("div",Ye,[s("h5",Ie,l(a.$t("No_data")),1),s("p",Ue,l(a.$t("No_information_found")),1)]))])]),e.data.length?(c(),m("span",Fe,l(e.current_page)+"-"+l((e==null?void 0:e.data.length)+e.per_page*(e.current_page-1))+"/ "+l(a.$t("Total_Point"))+": "+l(e.total),1)):I("",!0)])}}});export{Ze as default};
