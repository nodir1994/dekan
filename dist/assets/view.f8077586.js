import{_ as j}from"./Pagination.f4a9fc5d.js";import{_ as z}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{d as F,h as T,Z as $,a as A,bO as R,B as N,y as I,w,i as m,b6 as M,o as c,e as u,f as e,j as d,k as r,z as f,t as o,bs as V,g as _,s as S,l as O,F as Z,r as q,aR as H}from"./index.3390162f.js";import{a as J}from"./index.30e99442.js";import{s as K,a as Q,c as W}from"./academic-note.86023cee.js";import{b as X,p as x}from"./id.5a6e5f30.js";import{h}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const D={pagetitle:"`Baholarni ko'rish`",class:"diploma-list"},aa={class:"card panel-header-bg"},ea={class:"card-body"},sa={class:"panel-header"},ta={class:"card-title"},oa={class:"panel-toggles"},la=e("i",{class:"mdi mdi-arrow-left font-size-14 align-middle me-1 me-1"},null,-1),ia={class:"filterBlock"},da={class:"btns c-filter py-1.5 px-4"},na=e("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ca={class:"collapse__block"},ra={class:"row"},ua={class:"my-2 col-xl-2 form--item"},_a={for:"yu"},pa={class:"my-2 col-xl-3 form--item"},ha={for:"yu"},ma={class:"my-2 col-xl-2 form--item"},fa={class:"my-2 col-xl-3 form--item"},va={for:"yu"},ga={class:"my-2 col-xl-2"},ba=["disabled"],ya=e("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),wa={class:"row table-division"},ka={class:"col-xl-12"},$a={class:"card"},Oa={class:"card-body"},Ca={key:1,class:"table-responsive"},Na={class:"content-table"},Sa={class:"table-row-note-view"},Ba=e("th",null,"#",-1),Pa={class:"form-check form-switch my-auto"},Ya=["checked","disabled","onChange"],Ga={key:2},La={class:"text-center"},Ua={class:"text-center"},Ea={key:0,class:"element-count mb-2"},Qa=F({__name:"view",setup(ja){T(),$({});const{t:v}=A(),C=R(),p=N(!1),a=$({edu_plan_id:null,academic_year_id:null,academic_group_id:null,student_id:null,data:[],links:[],current_page:1,per_page:h.pagePer}),n=$({academicYearsOptions:null,eduPlanOptions:null,academicGroupOptions:null,studentOptions:null}),k=N(!0);I(async()=>{n.academicYearsOptions=await J().then(s=>s.result.data)}),w(()=>a.edu_plan_id,async()=>{var s;if(a.academic_group_id=null,n.academicGroupOptions=null,a.edu_plan_id){let l=await X(a.edu_plan_id);n.academicGroupOptions=(s=l==null?void 0:l.result)==null?void 0:s.data.map(i=>({id:i.id,name:i.name}))}}),w(()=>a.academic_group_id,async s=>{a.student_id=null,n.studentOptions=null,s&&(n.studentOptions=await K(s).then(l=>l.result.data.map(i=>({id:i.id,name:(i==null?void 0:i.name)+" "+(i==null?void 0:i.surname)}))))}),w(()=>a.academic_year_id,async s=>{await g(),a.edu_plan_id=null,n.eduPlanOptions=null,s&&(n.eduPlanOptions=await x(s).then(l=>l.result.data))}),w(()=>a.current_page,async s=>{Number(s)&&(a.page=Number(s),await g(s))});async function g(s){p.value=!0;let l={page:s,per_page:a.per_page};a.edu_plan_id&&(l.edu_plan_id=a==null?void 0:a.edu_plan_id),a.academic_year_id&&(l.academic_year_id=a==null?void 0:a.academic_year_id),a.academic_group_id&&(l.academic_group_id=a==null?void 0:a.academic_group_id),a.student_id&&(l.student_id=a==null?void 0:a.student_id);try{if(k.value&&a.student_id){k.value=!1;const i=await Q(l);Object.assign(a,i.result),setTimeout(()=>{k.value=!0},h.loaderRefresh)}}catch(i){console.log(i)}finally{p.value=!1}}async function B(s){try{p.value=!0,await W(s),await g(),C.success(v("Data_stored_successfully"))}catch(l){C.error(l.message)}finally{p.value=!1}}return(s,l)=>{const i=m("router-link"),b=m("a-select"),y=m("a-space"),P=m("b-card"),Y=m("b-collapse"),G=z,L=j,U=M("b-toggle");return c(),u("div",D,[e("div",aa,[e("div",ea,[e("div",sa,[e("h5",ta,[d(i,{to:"/archive/academic-note"},{default:r(()=>[f(o(s.$t("archive")),1)]),_:1}),f(" / "+o(s.$t("archive_Academic_Record_View")),1)]),e("div",oa,[d(i,{to:"/archive/academic-note",class:"btns black-c py-1.5 px-4 d-inline-block me-2"},{default:r(()=>[la,f(o(s.$t("Prev")),1)]),_:1}),e("div",ia,[V((c(),u("button",da,[na,f(o(s.$t("Filter")),1)])),[[U,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",ca,[d(Y,{visible:"",id:"collapse-3"},{default:r(()=>[d(P,null,{default:r(()=>[e("div",ra,[e("div",ua,[d(y,null,{default:r(()=>[d(b,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",value:a.academic_year_id,"onUpdate:value":l[0]||(l[0]=t=>a.academic_year_id=t),"field-names":{value:"id",label:"name"},options:n.academicYearsOptions,placeholder:_(v)("Choose_Education_Year")},null,8,["filter-option","value","options","placeholder"])]),_:1}),e("label",_a,o(s.$t("Choose_Education_Year")),1)]),e("div",pa,[d(y,null,{default:r(()=>[d(b,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",value:a.edu_plan_id,"onUpdate:value":l[1]||(l[1]=t=>a.edu_plan_id=t),"field-names":{value:"id",label:"name"},disabled:!a.academic_year_id,options:n.eduPlanOptions,placeholder:s.$t("Please_select_curriculum")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),e("label",ha,o(s.$t("Choose_Curriculum")),1)]),e("div",ma,[d(y,null,{default:r(()=>[d(b,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",value:a.academic_group_id,"onUpdate:value":l[2]||(l[2]=t=>a.academic_group_id=t),"field-names":{value:"id",label:"name"},disabled:!a.edu_plan_id,options:n.academicGroupOptions,placeholder:_(v)("Choose_Group")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),e("label",null,o(s.$t("Choose_Group")),1)]),e("div",fa,[d(y,null,{default:r(()=>[d(b,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",value:a.student_id,"onUpdate:value":l[3]||(l[3]=t=>a.student_id=t),"field-names":{value:"id",label:"name"},disabled:!a.academic_group_id,options:n.studentOptions,placeholder:_(v)("Choose_Student")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),e("label",va,o(s.$t("Choose_Student")),1)]),e("div",ga,[e("button",{class:"btn-search search-color",onClick:l[4]||(l[4]=t=>g()),disabled:!a.student_id},[ya,f(o(s.$t("Search")),1)],8,ba)])])]),_:1})]),_:1})]),e("div",wa,[e("div",ka,[e("div",$a,[e("div",Oa,[p.value?(c(),S(G,{key:0})):O("",!0),a.data.length?(c(),u("div",Ca,[e("table",Na,[e("thead",null,[e("tr",Sa,[Ba,e("th",null,o(s.$t("Student")),1),e("th",null,o(s.$t("Education_Year_Name")),1),e("th",null,o(s.$t("Semester_Name")),1),e("th",null,o(s.$t("Subjects")),1),e("th",null,o(s.$t("Total_Acload")),1),e("th",null,o(s.$t("Score")),1),e("th",null,o(s.$t("gradeSome")),1),e("th",null,o(s.$t("Enable")),1)])]),e("tbody",null,[(c(!0),u(Z,null,q(a.data,(t,E)=>(c(),u("tr",{class:"table-row-note-view",key:t.id},[e("td",null,o((a.current_page-1)*a.per_page+E+1),1),e("td",null,o(t==null?void 0:t.student),1),e("td",null,o(t==null?void 0:t.academic_year),1),e("td",null,o(t==null?void 0:t.semester)+"-"+o(s.$t("semester_number")),1),e("td",null,o(t==null?void 0:t.subject),1),e("td",null,o(t==null?void 0:t.load),1),e("td",null,o(t==null?void 0:t.ball),1),e("td",null,o(t==null?void 0:t.grade),1),e("td",null,[e("div",Pa,[e("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:t==null?void 0:t.status,disabled:p.value,onChange:za=>B(t==null?void 0:t.id)},null,40,Ya)])])]))),128))])]),a.last_page>1?(c(),S(L,H({key:0,class:"mt-2"},{...a},{"current-page":a.current_page,"onUpdate:currentPage":l[5]||(l[5]=t=>a.current_page=t)}),null,16,["current-page"])):O("",!0)])):(c(),u("div",Ga,[e("h5",La,o(s.$t("No_data")),1),e("p",Ua,o(s.$t("No_information_found")),1)]))])]),a.data.length?(c(),u("span",Ea,o(a.current_page)+"-"+o((a==null?void 0:a.data.length)+a.per_page*(a.current_page-1))+"/ "+o(s.$t("Total_Point"))+": "+o(a.total),1)):O("",!0)])])])}}});export{Qa as default};
