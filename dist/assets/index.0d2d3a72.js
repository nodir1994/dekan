import{_ as I}from"./Pagination.f4a9fc5d.js";import{_ as z}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{d as A,h as D,c as R,a as q,bO as M,B as N,Z as B,bq as Z,y as x,w as h,i as y,b6 as H,o as _,e as p,f as a,t as o,j as i,k as u,z as O,bs as J,g as v,s as F,l as $,F as K,r as Q,aR as V}from"./index.3390162f.js";import{R as W,v as X}from"./index.30e99442.js";import{l as Y,e as aa,b as sa}from"./id.5a6e5f30.js";import{g as ta}from"./graph.0eb60427.js";import{h as ea}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const oa={pagetitle:"`Shaxsiy grafik`",class:"diploma-list"},la={class:"card panel-header-bg"},ia={class:"card-body"},da={class:"panel-header"},na={class:"card-title"},ua={class:"panel-toggles"},ca={class:"filterBlock"},_a={class:"btns c-save py-1.5 px-4 me-3",type:"submit"},ra=a("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),pa={class:"btns c-filter py-1.5 px-4"},ma=a("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ha={class:"collapse__block"},fa={class:"row"},ya={class:"my-2 col-xl-4 form--item"},va={for:"yu"},ba={class:"my-2 col-xl-4 form--item"},ga={for:"yu"},wa={class:"my-2 col-xl-4 form--item"},Oa={for:"yu"},$a={class:"my-2 col-xl-4 form--item"},ka={class:"my-2 col-xl-4 form--item"},Ca={for:"yu"},Pa={class:"my-2 col-xl-4 form--item"},La={for:"yu"},Na={class:"row table-division"},Ba={class:"col-xl-12"},Fa={class:"card"},Ta={class:"card-body"},Ga={key:1,class:"table-responsive"},Ua={class:"content-table"},Sa={class:"table-row-all-graph"},ja=a("th",null,"#",-1),Ea={class:"action__td"},Ia=a("i",{class:"mdi mdi-eye"},null,-1),za={key:2},Aa={class:"text-center"},Da={class:"text-center"},Ra={key:0,class:"element-count mb-2"},ss=A({__name:"index",async setup(qa){let k,C;const b=D(),T=R(()=>{var t,l;return(l=(t=b==null?void 0:b.user)==null?void 0:t.faculty)==null?void 0:l.name}),{t:f}=q();M();const g=N(!1),s=B({search:"",edu_plan_id:null,edu_type_id:null,academic_group_id:null,specialty_id:null,edu_form_id:null,data:[],links:[],current_page:1,per_page:ea.pagePer}),d=B({eduTypeOptions:null,eduFormOptions:null,eduPlanOptions:null,specialListOptions:null,academicGroupOptions:null}),w=N(!0);[k,C]=Z(()=>r()),await k,C(),x(async()=>{d.eduTypeOptions=await W().then(t=>t.result),d.eduFormOptions=await X().then(t=>t.result)}),h(()=>s.specialty_id,async()=>{await r()}),h(()=>s.edu_type_id,async t=>{d.specialListOptions=null,s.specialty_id=null,await r(),t&&(d.specialListOptions=await Y(t).then(l=>l.result.data.map(n=>({id:n.id,name:n.name+`-(${n.code})`}))))}),h(()=>s.edu_form_id,async t=>{s.edu_plan_id=null,d.eduPlanOptions=null,t&&(d.eduPlanOptions=await aa(t).then(l=>l.result.data)),await r()}),h(()=>s.edu_plan_id,async t=>{var l;if(s.academic_group_id=null,d.academicGroupOptions=null,await r(),t){let n=await sa(t);d.academicGroupOptions=(l=n==null?void 0:n.result)==null?void 0:l.data.map(c=>({id:c.id,name:c.name}))}}),h(()=>s.academic_group_id,async()=>{await r()}),h(()=>s.current_page,async t=>{Number(t)&&(s.page=Number(t),await r())});async function r(){let t={};s.edu_type_id&&(t.edu_type_id=s.edu_type_id),s.specialty_id&&(t.specialty_id=s.specialty_id),s.edu_form_id&&(t.edu_form_id=s.edu_form_id),s.edu_plan_id&&(t.edu_plan_id=s.edu_plan_id),s.academic_group_id&&(t.academic_group_id=s.academic_group_id),g.value=!0;try{if(w.value){w.value=!1;const l=await ta(t);Object.assign(s,l.result),setTimeout(()=>{w.value=!0},100)}}catch(l){console.log(l)}finally{g.value=!1}}return(t,l)=>{const n=y("router-link"),c=y("a-select"),m=y("a-space"),G=y("b-card"),U=y("b-collapse"),S=z,j=I,E=H("b-toggle");return _(),p("div",oa,[a("div",la,[a("div",ia,[a("div",da,[a("h5",na,o(t.$t("Performance_Ptt")),1),a("div",ua,[a("div",ca,[i(n,{to:"/performance/graphic/create"},{default:u(()=>[a("button",_a,[ra,O(o(t.$t("add")),1)])]),_:1}),J((_(),p("button",pa,[ma,O(o(t.$t("Filter")),1)])),[[E,void 0,void 0,{"collapse-3":!0}]])])])])])]),a("div",ha,[i(U,{visible:"",id:"collapse-3"},{default:u(()=>[i(G,null,{default:u(()=>[a("div",fa,[a("div",ya,[i(m,null,{default:u(()=>[i(c,{class:"form--item",value:T.value,disabled:""},null,8,["value"])]),_:1}),a("label",va,o(t.$t("Choose_faculty")),1)]),a("div",ba,[i(m,null,{default:u(()=>[i(c,{"allow-clear":"",value:s.edu_type_id,"onUpdate:value":l[0]||(l[0]=e=>s.edu_type_id=e),"field-names":{value:"id",label:"name"},options:d.eduTypeOptions,placeholder:v(f)("Choose")},null,8,["value","options","placeholder"])]),_:1}),a("label",ga,o(t.$t("Choose_Education_Type")),1)]),a("div",wa,[i(m,null,{default:u(()=>[i(c,{class:"form--item","field-names":{value:"id",label:"name"},disabled:!s.edu_type_id,value:s.specialty_id,"onUpdate:value":l[1]||(l[1]=e=>s.specialty_id=e),options:d.specialListOptions,placeholder:v(f)("Choose"),"allow-clear":""},null,8,["disabled","value","options","placeholder"])]),_:1}),a("label",Oa,o(t.$t("select__specialty")),1)]),a("div",$a,[i(m,null,{default:u(()=>[i(c,{"allow-clear":"",value:s.edu_form_id,"onUpdate:value":l[2]||(l[2]=e=>s.edu_form_id=e),"field-names":{value:"id",label:"name"},options:d.eduFormOptions,placeholder:v(f)("Choose")},null,8,["value","options","placeholder"])]),_:1}),a("label",null,o(t.$t("Choose_Education_Form")),1)]),a("div",ka,[i(m,null,{default:u(()=>[i(c,{"allow-clear":"",value:s.edu_plan_id,"onUpdate:value":l[3]||(l[3]=e=>s.edu_plan_id=e),"field-names":{value:"id",label:"name"},disabled:!s.edu_form_id,options:d.eduPlanOptions,placeholder:v(f)("Choose")},null,8,["value","disabled","options","placeholder"])]),_:1}),a("label",Ca,o(t.$t("Choose_Curriculum")),1)]),a("div",Pa,[i(m,null,{default:u(()=>[i(c,{"allow-clear":"",value:s.academic_group_id,"onUpdate:value":l[4]||(l[4]=e=>s.academic_group_id=e),disabled:!s.edu_plan_id,"field-names":{value:"id",label:"name"},options:d.academicGroupOptions,placeholder:v(f)("Choose")},null,8,["value","disabled","options","placeholder"])]),_:1}),a("label",La,o(t.$t("Choose_Group")),1)])])]),_:1})]),_:1})]),a("div",Na,[a("div",Ba,[a("div",Fa,[a("div",Ta,[g.value?(_(),F(S,{key:0})):$("",!0),s.data.length?(_(),p("div",Ga,[a("table",Ua,[a("thead",null,[a("tr",Sa,[ja,a("th",null,o(t.$t("Student")),1),a("th",null,o(t.$t("Education_Type")),1),a("th",null,o(t.$t("by_Specialty")),1),a("th",null,o(t.$t("Group")),1),a("th",null,o(t.$t("Ptt_Number")),1),a("th",null,o(t.$t("Subjects")),1),a("th",null,o(t.$t("action")),1)])]),a("tbody",null,[(_(!0),p(K,null,Q(s.data,(e,P)=>{var L;return _(),p("tr",{class:"table-row-all-graph",key:P},[a("td",null,o((s.current_page-1)*s.per_page+P+1),1),a("td",null,o(e==null?void 0:e.student),1),a("td",null,o(e==null?void 0:e.edu_type),1),a("td",null,o((L=e==null?void 0:e.specialty)==null?void 0:L.name),1),a("td",null,o(e==null?void 0:e.academic_group),1),a("td",null,o(e==null?void 0:e.number),1),a("td",null,o(e==null?void 0:e.subjects_count)+"/ "+o(e==null?void 0:e.debt_subjects),1),a("td",null,[a("div",Ea,[i(n,{class:"btns c-save py-1 px-2 me-2",to:"/performance/graphic/"+(e==null?void 0:e.id)},{default:u(()=>[Ia,O(" "+o(t.$t("Preview")),1)]),_:2},1032,["to"])])])])}),128))])]),s.last_page>1?(_(),F(j,V({key:0,class:"mt-2"},{...s},{"current-page":s.current_page,"onUpdate:currentPage":l[5]||(l[5]=e=>s.current_page=e)}),null,16,["current-page"])):$("",!0)])):(_(),p("div",za,[a("h5",Aa,o(t.$t("No_data")),1),a("p",Da,o(t.$t("No_information_found")),1)]))])])])]),s.data.length?(_(),p("span",Ra,o(s.current_page)+"-"+o((s==null?void 0:s.data.length)+s.per_page*(s.current_page-1))+"/ "+o(t.$t("Total_Point"))+": "+o(s.total),1)):$("",!0)])}}});export{ss as default};
