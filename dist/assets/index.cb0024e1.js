import{_ as W}from"./Pagination.f4a9fc5d.js";import{_ as I}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{S as D}from"./sweetalert2.all.fdef424e.js";import{d as Y,h as q,c as Z,a as H,bO as J,B as N,Z as S,bq as T,w,i as y,b6 as K,o as d,e as m,f as e,t as a,j as n,k as u,z as G,bs as M,g as C,s as V,l as B,F as Q,r as X,aR as ee}from"./index.3390162f.js";import{e as te}from"./index.30e99442.js";import{l as se,g as ae}from"./id.5a6e5f30.js";import{d as oe,a as le,b as ie}from"./bmi.921ed74e.js";import{h as g}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./moment.2cad4b18.js";const ne={pagetitle:"`{{$t('archive_Graduate_Work')}}`",class:"graduateWorkPage"},ce={class:"card panel-header-bg"},de={class:"card-body"},re={class:"panel-header"},_e={class:"card-title"},ue={class:"panel-toggles"},pe=e("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),me={class:"filterBlock"},he={class:"btns c-filter py-1.5 px-4"},fe=e("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ye={class:"collapse__block"},ge={class:"row"},ve={class:"my-2 col-xl-4 form--item"},be={for:"yu"},we={class:"my-2 col-xl-2 form--item"},ke={for:"yu"},$e={class:"my-2 col-xl-4 form--item"},Ce={for:"yu"},Be={class:"my-2 col-xl-2 form--item"},Oe={for:"yu"},Ne={class:"row table-division"},Se={class:"col-xl-12"},Te={class:"card"},Ge={class:"card-body"},Ve={key:1,class:"table-responsive"},xe={class:"content-table"},Ee={class:"table-row"},Le=e("th",null,"#",-1),Pe={class:"gridjs-td"},je={class:"list-inline mb-0"},ze={class:"list-inline-item"},Ae={class:"edit__project"},Re=e("i",{class:"mdi mdi-pencil font-size-18 text-primary"},null,-1),Ue={class:"list-inline-item"},Fe={class:"delete__project"},We=["onClick"],Ie=e("i",{class:"mdi mdi-delete font-size-18"},null,-1),De=[Ie],Ye={class:"form-check form-switch my-auto"},qe=["checked","disabled","onChange"],Ze={key:2},He={class:"text-center"},Je={class:"text-center"},Ke={key:0,class:"element-count mb-2"},rt=Y({__name:"index",async setup(Me){let h,v;const k=q(),x=Z(()=>{var s,o;return(o=(s=k==null?void 0:k.user)==null?void 0:s.faculty)==null?void 0:o.name}),{t:c}=H(),O=J(),f=N(!1),$=N(!0),t=S({current_page:1,data:[],links:[],page:1,per_page:g.pagePer,edu_type_id:null,specialty_id:null,academic_group_id:null}),r=S({eduTypeOptions:null,specialOptions:null,academicGroupOptions:null});r.eduTypeOptions=([h,v]=T(()=>te().then(s=>s.result)),h=await h,v(),h),w(()=>t.edu_type_id,async(s,o)=>{t.specialty_id=null,t.academic_group_id=null,r.specialOptions=null,await p(),t.edu_type_id&&(r.specialOptions=await se(t.edu_type_id).then(i=>i.result.data.map(_=>({id:_.id,name:_.name+`-(${_.code})`}))))}),w(()=>t.specialty_id,async(s,o)=>{t.academic_group_id=null,r.academicGroupOptions=null,await p(),t.specialty_id&&(r.academicGroupOptions=await ae(t.specialty_id).then(i=>i.result.data))}),w(()=>t.academic_group_id,async(s,o)=>{await p()}),w(()=>t.current_page,async s=>{Number(s)&&(t.page=Number(s),await p(s))}),[h,v]=T(()=>p()),await h,v();async function p(s){f.value=!0;let o={page:s||1};t.edu_type_id&&(o.edu_type_id=t.edu_type_id),t.per_page&&(o.per_page=t.per_page),t.specialty_id&&(o.specialty_id=t.specialty_id),t.academic_group_id&&(o.academic_group_id=t.academic_group_id);try{if($.value){$.value=!1;const i=await oe(o);Object.assign(t,i.result),setTimeout(()=>{$.value=!0},g.loaderRefresh)}}catch(i){console.log(i)}finally{f.value=!1}}async function E(s,o){try{f.value=!0,await le(s,o),await p(),O.success(c("Data_stored_successfully"))}catch{O.error(c("Dashboard_Error"))}finally{f.value=!1}}async function L(s){const o=D.mixin({customClass:{confirmButton:"btn btn-danger me-2",cancelButton:"btn btn-success"},buttonsStyling:!1});try{(await o.fire({title:c("Delete_message.Are_you_sure"),text:c("Delete_message.Action_irreversible"),icon:"warning",confirmButtonText:c("Delete_message.Yes_Delete"),cancelButtonText:c("Delete_message.Yo_Cancel"),showCancelButton:!0})).isConfirmed&&(await ie(s),await p(),await o.fire(c("Delete_message.Removed"),c("Delete_message.Record_deleted_successfull"),"success"))}catch(i){await o.fire(c("Something_went_wrong"),i.message,"error")}}return(s,o)=>{const i=y("router-link"),_=y("a-select"),b=y("a-space"),P=y("b-card"),j=y("b-collapse"),z=I,A=W,R=K("b-toggle");return d(),m("div",ne,[e("div",ce,[e("div",de,[e("div",re,[e("h5",_e,a(s.$t("archive_Graduate_Work")),1),e("div",ue,[n(i,{to:"/archive/graduate-work/create",class:"btns c-save py-1.5 px-4 me-3"},{default:u(()=>[pe,G(a(s.$t("Create")),1)]),_:1}),e("div",me,[M((d(),m("button",he,[fe,G(a(s.$t("Filter")),1)])),[[R,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",ye,[n(j,{visible:"",id:"collapse-3"},{default:u(()=>[n(P,null,{default:u(()=>[e("div",ge,[e("div",ve,[n(b,null,{default:u(()=>[n(_,{class:"form--item",value:x.value,disabled:""},null,8,["value"])]),_:1}),e("label",be,a(s.$t("Choose_faculty")),1)]),e("div",we,[n(b,null,{default:u(()=>[n(_,{"filter-option":C(g).filterOptionByName,value:t.edu_type_id,"onUpdate:value":o[0]||(o[0]=l=>t.edu_type_id=l),options:r.eduTypeOptions,"field-names":{value:"id",label:"name"},"allow-clear":"","show-search":""},null,8,["filter-option","value","options"])]),_:1}),e("label",ke,a(s.$t("Choose_Education_Type")),1)]),e("div",$e,[n(b,null,{default:u(()=>[n(_,{"filter-option":C(g).filterOptionByName,class:"form--item",value:t.specialty_id,"onUpdate:value":o[1]||(o[1]=l=>t.specialty_id=l),options:r.specialOptions,disabled:!t.edu_type_id,"field-names":{value:"id",label:"name"},"show-search":"","allow-clear":""},null,8,["filter-option","value","options","disabled"])]),_:1}),e("label",Ce,a(s.$t("select__specialty")),1)]),e("div",Be,[n(b,null,{default:u(()=>[n(_,{"filter-option":C(g).filterOptionByName,value:t.academic_group_id,"onUpdate:value":o[2]||(o[2]=l=>t.academic_group_id=l),"field-names":{value:"id",label:"name"},disabled:!t.specialty_id,options:r.academicGroupOptions,"allow-clear":"","show-search":""},null,8,["filter-option","value","disabled","options"])]),_:1}),e("label",Oe,a(s.$t("Choose_Group")),1)])])]),_:1})]),_:1})]),e("div",Ne,[e("div",Se,[e("div",Te,[e("div",Ge,[f.value?(d(),V(z,{key:0})):B("",!0),t.data.length?(d(),m("div",Ve,[e("table",xe,[e("thead",null,[e("tr",Ee,[Le,e("th",null,a(s.$t("Student")),1),e("th",null,a(s.$t("Education_Type")),1),e("th",null,a(s.$t("by_Specialty")),1),e("th",null,a(s.$t("Group")),1),e("th",null,a(s.$t("Graduate_work_name")),1),e("th",null,a(s.$t("Supervisor_Name")),1),e("th",null,a(s.$t("Actions")),1),e("th",null,a(s.$t("Enable")),1)])]),e("tbody",null,[(d(!0),m(Q,null,X(t==null?void 0:t.data,(l,U)=>(d(),m("tr",{class:"table-row",key:l.id},[e("td",null,a((t.current_page-1)*t.per_page+U+1),1),e("td",null,a(l==null?void 0:l.student),1),e("td",null,a(l.edu_type),1),e("td",null,a(l.specialty),1),e("td",null,a(l.academic_group),1),e("td",null,a(l.theme),1),e("td",null,a(l.advisor_name),1),e("td",Pe,[e("ul",je,[e("li",ze,[e("div",Ae,[n(i,{to:`/archive/graduate-work/edit/${l.id}`},{default:u(()=>[Re]),_:2},1032,["to"])])]),e("li",Ue,[e("div",Fe,[e("a",{class:"text-danger",type:"danger",onClick:F=>L(l.id)},De,8,We)])])])]),e("td",null,[e("div",Ye,[e("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:l.status,disabled:f.value,onChange:F=>E(l.id,!l.status)},null,40,qe)])])]))),128))])]),t.last_page>1?(d(),V(A,ee({key:0,class:"mt-2"},{...t},{"current-page":t.current_page,"onUpdate:currentPage":o[3]||(o[3]=l=>t.current_page=l)}),null,16,["current-page"])):B("",!0)])):(d(),m("div",Ze,[e("h5",He,a(s.$t("No_data")),1),e("p",Je,a(s.$t("No_information_found")),1)]))])]),t!=null&&t.total?(d(),m("span",Ke,a(t==null?void 0:t.current_page)+"-"+a((t==null?void 0:t.data.length)+t.per_page*((t==null?void 0:t.current_page)-1))+"/ "+a(s.$t("Total_Point"))+": "+a(t==null?void 0:t.total),1)):B("",!0)])])])}}});export{rt as default};
