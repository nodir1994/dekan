import{bR as z,d as O,a as Z,B as n,Z as f,y as I,i as y,b6 as q,o as _,e as h,f as t,t as e,bs as G,z as U,j as u,k as p,v as H,g as m,s as J,l as K,F as Q,r as W}from"./index.3390162f.js";import{a as X,V as tt,e as et,b as st,Z as at}from"./index.30e99442.js";import{_ as ot}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{_ as lt}from"./NoData.ac42776e.js";import"./vue.runtime.esm-bundler.84001772.js";/* empty css                                                               */import"./_plugin-vue_export-helper.cdc0426e.js";const it=z();async function nt(w){try{const{data:r}=await it({url:"/api/statistic/appropriation",params:w});return r}catch(r){throw r}}const dt={pagetitle:"`O'zlashtirish statistikasi`",class:"teacherRatingPage"},ut={class:"card panel-header-bg"},ct={class:"card-body"},rt={class:"panel-header"},_t={class:"card-title"},pt={class:"panel-toggles"},ht={class:"filterBlock"},mt={class:"btns c-filter py-1.5 px-4"},vt=t("i",{class:"mdi mdi-filter me-2"},null,-1),yt={class:"collapse__block"},bt={class:"row"},ft={class:"my-2 col-md-4"},wt=["disabled"],gt=t("i",{class:"mdi mdi-eye me-2"},null,-1),Lt={class:"card"},$t={class:"card-body"},Tt={key:1,class:"table-responsive table-statistical"},kt={class:"table-header"},Ct=t("th",{rowspan:"3",style:{"min-width":"70px"}},"\u2116",-1),Ft={rowspan:"3",style:{"min-width":"300px"}},Yt={rowspan:"3",style:{"min-width":"70px"}},Nt={colspan:"8"},Pt=t("tr",null,[t("th",{colspan:"2"},"5"),t("th",{colspan:"2"},"4"),t("th",{colspan:"2"},"3"),t("th",{colspan:"2"},"2")],-1),St={style:{"min-width":"60px"}},Bt={style:{"min-width":"60px"}},Et={style:{"min-width":"60px"}},Rt={style:{"min-width":"60px"}},Vt={style:{"min-width":"60px"}},Ut={style:{"min-width":"60px"}},Dt={style:{"min-width":"60px"}},At={style:{"min-width":"60px"}},Mt={style:{"text-align":"start"}},jt=t("th",null,null,-1),xt={style:{"text-align":"start"}},zt={key:2,class:"table-responsive table-statistical"},Qt=O({__name:"index",setup(w){const{t:r}=Z(),b=n(!1),g=n(),L=n(),$=n(),T=n(),k=n(),C=n(),F=n(),Y=n(),N=n(),P=n(),S=n(),B=n(),E=n(),R=n(),c=f({result:[]}),d=f({optionacademicYeList:null,optionsemesterTypeList:null,optioncourseList:null,optioneducationList:null,optioneduFormList:null}),l=f({academic_year_id:null,semester_type:null,course:null,edu_type_id:null,edu_form_id:null});I(async()=>{d.optionacademicYeList=await X().then(o=>{var a;return(a=o.result)==null?void 0:a.data}),d.optionsemesterTypeList=await tt().then(o=>o.result),d.optioneducationList=await et().then(o=>o.result),d.optioneduFormList=await st().then(o=>o.result),d.optioncourseList=await at().then(o=>o.result),R.value=d.optioncourseList.map(o=>({id:o.id,name:o.name+"-"+r("by_Level")}))});async function D(){await A()}async function A(){b.value=!0;const o=await nt(l);Object.assign(c,o),P.value=d.optionacademicYeList.find(a=>a.id==l.academic_year_id).name,S.value=d.optionsemesterTypeList.find(a=>a.code==l.semester_type).name,B.value=d.optioncourseList.find(a=>a.id==l.course).name,E.value=d.optioneducationList.find(a=>a.id==l.edu_type_id).name,g.value=c.result.reduce((a,i)=>a+i.student_count,0),L.value=c.result.reduce((a,i)=>a+i.count_rating_5,0),$.value=c.result.reduce((a,i)=>a+i.percent_5,0),T.value=c.result.reduce((a,i)=>a+i.count_rating_4,0),k.value=c.result.reduce((a,i)=>a+i.percent_4,0),C.value=c.result.reduce((a,i)=>a+i.count_rating_3,0),F.value=c.result.reduce((a,i)=>a+i.percent_3,0),Y.value=c.result.reduce((a,i)=>a+i.count_rating_2,0),N.value=c.result.reduce((a,i)=>a+i.percent_2,0),b.value=!1}return(o,a)=>{const i=y("a-select"),v=y("a-form-item"),M=y("b-card"),j=y("b-collapse"),x=q("b-toggle");return _(),h("div",dt,[t("div",ut,[t("div",ct,[t("div",rt,[t("h5",_t,e(o.$t("Appropriation_statistics")),1),t("div",pt,[t("div",ht,[G((_(),h("button",mt,[vt,U(e(o.$t("Filtr")),1)])),[[x,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",yt,[u(j,{visible:"",id:"collapse-3"},{default:p(()=>[u(M,null,{default:p(()=>[t("div",bt,[t("form",{class:"row",onSubmit:H(D,["prevent"])},[u(v,{class:"my-2 col-md-4",name:"educationYear"},{default:p(()=>[u(i,{placeholder:m(r)("Choose_Education_Year"),value:l.academic_year_id,"onUpdate:value":a[0]||(a[0]=s=>l.academic_year_id=s),options:d.optionacademicYeList,"field-names":{value:"id",label:"name"},"allow-clear":""},null,8,["placeholder","value","options"])]),_:1}),u(v,{class:"my-2 col-md-4",name:"semeterType"},{default:p(()=>[u(i,{placeholder:m(r)("Choose_Semestr_Type"),value:l.semester_type,"onUpdate:value":a[1]||(a[1]=s=>l.semester_type=s),options:d.optionsemesterTypeList,disabled:!l.academic_year_id,"field-names":{value:"code",label:"name"},"allow-clear":""},null,8,["placeholder","value","options","disabled"])]),_:1}),u(v,{class:"my-2 col-md-4",name:"lavel"},{default:p(()=>[u(i,{placeholder:m(r)("Select_the_course"),value:l.course,"onUpdate:value":a[2]||(a[2]=s=>l.course=s),options:R.value,disabled:!l.semester_type,"field-names":{value:"id",label:"name"},"allow-clear":""},null,8,["placeholder","value","options","disabled"])]),_:1}),u(v,{class:"my-2 col-md-4",name:"educationType"},{default:p(()=>[u(i,{placeholder:m(r)("Choose_Education_Type"),value:l.edu_type_id,"onUpdate:value":a[3]||(a[3]=s=>l.edu_type_id=s),disabled:!l.course,options:d.optioneducationList,"field-names":{value:"id",label:"name"},"allow-clear":""},null,8,["placeholder","value","disabled","options"])]),_:1}),u(v,{class:"my-2 col-md-4",name:"educationForm"},{default:p(()=>[u(i,{placeholder:m(r)("Choose_Education_Form"),value:l.edu_form_id,"onUpdate:value":a[4]||(a[4]=s=>l.edu_form_id=s),disabled:!l.edu_type_id,options:d.optioneduFormList,"field-names":{value:"id",label:"name"},"allow-clear":""},null,8,["placeholder","value","disabled","options"])]),_:1}),t("div",ft,[t("button",{disabled:!l.edu_form_id||!l.edu_type_id||!l.semester_type||!l.academic_year_id,class:"btn-search c-save",type:"submit"},[gt,U(e(o.$t("View_Academic_Sheet")),1)],8,wt)])],32)])]),_:1})]),_:1})]),t("div",Lt,[t("div",$t,[b.value?(_(),J(ot,{key:0})):K("",!0),c.result.length>0?(_(),h("div",Tt,[t("div",kt,[t("table",null,[t("tr",null,[t("td",null,[t("span",null,e(o.$t("Curriculum_Education_Year"))+":",1),t("b",null,e(P.value),1)]),t("td",null,[t("span",null,e(o.$t("Semestr_Type"))+":",1),t("b",null,e(S.value),1)])]),t("tr",null,[t("td",null,[t("span",null,e(o.$t("by_Level"))+":",1),t("b",null,e(B.value),1)]),t("td",null,[t("span",null,e(m(r)("Education_Type"))+":",1),t("b",null,e(E.value),1)])])])]),t("table",null,[t("thead",null,[t("tr",null,[Ct,t("th",Ft,e(o.$t("Faculty")),1),t("th",Yt,e(o.$t("all_Student")),1),t("th",Nt,e(o.$t("Mastery_indicator")),1)]),Pt,t("tr",null,[t("th",St,e(o.$t("Number")),1),t("th",Bt,e(o.$t("Percent")),1),t("th",Et,e(o.$t("Number")),1),t("th",Rt,e(o.$t("Percent")),1),t("th",Vt,e(o.$t("Number")),1),t("th",Ut,e(o.$t("Percent")),1),t("th",Dt,e(o.$t("Number")),1),t("th",At,e(o.$t("Percent")),1)])]),t("tbody",null,[(_(!0),h(Q,null,W(c.result,(s,V)=>(_(),h("tr",{key:V},[t("td",null,e(V+1),1),t("td",Mt,e(s==null?void 0:s.faculty),1),t("td",null,e(s==null?void 0:s.student_count),1),t("td",null,e(s==null?void 0:s.count_rating_5),1),t("td",null,e(s==null?void 0:s.percent_5),1),t("td",null,e(s==null?void 0:s.count_rating_4),1),t("td",null,e(s==null?void 0:s.percent_4),1),t("td",null,e(s==null?void 0:s.count_rating_3),1),t("td",null,e(s==null?void 0:s.percent_3),1),t("td",null,e(s==null?void 0:s.count_rating_2),1),t("td",null,e(s==null?void 0:s.percent_2),1)]))),128)),t("tr",null,[jt,t("th",xt,e(o.$t("Total_Point")),1),t("th",null,e(g.value),1),t("th",null,e(L.value),1),t("th",null,e($.value)+" %",1),t("th",null,e(T.value),1),t("th",null,e(k.value)+" %",1),t("th",null,e(C.value),1),t("th",null,e(F.value)+" %",1),t("th",null,e(Y.value),1),t("th",null,e(N.value)+" %",1)])])])])):(_(),h("div",zt,[u(lt)]))])])])}}});export{Qt as default};
