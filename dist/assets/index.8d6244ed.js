import{_ as J}from"./Pagination.f4a9fc5d.js";import{d as K,bO as Q,u as X,a as tt,B as P,bq as F,h as st,c as et,Z as L,w as k,i as f,b6 as at,o as d,e as m,f as t,t as a,j as c,k as u,z as n,bs as ot,v as it,g as Y,F as ct,r as nt,s as lt,aR as rt,l as $}from"./index.3390162f.js";import{S as dt}from"./sweetalert2.all.fdef424e.js";import{p as ut,a as _t,d as mt}from"./plan.0a3ba948.js";import{a as pt}from"./index.30e99442.js";import{h as ht}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./moment.2cad4b18.js";const ft={pagetitle:"`O'quv reja`",class:"curriculum-page"},yt={class:"card panel-header-bg"},bt={class:"card-body"},gt={class:"panel-header"},vt={class:"card-title"},wt={class:"panel-toggles"},kt={class:"btns c-save py-1.5 px-4 me-3",type:"button"},$t=t("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),Ct={class:"filterBlock"},St={class:"btns c-filter py-1.5 px-4"},Bt=t("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),Nt={class:"collapse__block"},Dt={class:"my-2 col-md-3 form--item"},jt={for:"yu"},Vt={class:"my-2 col-md-3 form--item"},zt={for:"yu"},At={class:"my-2 col-xl-4 form--item"},Pt={for:"yu"},Ft={class:"my-2 col-xl-2"},Lt={class:"btn-search search-color",type:"submit"},Yt=t("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),xt={class:"card"},Et={class:"card-body"},Ot={key:0,class:"table-responsive"},Tt={class:"content-table"},Ut={class:"table-row w-100 d-grid"},Rt=t("br",null,null,-1),qt=t("br",null,null,-1),It={class:"btns1 actions-c p-1 me-2",type:"submit"},Wt=t("i",{class:"mdi mdi-calendar-month-outline me-1"},null,-1),Mt=t("i",{class:"mdi mdi-timer-sand-full me-1"},null,-1),Zt=t("i",{class:"mdi mdi-book me-1"},null,-1),Gt={class:"gridjs-td justify-content-center"},Ht={class:"list-inline mb-0"},Jt={class:"list-inline-item"},Kt={class:"edit__project"},Qt=["onClick"],Xt=t("i",{class:"mdi mdi-pencil font-size-18 text-primary"},null,-1),ts=[Xt],ss={class:"list-inline-item"},es={class:"delete__project"},as=["onClick"],os=t("i",{class:"mdi mdi-delete font-size-18"},null,-1),is=[os],cs={class:"form-check form-switch my-auto"},ns=["checked","disabled","onChange"],ls={key:1},rs={class:"text-center"},ds={class:"text-center"},us={key:0,class:"element-count mb-2"},_s={key:0},ks=K({__name:"index",async setup(ms){let h,b;const C=Q(),x=X(),{t:_}=tt(),y=P(!1),E=([h,b]=F(()=>pt().then(s=>s.result)),h=await h,b(),h),g=P(),v=st(),O=et(()=>{var s,o;return(o=(s=v==null?void 0:v.user)==null?void 0:s.faculty)==null?void 0:o.name}),i=L({current_page:1,data:[],links:[]}),l=L({page:1,academic_year_id:null,name:""});[h,b]=F(()=>p()),await h,b();async function T(){g.value=1,await p()}k(()=>l.name,async(s,o)=>{l.name==""&&g.value==1&&(await p(),g.value=0)}),k(()=>l.academic_year_id,async(s,o)=>{await p()}),k(()=>i.current_page,async s=>{Number(s)&&(l.page=Number(s),await p())});async function p(){y.value=!0;const s=await ut(l);Object.assign(i,s.result),y.value=!1}async function U(s){x.push(`/curriculum/curriculum/${s}`)}async function R(s,o){try{y.value=!0,await _t(s),await p(),C.success(`[${o}] - ${_("Status_changed_successfully")}`)}catch(r){C.error(r.message)}finally{y.value=!1}}async function q(s){const o=dt.mixin({customClass:{confirmButton:"btn  btn-danger me-2",cancelButton:"btn btn-success"},buttonsStyling:!1});try{(await o.fire({title:_("Delete_message.Are_you_sure"),text:_("Delete_message.Action_irreversible"),icon:"warning",confirmButtonText:_("Delete_message.Yes_Delete"),cancelButtonText:_("Delete_message.Yo_Cancel"),showCancelButton:!0})).isConfirmed&&(await mt(s),await p(),o.fire(_("Delete_message.Removed"),_("Curriculum_name_deleted_successfully"),"success"))}catch(r){o.fire(_("Dashboard_Error"),r.message,"error")}}return(s,o)=>{const r=f("router-link"),S=f("a-select"),w=f("a-space"),I=f("a-input"),W=f("b-card"),M=f("b-collapse"),Z=J,G=at("b-toggle");return d(),m("div",ft,[t("div",yt,[t("div",bt,[t("div",gt,[t("h5",vt,a(s.$t("Curriculum")),1),t("div",wt,[c(r,{to:"/curriculum/curriculum/create"},{default:u(()=>[t("button",kt,[$t,n(a(s.$t("Create_curriculum")),1)])]),_:1}),t("div",Ct,[ot((d(),m("button",St,[Bt,n(a(s.$t("Filter")),1)])),[[G,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",Nt,[c(M,{visible:"",id:"collapse-3"},{default:u(()=>[c(W,null,{default:u(()=>[t("form",{class:"row",onSubmit:it(T,["prevent"])},[t("div",Dt,[c(w,null,{default:u(()=>[c(S,{class:"form--item",value:O.value,disabled:""},null,8,["value"])]),_:1}),t("label",jt,a(s.$t("Choose_faculty")),1)]),t("div",Vt,[c(w,null,{default:u(()=>[c(S,{"filter-option":Y(ht).filterOptionByName,"show-search":"",value:l.academic_year_id,"onUpdate:value":o[0]||(o[0]=e=>l.academic_year_id=e),options:Y(E).data,"allow-clear":"","field-names":{value:"id",label:"name"}},null,8,["filter-option","value","options"])]),_:1}),t("label",zt,a(s.$t("Choose_Education_Year")),1)]),t("div",At,[c(w,null,{default:u(()=>[c(I,{id:"yu",class:"form-control",value:l.name,"onUpdate:value":o[1]||(o[1]=e=>l.name=e),"allow-clear":""},null,8,["value"])]),_:1}),t("label",Pt,a(s.$t("Search_by_Name")),1)]),t("div",Ft,[t("button",Lt,[Yt,n(a(s.$t("Search")),1)])])],32)]),_:1})]),_:1})]),t("div",xt,[t("div",Et,[i.data.length?(d(),m("div",Ot,[t("table",Tt,[t("thead",null,[t("tr",Ut,[t("th",null,a(s.$t("Name")),1),t("th",null,a(s.$t("Structure_Faculty")),1),t("th",null,a(s.$t("Actions")),1),t("th",null,a(s.$t("Structure_Faculty")),1),t("th",null,a(s.$t("Active")),1)])]),t("tbody",null,[(d(!0),m(ct,null,nt(i.data,(e,H)=>{var B,N,D,j,V,z;return d(),m("tr",{class:"table-row w-100 d-grid",key:H},[t("td",null,[t("span",null,[n(a(e==null?void 0:e.name)+" ",1),Rt,n(" "+a((N=(B=e==null?void 0:e.specialty)==null?void 0:B.gov_specialty)==null?void 0:N.name),1)])]),t("td",null,[n(a((D=e==null?void 0:e.faculty)==null?void 0:D.name)+" ",1),qt,n(" "+a((V=(j=e==null?void 0:e.specialty)==null?void 0:j.edu_type)==null?void 0:V.name)+" / "+a((z=e==null?void 0:e.rating_system)==null?void 0:z.name),1)]),t("td",null,[c(r,{to:`/curriculum/semester?id=${e.id}`},{default:u(()=>[t("button",It,[Wt,n(" "+a(s.$t("Semester_Name")),1)])]),_:2},1032,["to"]),c(r,{to:`/curriculum/curriculum/${e==null?void 0:e.id}/week`,class:"btns1 actions-c p-1 me-2"},{default:u(()=>[Mt,n(" "+a(s.$t("Week")),1)]),_:2},1032,["to"]),c(r,{to:`/curriculum/curriculum/${e==null?void 0:e.id}/subjects`,class:"btns1 actions-c p-1 me-2"},{default:u(()=>[Zt,n(" "+a(s.$t("Subjects")),1)]),_:2},1032,["to"])]),t("td",Gt,[t("ul",Ht,[t("li",Jt,[t("div",Kt,[t("a",{onClick:A=>U(e.id)},ts,8,Qt)])]),t("li",ss,[t("div",es,[t("a",{class:"text-danger",type:"danger",onClick:A=>q(e.id)},is,8,as)])])])]),t("td",null,[t("div",cs,[t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:e.status,disabled:y.value,onChange:A=>R(e.id,e.name)},null,40,ns)])])])}),128))])]),i.last_page>1?(d(),lt(Z,rt({key:0,class:"mt-2"},{...i},{"current-page":i.current_page,"onUpdate:currentPage":o[2]||(o[2]=e=>i.current_page=e)}),null,16,["current-page"])):$("",!0)])):(d(),m("div",ls,[t("h5",rs,a(s.$t("No_data")),1),t("p",ds,a(s.$t("No_information_found")),1)]))])]),i.data.length?(d(),m("span",us,[i.last_page>1?(d(),m("span",_s,a(i.current_page)+"-"+a(i.data.length+i.per_page*(i.current_page-1))+" / ",1)):$("",!0),n(" "+a(s.$t("Total_Point"))+": "+a(i.total),1)])):$("",!0)])}}});export{ks as default};
