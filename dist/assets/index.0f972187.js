import{_ as x}from"./Pagination.f4a9fc5d.js";import{_ as H}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{d as K,a as Q,bO as W,B as F,Z as w,bq as U,y as X,w as b,i as v,b6 as D,o as _,e as u,f as s,bs as aa,z as Y,t as o,j as n,k as r,g as f,s as I,l as $,F as ea,r as sa,aR as ta}from"./index.3390162f.js";import{j as la,a as oa}from"./index.30e99442.js";import{c as ia,b as da,j as T}from"./id.5a6e5f30.js";import{g as na}from"./journal.f4f488ce.js";import{h as A}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const ca={pagetitle:"`Davomat jurnali`",class:"diploma-list"},_a={class:"card panel-header-bg"},ra={class:"card-body"},ua={class:"panel-header"},pa=s("h5",{class:"card-title"},"Davomat jurnali",-1),ma={class:"panel-toggles"},ha={class:"filterBlock"},ba={class:"btns c-filter py-1.5 px-4"},va=s("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ga={class:"collapse__block"},fa={class:"row"},ya={class:"my-2 col-xl-2 form--item"},ja={for:"yu"},wa={class:"my-2 col-xl-3 form--item"},$a={class:"mb-3",name:"nameFaculty"},Oa={class:"my-2 col-xl-2 form--item"},ka={class:"my-2 col-xl-2 form--item"},Ca={for:"yu"},Pa={class:"my-2 col-xl-3 form--item"},Na={for:"yu"},Ba={class:"row table-division"},Sa={class:"col-xl-12"},Ga={class:"card"},La={class:"card-body"},Ea={key:1,class:"table-responsive"},Fa={class:"content-table"},Ua={class:"table-row-diploma-list journal"},Ya=s("th",null,"#",-1),Ia={class:"action__td"},Ta=s("i",{class:"mdi mdi-eye me-1"},null,-1),Aa={key:2},za={class:"text-center"},Ra={class:"text-center"},Va={key:0,class:"element-count mb-2"},se=K({__name:"index",async setup(qa){let p,g;const{t:m}=Q();W();const y=F(!1),a=w({edu_plan_id:null,academic_year:null,academic_year_id:null,semester_id:null,academic_group_id:null,subject_id:null,current_page:1,data:[],per_page:A.pagePer,links:[]}),c=w({eduPlanOptions:null,semesterOptions:null,academicGroupOptions:null,subjectOptions:null}),j=F(!0);a.academic_year=([p,g]=U(()=>oa().then(t=>t.result.data.find(e=>(e==null?void 0:e.is_current)==!0))),p=await p,g(),p),[p,g]=U(()=>h()),await p,g(),X(async()=>{c.eduPlanOptions=await la().then(t=>{var e;return(e=t==null?void 0:t.result)==null?void 0:e.data})}),b(()=>a.edu_plan_id,async()=>{var t;a.semester_id=null,a.academic_group_id=null,c.academicGroupOptions=null,c.semesterOptions=null,await h(),a.edu_plan_id&&(c.semesterOptions=await ia(a.edu_plan_id,(t=a.academic_year)==null?void 0:t.id).then(e=>{var i;return(i=e==null?void 0:e.result)==null?void 0:i.data.map(d=>({id:d.id,name:d.course+"-"+m("course")+" "+d.semester+"-"+m("semester")}))}),c.academicGroupOptions=await da(a.edu_plan_id).then(e=>{var i;return(i=e==null?void 0:e.result)==null?void 0:i.data}))}),b(()=>a.academic_group_id,async()=>{await h(),a.academic_group_id&&a.semester_id&&(c.subjectOptions=await T(a.edu_plan_id,a.semester_id).then(t=>t==null?void 0:t.result.map(e=>{var i,d;return{id:(i=e==null?void 0:e.subject)==null?void 0:i.id,name:(d=e==null?void 0:e.subject)==null?void 0:d.name}})))}),b(()=>a.semester_id,async()=>{await h(),a.academic_group_id&&a.semester_id&&(c.subjectOptions=await T(a.edu_plan_id,a.semester_id).then(t=>t==null?void 0:t.result.map(e=>{var i,d;return{id:(i=e==null?void 0:e.subject)==null?void 0:i.id,name:(d=e==null?void 0:e.subject)==null?void 0:d.name}})))}),b(()=>a.subject_id,async()=>{await h()}),b(()=>a.current_page,async t=>{Number(t)&&(a.page=Number(t),await h(t))});async function h(t){var i;let e=w({page:t||1,per_page:a.per_page});a.page>1&&(e.page=a==null?void 0:a.page),e.academic_year_id=(i=a.academic_year)==null?void 0:i.id,a.semester_id&&(e.semester_id=a.semester_id),a.academic_group_id&&(e.academic_group_id=a.academic_group_id),a.subject_id&&(e.subject_id=a.subject_id),a.edu_plan_id&&(e.edu_plan_id=a.edu_plan_id);try{if(y.value=!0,j.value&&a.academic_year){j.value=!1;const d=await na(e);Object.assign(a,d.result),setTimeout(()=>{j.value=!0},A.loaderRefresh)}}catch(d){console.log(d)}finally{y.value=!1}}return(t,e)=>{var O;const i=v("a-select"),d=v("a-space"),z=v("b-card"),R=v("b-collapse"),V=H,q=v("router-link"),J=x,M=D("b-toggle");return _(),u("div",ca,[s("div",_a,[s("div",ra,[s("div",ua,[pa,s("div",ma,[s("div",ha,[aa((_(),u("button",ba,[va,Y(o(t.$t("Filter")),1)])),[[M,void 0,void 0,{"collapse-3":!0}]])])])])])]),s("div",ga,[n(R,{visible:"",id:"collapse-3"},{default:r(()=>[n(z,null,{default:r(()=>[s("div",fa,[s("div",ya,[n(d,null,{default:r(()=>{var l;return[n(i,{"allow-clear":"",disabled:"",value:((l=a==null?void 0:a.academic_year)==null?void 0:l.name)||null,placeholder:f(m)("Choose_Education_Year")},null,8,["value","placeholder"])]}),_:1}),s("label",ja,o(t.$t("Choose_Education_Year")),1)]),s("div",wa,[s("div",$a,[n(d,null,{default:r(()=>[n(i,{"allow-clear":"",value:a.edu_plan_id,"onUpdate:value":e[0]||(e[0]=l=>a.edu_plan_id=l),"field-names":{value:"id",label:"name"},options:c.eduPlanOptions,placeholder:t.$t("Please_select_curriculum")},null,8,["value","options","placeholder"])]),_:1}),s("label",null,o(t.$t("Please_select_curriculum")),1)])]),s("div",Oa,[n(d,null,{default:r(()=>[n(i,{"allow-clear":"",value:a.semester_id,"onUpdate:value":e[1]||(e[1]=l=>a.semester_id=l),"field-names":{value:"id",label:"name"},options:c.semesterOptions,disabled:!a.edu_plan_id,placeholder:f(m)("Choose_Semester")},null,8,["value","options","disabled","placeholder"])]),_:1}),s("label",null,o(t.$t("Choose_Semester")),1)]),s("div",ka,[n(d,null,{default:r(()=>[n(i,{"allow-clear":"",value:a.academic_group_id,"onUpdate:value":e[2]||(e[2]=l=>a.academic_group_id=l),disabled:!a.edu_plan_id,"field-names":{value:"id",label:"name"},options:c.academicGroupOptions,placeholder:f(m)("Choose_Group")},null,8,["value","disabled","options","placeholder"])]),_:1}),s("label",Ca,o(t.$t("Choose_Group")),1)]),s("div",Pa,[n(d,null,{default:r(()=>[n(i,{"allow-clear":"",value:a.subject_id,"onUpdate:value":e[3]||(e[3]=l=>a.subject_id=l),"field-names":{value:"id",label:"name"},disabled:!a.edu_plan_id||!a.semester_id,options:c.subjectOptions,placeholder:f(m)("Choose_Subject")},null,8,["value","disabled","options","placeholder"])]),_:1}),s("label",Na,o(t.$t("Choose_Subject")),1)])])]),_:1})]),_:1})]),s("div",Ba,[s("div",Sa,[s("div",Ga,[s("div",La,[y.value?(_(),I(V,{key:0})):$("",!0),(O=a==null?void 0:a.data)!=null&&O.length?(_(),u("div",Ea,[s("table",Fa,[s("thead",null,[s("tr",Ua,[Ya,s("th",null,o(t.$t("Group_Name")),1),s("th",null,o(t.$t("Subject")),1),s("th",null,o(t.$t("Training")),1),s("th",null,o(t.$t("Education_Year_Name")),1),s("th",null,o(t.$t("Semester_Name")),1),s("th",null,o(t.$t("action")),1)])]),s("tbody",null,[(_(!0),u(ea,null,sa(a.data,(l,Z)=>{var k,C,P,N,B,S,G,L,E;return _(),u("tr",{class:"table-row-diploma-list journal",key:l.id},[s("td",null,o((a.current_page-1)*a.per_page+Z+1),1),s("td",null,o((k=l==null?void 0:l.academic_group)==null?void 0:k.name),1),s("td",null,o((C=l==null?void 0:l.subject)==null?void 0:C.name),1),s("td",null,o((P=l==null?void 0:l.lesson_activity)==null?void 0:P.name),1),s("td",null,o((N=a.academic_year)==null?void 0:N.name),1),s("td",null,o((B=l==null?void 0:l.semester)==null?void 0:B.semester)+"-"+o(t.$t("semester_number")),1),s("td",null,[s("div",Ia,[n(q,{class:"btns c-save py-1 px-2 me-2",to:`/attendance/journal/id?semester_id=${(S=l==null?void 0:l.semester)==null?void 0:S.id}&academic_group_id=${(G=l==null?void 0:l.academic_group)==null?void 0:G.id}&subject_id=${(L=l==null?void 0:l.subject)==null?void 0:L.id}&lesson_activity_id=${(E=l==null?void 0:l.lesson_activity)==null?void 0:E.id}`},{default:r(()=>[Ta,Y(" "+o(t.$t("Preview")),1)]),_:2},1032,["to"])])])])}),128))])]),a.last_page>1?(_(),I(J,ta({key:0,class:"mt-2"},{...a},{"current-page":a.current_page,"onUpdate:currentPage":e[4]||(e[4]=l=>a.current_page=l)}),null,16,["current-page"])):$("",!0)])):(_(),u("div",Aa,[s("h5",za,o(t.$t("No_data")),1),s("p",Ra,o(t.$t("No_information_found")),1)]))])])])]),a.data.length?(_(),u("span",Va,o(a.current_page)+"-"+o((a==null?void 0:a.data.length)+a.per_page*(a.current_page-1))+"/ "+o(t.$t("Total_Point"))+": "+o(a.total),1)):$("",!0)])}}});export{se as default};
