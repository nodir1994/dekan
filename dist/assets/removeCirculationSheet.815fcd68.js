import{_ as J}from"./Pagination.f4a9fc5d.js";import{_ as K}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{d as Q,Z as w,c as N,a as W,bO as X,B as P,h as x,bq as D,y as ee,w as h,i as v,b6 as te,o as _,e as y,f as t,j as i,k as r,z as c,t as o,bs as C,g as U,s as B,l as k,bH as E,F as se,r as le,aR as oe}from"./index.3390162f.js";import{a as ae,e as ie,b as ne,p as de,c as ce}from"./index.30e99442.js";import{a as ue,s as re}from"./aylanma.9ee81440.js";import"./sweetalert2.all.fdef424e.js";import{e as _e,g as pe}from"./id.5a6e5f30.js";import{h as G}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./moment.2cad4b18.js";const me={class:"removeCirculationSheetPage"},he={class:"card panel-header-bg"},ye={class:"card-body"},fe={class:"panel-header"},ve={class:"card-title"},be={class:"panel-toggles"},ge={class:"filterBlock"},we={class:"btns c-filter py-1.5 px-4 me-3"},ke=t("i",{class:"mdi mdi-filter me-2"},null,-1),Oe={class:"btns black-c py-1.5 px-4",type:"submit"},$e=t("i",{class:"mdi mdi-arrow-left me-2"},null,-1),Ce={class:"collapse__block"},Se={class:"row"},Te={class:"my-2 col-xl-4 form--item"},Fe={for:"yu"},Le={class:"my-2 col-xl-4 form--item"},Ne={for:"yu"},Pe={class:"my-2 col-xl-4 form--item"},Ue={for:"yu"},Be={class:"my-2 col-xl-4 form--item"},Ee={class:"my-2 col-xl-4 form--item"},Ge={for:"yu"},Ye={class:"my-2 col-xl-4 form--item"},Ie={class:"my-2 col-xl-10 form--item"},Ve={for:"yu"},je={class:"my-2 col-xl-2"},Ae=t("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),ze={class:"row table-division"},Me={class:"col-md-12"},Re={class:"card"},qe={class:"card-body"},He={key:1,class:"table-responsive"},Ze={class:"content-table"},Je={class:"table-row-diploma-list"},Ke={class:"form-check"},Qe=t("th",null,"#",-1),We={class:"form-check"},Xe=["value"],xe=t("br",null,null,-1),De=t("br",null,null,-1),et=t("br",null,null,-1),tt={key:2},st={class:"text-center"},lt={class:"text-center"},ot={class:"d-flex mb-4 justify-content-between"},at={key:0,class:"element-count mb-2"},it=["disabled"],nt=t("i",{class:"mdi mdi-plus me-2"},null,-1),wt=Q({__name:"removeCirculationSheet",async setup(dt){let S,T;const f=w([]),F=N({get(){var s,l;return((s=e==null?void 0:e.students)==null?void 0:s.length)===((l=f==null?void 0:f.value)==null?void 0:l.length)},set(s){s?e.students=f.value:e.students=[]}}),{t:g}=W(),L=X(),b=P(!1),O=x(),Y=N(()=>{var s,l;return(l=(s=O==null?void 0:O.user)==null?void 0:s.faculty)==null?void 0:l.name}),e=w({search:"",specialty_id:null,edu_type_id:null,payment_type_id:null,academic_group_id:null,edu_form_id:null,edu_year_id:null,data:[],links:[],students:[],academic_year_id:null,current_page:1,per_page:G.pagePer});w({id:null,is_approved:!1,description:null});const n=w({eduTypeOptions:null,eduFormOptions:null,eduPlanOptions:null,academicGroupOptions:null,academicYearOptions:null,specialOptions:null,paymentTypeOptions:null}),$=P(!0);[S,T]=D(()=>u()),await S,T(),ee(async()=>{n.academicYearOptions=await ae().then(s=>{var l;return(l=s.result)==null?void 0:l.data}),n.eduTypeOptions=await ie().then(s=>s.result),n.eduFormOptions=await ne().then(s=>s.result),n.paymentTypeOptions=await de().then(s=>s==null?void 0:s.result),n.specialOptions=await ce().then(s=>s.result.data)});async function I(){await u()}async function V(){try{b.value=!0;const s=await ue({list:e.students});L.success(g("Data_stored_successfully")),e.students=[],f.value=[],u()}catch(s){L.error(g("Failed")+": "+s.message)}finally{b.value=!1}}h(()=>e.payment_type_id,async()=>{await u()}),h(()=>e.edu_type_id,async()=>{await u()}),h(()=>e.academic_year_id,async()=>{await u()}),h(()=>e.edu_form_id,async()=>{e.specialty_id=null,n.specialOptions=null,await u(),e.edu_form_id&&(n.eduPlanOptions=await _e(e.edu_form_id).then(s=>{var l;return(l=s.result)==null?void 0:l.data}))}),h(()=>e.specialty_id,async()=>{var s;if(e.academic_group_id=null,n.academicGroupOptions=null,await u(),e.specialty_id){let l=await pe(e.specialty_id);n.academicGroupOptions=(s=l==null?void 0:l.result)==null?void 0:s.data.map(m=>({id:m.id,name:m.name}))}}),h(()=>e.academic_group_id,async()=>{await u()}),h(()=>e.current_page,async s=>{Number(s)&&(e.page=Number(s),await u(s))}),h(()=>e.payment_type_id,async()=>{await u()});async function u(s){var m;let l={page:s||1,per_page:e.per_page};e.search.length>0&&(l.search=e==null?void 0:e.search),e.edu_type_id&&(l.edu_type_id=e==null?void 0:e.edu_type_id),e.edu_form_id&&(l.edu_form_id=e==null?void 0:e.edu_form_id),e.specialty_id&&(l.specialty_id=e==null?void 0:e.specialty_id),e.academic_group_id&&(l.academic_group_id=e==null?void 0:e.academic_group_id),b.value=!0;try{if($.value){$.value=!1;const d=await re(l);Object.assign(e,d.result),f.value=(m=d==null?void 0:d.result)==null?void 0:m.data.map(p=>p.id),setTimeout(()=>{$.value=!0},G.loaderRefresh)}}catch(d){console.log(d)}finally{b.value=!1}}return(s,l)=>{const m=v("router-link"),d=v("a-select"),p=v("a-space"),j=v("a-input"),A=v("b-card"),z=v("b-collapse"),M=K,R=J,q=te("b-toggle");return _(),y("div",me,[t("div",he,[t("div",ye,[t("div",fe,[t("h5",ve,[i(m,{to:"/archive/circulation-sheet"},{default:r(()=>[c(o(s.$t("Turnover_sheet"))+" / ",1)]),_:1}),c(" "+o(s.$t("archive_Circulation_Sheet_Set")),1)]),t("div",be,[t("div",ge,[C((_(),y("button",we,[ke,c(o(s.$t("Filter")),1)])),[[q,void 0,void 0,{"collapse-3":!0}]])]),i(m,{to:"/archive/circulation-sheet"},{default:r(()=>[t("button",Oe,[$e,c(o(s.$t("Prev")),1)])]),_:1})])])])]),t("div",Ce,[i(z,{visible:"",id:"collapse-3"},{default:r(()=>[i(A,null,{default:r(()=>[t("div",Se,[t("div",Te,[i(p,null,{default:r(()=>[i(d,{class:"form--item",value:Y.value,disabled:""},null,8,["value"])]),_:1}),t("label",Fe,o(s.$t("Choose_faculty")),1)]),t("div",Le,[i(p,null,{default:r(()=>[i(d,{value:e.academic_year_id,"onUpdate:value":l[0]||(l[0]=a=>e.academic_year_id=a),"field-names":{value:"id",label:"name"},options:n.academicYearOptions,"allow-clear":"","show-search":""},null,8,["value","options"])]),_:1}),t("label",Ne,o(s.$t("Choose_Education_Year")),1)]),t("div",Pe,[i(p,null,{default:r(()=>[i(d,{value:e.edu_type_id,"onUpdate:value":l[1]||(l[1]=a=>e.edu_type_id=a),"field-names":{value:"id",label:"name"},options:n.eduTypeOptions,"allow-clear":"","show-search":""},null,8,["value","options"])]),_:1}),t("label",Ue,o(s.$t("Choose_Education_Type")),1)]),t("div",Be,[i(p,null,{default:r(()=>[i(d,{"allow-clear":"",value:e.edu_form_id,"onUpdate:value":l[2]||(l[2]=a=>e.edu_form_id=a),"field-names":{value:"id",label:"name"},options:n.eduFormOptions,placeholder:U(g)("Choose_Education_Form")},null,8,["value","options","placeholder"])]),_:1}),t("label",null,o(s.$t("Choose_Education_Form")),1)]),t("div",Ee,[i(p,null,{default:r(()=>[i(d,{value:e.specialty_id,"onUpdate:value":l[3]||(l[3]=a=>e.specialty_id=a),"field-names":{value:"id",label:"name"},options:n.specialOptions,"allow-clear":"","show-search":""},null,8,["value","options"])]),_:1}),t("label",Ge,o(s.$t("select__specialty")),1)]),t("div",Ye,[i(p,null,{default:r(()=>[i(d,{"allow-clear":"",value:e.academic_group_id,"onUpdate:value":l[4]||(l[4]=a=>e.academic_group_id=a),"field-names":{value:"id",label:"name"},disabled:!e.specialty_id,options:n.academicGroupOptions,placeholder:U(g)("Choose_Group")},null,8,["value","disabled","options","placeholder"])]),_:1}),t("label",null,o(s.$t("Choose_Group")),1)]),t("div",Ie,[i(p,null,{default:r(()=>[i(j,{id:"yu",value:e.search,"onUpdate:value":l[5]||(l[5]=a=>e.search=a),class:"form-control","allow-clear":""},null,8,["value"])]),_:1}),t("label",Ve,o(s.$t("choose__fish__passport__code")),1)]),t("div",je,[t("button",{class:"btn-search search-color",onClick:I},[Ae,c(o(s.$t("Search")),1)])])])]),_:1})]),_:1})]),t("div",ze,[t("div",Me,[t("div",Re,[t("div",qe,[b.value?(_(),B(M,{key:0})):k("",!0),e.data.length?(_(),y("div",He,[t("table",Ze,[t("thead",null,[t("tr",Je,[t("th",null,[t("div",Ke,[C(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":l[6]||(l[6]=a=>F.value=a)},null,512),[[E,F.value]])])]),Qe,t("th",null,o(s.$t("Student")),1),t("th",null,o(s.$t("Education_Year_Name")),1),t("th",null,o(s.$t("Education_Type")),1),t("th",null,o(s.$t("Edu_form")),1),t("th",null,o(s.$t("Specialist")),1),t("th",null,o(s.$t("Group")),1)])]),t("tbody",null,[(_(!0),y(se,null,le(e.data,(a,H)=>(_(),y("tr",{class:"table-row-diploma-list",key:a==null?void 0:a.id},[t("td",null,[t("div",We,[C(t("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":l[7]||(l[7]=Z=>e.students=Z),value:a==null?void 0:a.id},null,8,Xe),[[E,e.students]])])]),t("td",null,o(H+1),1),t("td",null,[c(o(a.full_name)+" ",1),xe,c(" "+o(a.id)+" / "+o(a.student_status),1)]),t("td",null,[c(o(a.academic_year)+" ",1),De,c(" "+o(a.semester)+"-"+o(s.$t("semester_number")),1)]),t("td",null,o(a.edu_type),1),t("td",null,o(a.edu_form),1),t("td",null,[t("div",null,[c(o(a.specialty_code)+" ",1),et,c(" "+o(a.specialty),1)])]),t("td",null,o(a.academic_group),1)]))),128))])]),e.last_page>1?(_(),B(R,oe({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":l[8]||(l[8]=a=>e.current_page=a)}),null,16,["current-page"])):k("",!0)])):(_(),y("div",tt,[t("h5",st,o(s.$t("No_data")),1),t("p",lt,o(s.$t("No_information_found")),1)]))])]),t("div",ot,[e!=null&&e.total?(_(),y("span",at,o(e==null?void 0:e.current_page)+"-"+o((e==null?void 0:e.data.length)+e.per_page*((e==null?void 0:e.current_page)-1))+"/ "+o(s.$t("Total_Point"))+": "+o(e==null?void 0:e.total),1)):k("",!0),e!=null&&e.total?(_(),y("button",{key:1,onClick:V,disabled:!e.students.length>0,class:"btns c-save",type:"button"},[nt,c(o(s.$t("add")),1)],8,it)):k("",!0)])])])])}}});export{wt as default};
