import{_ as Y}from"./Pagination.f4a9fc5d.js";import{bR as q,d as Z,a as H,bO as J,B as P,Z as k,bq as K,y as Q,w as U,i as f,b6 as W,o as p,e as b,f as e,t as l,bs as X,z as $,j as n,k as c,g as m,F as D,r as ee,s as te,aR as ae,l as j,bS as S}from"./index.3390162f.js";import{R as oe,a7 as le,a8 as se}from"./index.30e99442.js";import{h}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const N=q();async function ne(y){try{const{data:d}=await N({url:"api/archive/diploma-form",method:"GET",params:y});return d}catch(d){throw d}}async function ie(y){try{const{data:d}=await N({url:`api/archive/diploma-form/${y}`,method:"GET"});return d}catch(d){throw d}}async function de(y){try{const{data:d}=await N({url:`api/archive/diploma-form/${y.id}`,method:"PUT",data:y});return d}catch(d){throw d}}const re={pagetitle:"'Diplom blanki'",class:"transferPage"},ce={class:"card panel-header-bg"},_e={class:"card-body"},ue={class:"panel-header"},me={class:"card-title"},pe={class:"filterBlock"},he={class:"btns c-filter py-1.5 px-4"},ye=e("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),fe={class:"collapse__block"},be={class:"row"},ve={class:"col-xl-3 my-2 form--item"},ge={class:"col-xl-2 my-2 form--item"},we={class:"col-xl-3 my-2 form--item"},ke={class:"my-2 col-xl-3 my-2 form--item"},Oe={for:"yu"},Be={class:"my-2 col-xl-1 me-0 ms-auto"},$e=e("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Ne={class:"card"},Ce={class:"card-body"},Fe={key:0,class:"table-responsive"},Pe={class:"content-table"},Ue={class:"table-row-all-blank"},je=e("th",null,"#",-1),Se=e("th",null,"Action",-1),Te={class:"gridjs-td justify-content-center"},Le={class:"list-inline mb-0"},Re={class:"list-inline-item"},ze={class:"edit__project text-center"},Ee=["onClick"],Ie=e("i",{class:"mdi mdi-pencil text-primary"},null,-1),Ve=[Ie],Me={key:1},xe={class:"text-center"},Ae={class:"text-center"},Ge={key:0,class:"element-count mb-2"},Ye={id:"modalBlank",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},qe={class:"modal-dialog"},Ze={class:"modal-content"},He={class:"modal-header bg-card-header"},Je={class:"modal-title",id:"myModalLabel"},Ke=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},[e("i",{class:"mdi mdi-close font-size-18"})],-1),Qe={class:"modal-body"},We={class:"card-body"},Xe={for:"division-name-select",class:"form-label"},De={for:"division-name-select",class:"form-label"},et={for:"division-name-select",class:"form-label"},tt={for:"division-name-select",class:"form-label"},at={for:"division-name-select",class:"form-label"},ot={for:"division-name-input",class:"form-label"},lt={class:"d-flex justify-content-end"},st=e("i",{class:"mdi mdi-check font-size-14 align-middle me-1"},null,-1),pt=Z({__name:"index",async setup(y){let d,C;const{t:v}=H(),F=J(),w=P(!1),T=k({}),t=k({search:"",edu_type_id:null,diplom_category_id:null,diplom_blank_status_id:null,data:[],links:[],current_page:1,per_page:h.pagePer}),u=k({typeOptions:null,categoryOptions:null,statusOptions:null}),r=k({id:null}),O=P(!0);[d,C]=K(()=>g()),await d,C(),Q(async()=>{u.typeOptions=await oe().then(a=>a.result),u.categoryOptions=await le().then(a=>a.result),u.statusOptions=await se().then(a=>a==null?void 0:a.result)});async function L(){await g()}U(()=>[t.edu_type_id,t.diplom_category_id,t.diplom_blank_status_id],async(a,o,i)=>{await g()}),U(()=>t.current_page,async a=>{Number(a)&&(t.page=Number(a),await g())});async function g(a){let o={page:t==null?void 0:t.page,per_page:t==null?void 0:t.per_page};t.search.length>0&&(o.search=t==null?void 0:t.search),t.edu_type_id&&(o.edu_type_id=t==null?void 0:t.edu_type_id),t.diplom_category_id&&(o.diplom_category_id=t==null?void 0:t.diplom_category_id),t.diplom_blank_status_id&&(o.diplom_blank_status_id=t==null?void 0:t.diplom_blank_status_id);try{if(w.value=!0,O.value){O.value=!1;const i=await ne(o);Object.assign(t,i.result),setTimeout(()=>{O.value=!0},h.loaderRefresh)}}catch(i){console.log(i)}finally{w.value=!1}}async function R(a){const o=S.getOrCreateInstance("#modalBlank");r.id=a,r.about_diplom="";let i=await ie(a).then(_=>_.result);Object.assign(r,i),o.show()}async function z(){var a,o;try{const i=S.getOrCreateInstance("#modalBlank");await de(r),w.value=!0,F.success(v("updated_successfully")),i.hide(),await g()}catch(i){console.log(i,"error"),F.error(v("Dashboard_Error")),Object.assign(T,(o=(a=i.response)==null?void 0:a.data)==null?void 0:o.errors)}finally{w.value=!1}}return(a,o)=>{const i=f("a-select"),_=f("a-form-item"),B=f("a-input"),E=f("a-space"),I=f("b-card"),V=f("b-collapse"),M=Y,x=f("a-textarea"),A=W("b-toggle");return p(),b("div",re,[e("div",ce,[e("div",_e,[e("div",ue,[e("h5",me,l(a.$t("Diploma_Blank")),1),e("div",pe,[X((p(),b("button",he,[ye,$(l(a.$t("Filter")),1)])),[[A,void 0,void 0,{"collapse-3":!0}]])])])])]),e("div",fe,[n(V,{visible:"",id:"collapse-3"},{default:c(()=>[n(I,null,{default:c(()=>[e("div",be,[e("div",ve,[n(_,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[n(i,{"filter-option":m(h).filterOptionByName,"show-search":"",value:t.edu_type_id,"onUpdate:value":o[0]||(o[0]=s=>t.edu_type_id=s),options:u.typeOptions,"field-names":{value:"id",label:"name"},"allow-clear":"",placeholder:m(v)("choose__type")},null,8,["filter-option","value","options","placeholder"])]),_:1})]),e("div",ge,[n(_,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[n(i,{"filter-option":m(h).filterOptionByName,"show-search":"",value:t.diplom_category_id,"onUpdate:value":o[1]||(o[1]=s=>t.diplom_category_id=s),options:u.statusOptions,"field-names":{value:"id",label:"name"},"allow-clear":"",placeholder:m(v)("category")},null,8,["filter-option","value","options","placeholder"])]),_:1})]),e("div",we,[n(_,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[n(i,{"filter-option":m(h).filterOptionByName,"show-search":"",value:t.diplom_blank_status_id,"onUpdate:value":o[2]||(o[2]=s=>t.diplom_blank_status_id=s),options:u.categoryOptions,"field-names":{value:"id",label:"name"},"allow-clear":"",placeholder:m(v)("Contract_Status")},null,8,["filter-option","value","options","placeholder"])]),_:1})]),e("div",ke,[n(E,null,{default:c(()=>[n(B,{id:"yu",value:t.search,"onUpdate:value":o[3]||(o[3]=s=>t.search=s),class:"form-control","allow-clear":""},null,8,["value"])]),_:1}),e("label",Oe,l(a.$t("Search_by_number")),1)]),e("div",Be,[e("button",{onClick:L,class:"btn-search search-color"},[$e,$(" "+l(a.$t("search")),1)])])])]),_:1})]),_:1})]),e("div",Ne,[e("div",Ce,[t.data.length?(p(),b("div",Fe,[e("table",Pe,[e("thead",null,[e("tr",Ue,[je,e("th",null,l(a.$t("Diploma_number")),1),e("th",null,l(a.$t("Education_Year_Name")),1),e("th",null,l(a.$t("Publication_Property_Type")),1),e("th",null,l(a.$t("category")),1),e("th",null,l(a.$t("Contract_Status")),1),Se])]),e("tbody",null,[(p(!0),b(D,null,ee(t.data,(s,G)=>(p(),b("tr",{class:"table-row-all-blank",key:s.id},[e("td",null,l((t.current_page-1)*t.per_page+G+1),1),e("td",null,l(s.number),1),e("td",null,l(s.academic_year),1),e("td",null,l(s.edu_type),1),e("td",null,l(s.diplom_category),1),e("td",null,l(s.diplom_blank_status),1),e("td",Te,[e("ul",Le,[e("li",Re,[e("div",ze,[e("a",{type:"text",onClick:nt=>R(s.id)},Ve,8,Ee)])])])])]))),128))])]),t.last_page>1?(p(),te(M,ae({key:0,class:"mt-2"},{...t},{"current-page":t.current_page,"onUpdate:currentPage":o[4]||(o[4]=s=>t.current_page=s)}),null,16,["current-page"])):j("",!0)])):(p(),b("div",Me,[e("h5",xe,l(a.$t("No_data")),1),e("p",Ae,l(a.$t("No_information_found")),1)]))])]),t!=null&&t.total?(p(),b("span",Ge,l(t==null?void 0:t.current_page)+"-"+l((t==null?void 0:t.data.length)+t.per_page*((t==null?void 0:t.current_page)-1))+"/ "+l(a.$t("Total_Point"))+": "+l(t==null?void 0:t.total),1)):j("",!0),e("div",Ye,[e("div",qe,[e("div",Ze,[e("div",He,[e("h5",Je,l(a.$t("Diploma_Blank")),1),Ke]),e("div",Qe,[e("div",We,[n(_,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[e("label",Xe,l(a.$t("Diploma_number")),1),n(B,{value:r.number,disabled:"",placeholder:"B0034834786"},null,8,["value"])]),_:1}),n(_,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[e("label",De,l(a.$t("Education_Year_Name")),1),n(B,{disabled:"",value:r.academic_year},null,8,["value"])]),_:1}),n(_,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[e("label",et,l(a.$t("Publication_Property_Type")),1),n(i,{"filter-option":m(h).filterOptionByName,"show-search":"",value:r.edu_type_id,"onUpdate:value":o[5]||(o[5]=s=>r.edu_type_id=s),options:u.typeOptions,disabled:"","field-names":{value:"id",label:"name"}},null,8,["filter-option","value","options"])]),_:1}),n(_,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[e("label",tt,l(a.$t("category")),1),n(i,{"filter-option":m(h).filterOptionByName,"show-search":"",value:r.diplom_blank_status_id,"onUpdate:value":o[6]||(o[6]=s=>r.diplom_blank_status_id=s),options:u.categoryOptions,"field-names":{value:"id",label:"name"}},null,8,["filter-option","value","options"])]),_:1}),n(_,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[e("label",at,l(a.$t("Status")),1),n(i,{"filter-option":m(h).filterOptionByName,"show-search":"",options:u.statusOptions,"field-names":{value:"id",label:"name"},value:r.diplom_category_id,"onUpdate:value":o[7]||(o[7]=s=>r.diplom_category_id=s)},null,8,["filter-option","options","value"])]),_:1}),n(_,{class:"mb-3",name:"nameFaculty"},{default:c(()=>[e("label",ot,l(a.$t("Reason")),1),n(x,{"auto-size":{minRows:4.5,maxRows:6},value:r.about_diplom,"onUpdate:value":o[8]||(o[8]=s=>r.about_diplom=s)},null,8,["value"])]),_:1}),e("div",lt,[e("button",{class:"btns c-save",type:"button",onClick:z},[st,$(l(a.$t("Save")),1)])])])])])])])])}}});export{pt as default};
