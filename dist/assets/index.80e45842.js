import{_ as W}from"./Pagination.f4a9fc5d.js";import{S as Z}from"./sweetalert2.all.fdef424e.js";import{c as H,g as J,d as K}from"./award.8b25ad3e.js";import{a as Q,an as X}from"./index.30e99442.js";import{d as tt,B as x,bO as st,a as et,bq as v,Z as z,w as m,i as g,b6 as at,o as d,e as u,f as t,t as a,j as i,k as _,z as b,bs as ot,F as E,r as P,g as nt,s as lt,aR as it,l as ct}from"./index.3390162f.js";import"./_plugin-vue_export-helper.cdc0426e.js";const rt={pagetitle:"`Talaba yutug'i`",class:"award-page"},dt={class:"card panel-header-bg"},_t={class:"card-body"},ut={class:"panel-header"},pt={class:"card-title"},ht={class:"panel-toggles"},gt=t("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),ft={class:"filterBlock"},yt={class:"btns c-filter py-1.5 px-4"},vt=t("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),mt={class:"collapse__block"},bt={class:"row"},wt={class:"my-2 col-xl-6 form--item"},kt={for:"yu"},Ct={class:"my-2 col-xl-6 form--item"},$t={for:"yu"},Bt={class:"card"},St={class:"card-body"},Nt={key:0,class:"table-responsive"},At={class:"content-table"},Lt={class:"table-row d-grid w-100"},Vt=t("th",null,"#",-1),Dt={class:"gridjs-td"},Tt={class:"list-inline mb-0"},jt={class:"list-inline-item"},xt={class:"edit__project"},zt=t("i",{class:"mdi mdi-pencil font-size-18 text-primary"},null,-1),Et={class:"list-inline-item"},Pt={class:"delete__project"},Yt=["onClick"],Ft=t("i",{class:"mdi mdi-delete font-size-18"},null,-1),Rt=[Ft],Ut={class:"form-check form-switch my-auto"},Mt=["checked","disabled","onChange"],Ot={key:1},qt={class:"text-center"},Gt={class:"text-center"},It={class:"element-count mb-2"},ts=tt({__name:"index",async setup(Wt){let l,p;x(null);const w=st(),{t:c}=et(),f=x(!1);[l,p]=v(()=>Q().then(e=>e.result.data)),l=await l,p();const Y=([l,p]=v(()=>X().then(e=>e.result)),l=await l,p(),l),o=z({current_page:1,data:[],links:[],per_page:20}),r=z({year:null,category_id:null});[l,p]=v(()=>h()),await l,p(),m(()=>r.year,async(e,n)=>{await h()}),m(()=>r.category_id,async(e,n)=>{await h()}),m(()=>o.current_page,async e=>{Number(e)&&(r.page=Number(e),await h())});async function F(e){try{f.value=!0,await H(e),await h(),w.success(c("Data_stored_successfully"))}catch(n){w.error(n.message)}finally{f.value=!1}}async function h(){f.value=!0;const e=await J(r);Object.assign(o,e.result),f.value=!1}async function R(e){const n=Z.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger ml-2"},buttonsStyling:!1});try{(await n.fire({title:c("Delete_message.Are_you_sure"),text:c("Delete_message.Action_irreversible"),icon:"warning",confirmButtonText:c("Delete_message.Yes_Delete"),cancelButtonText:c("Delete_message.Yo_Cancel"),showCancelButton:!0})).isConfirmed&&(await K(e),await h(),n.fire(c("Delete_message.Removed"),c("Delete_message.Record_deleted_successfull"),"success"))}catch(y){n.fire(c("Dashboard_Error"),y.message,"error")}}return(e,n)=>{const y=g("router-link"),U=g("a-select-option"),k=g("a-select"),C=g("a-space"),M=g("b-card"),O=g("b-collapse"),q=W,G=at("b-toggle");return d(),u("div",rt,[t("div",dt,[t("div",_t,[t("div",ut,[t("h5",pt,a(e.$t("Student_Award")),1),t("div",ht,[i(y,{to:{path:"/student/award/create"},class:"btns c-save py-1.5 px-4 me-3"},{default:_(()=>[gt,b(a(e.$t("Create")),1)]),_:1}),t("div",ft,[ot((d(),u("button",yt,[vt,b(a(e.$t("Filter")),1)])),[[G,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",mt,[i(O,{visible:"",id:"collapse-3"},{default:_(()=>[i(M,null,{default:_(()=>[t("form",bt,[t("div",wt,[i(C,null,{default:_(()=>[i(k,{class:"form--item",value:r.year,"onUpdate:value":n[0]||(n[0]=s=>r.year=s),"allow-clear":""},{default:_(()=>[(d(),u(E,null,P(20,(s,$)=>i(U,{value:s+2014},{default:_(()=>[b(a(s+2014)+"-"+a(e.$t("year")),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),t("label",kt,a(e.$t("Choose_Year")),1)]),t("div",Ct,[i(C,null,{default:_(()=>[i(k,{class:"form--item",value:r.category_id,"onUpdate:value":n[1]||(n[1]=s=>r.category_id=s),options:nt(Y),"field-names":{value:"id",label:"name"},"allow-clear":""},null,8,["value","options"])]),_:1}),t("label",$t,a(e.$t("Choose_Award_Category")),1)])])]),_:1})]),_:1})]),t("div",Bt,[t("div",St,[o.data.length?(d(),u("div",Nt,[t("table",At,[t("thead",null,[t("tr",Lt,[Vt,t("th",null,a(e.$t("Student")),1),t("th",null,a(e.$t("Group")),1),t("th",null,a(e.$t("Education_Type")),1),t("th",null,a(e.$t("Education_Form")),1),t("th",null,a(e.$t("Specialty_code")),1),t("th",null,a(e.$t("award_Category")),1),t("th",null,a(e.$t("award_Year")),1),t("th",null,a(e.$t("action")),1),t("th",null,a(e.$t("Enable")),1)])]),t("tbody",null,[(d(!0),u(E,null,P(o.data,(s,$)=>{var B,S,N,A,L,V,D,T,j;return d(),u("tr",{class:"table-row d-grid w-100",key:s.id},[t("td",null,a((o.current_page-1)*o.per_page+$+1),1),t("td",null,a((B=s==null?void 0:s.student)==null?void 0:B.name)+" "+a((S=s==null?void 0:s.student)==null?void 0:S.surname),1),t("td",null,a((A=(N=s==null?void 0:s.student)==null?void 0:N.academic_group)==null?void 0:A.name),1),t("td",null,a((D=(V=(L=s==null?void 0:s.student)==null?void 0:L.specialty)==null?void 0:V.edu_type)==null?void 0:D.name),1),t("td",null,a((T=s==null?void 0:s.student)==null?void 0:T.edu_form),1),t("td",null,a((j=s==null?void 0:s.student)==null?void 0:j.pinfl),1),t("td",null,a(s==null?void 0:s.type),1),t("td",null,a(s==null?void 0:s.year),1),t("td",Dt,[t("ul",Tt,[t("li",jt,[t("div",xt,[i(y,{to:{path:"/student/award/create/"+s.id}},{default:_(()=>[zt]),_:2},1032,["to"])])]),t("li",Et,[t("div",Pt,[t("a",{class:"text-danger",type:"danger",onClick:I=>R(s.id)},Rt,8,Yt)])])])]),t("td",null,[t("div",Ut,[t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:s.status,disabled:f.value,onChange:I=>F(s.id)},null,40,Mt)])])])}),128))])]),o.last_page>1?(d(),lt(q,it({key:0,class:"mt-2"},{...o},{"current-page":o.current_page,"onUpdate:currentPage":n[2]||(n[2]=s=>o.current_page=s)}),null,16,["current-page"])):ct("",!0)])):(d(),u("div",Ot,[t("h5",qt,a(e.$t("No_data")),1),t("p",Gt,a(e.$t("No_information_found")),1)]))])]),t("span",It,a(o==null?void 0:o.current_page)+"-"+a((o==null?void 0:o.data.length)+o.per_page*((o==null?void 0:o.current_page)-1))+"/ "+a(e.$t("Total_Point"))+": "+a(o==null?void 0:o.total),1)])}}});export{ts as default};
