import{_ as j}from"./Pagination.f4a9fc5d.js";import{_ as R}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{d as T,a as V,bO as q,B as N,Z as O,bq as E,y as M,w as y,i as _,b6 as Z,o as c,e as u,f as t,t as l,bs as H,z as m,j as n,k as p,g as b,s as P,l as S,F as J,r as K,aR as Q}from"./index.3390162f.js";import{k as W}from"./index.30e99442.js";import{b as X}from"./id.5a6e5f30.js";import{g as Y,c as tt}from"./accreditation.09ddae40.js";import{h as f}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const et={pagetitle:"`Akkreditatsiya`",class:"diploma-list"},at={class:"card panel-header-bg"},ot={class:"card-body"},st={class:"panel-header"},lt={class:"card-title"},it={class:"panel-toggles"},nt={class:"filterBlock"},ct={class:"btns c-filter py-1.5 px-4"},dt=t("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),rt={class:"collapse__block"},_t={class:"row"},ut={class:"my-2 col-xl-3 form--item"},pt={for:"yu"},ht={class:"my-2 col-xl-3 form--item"},mt={for:"yu"},ft={class:"my-2 col-xl-4 form--item"},vt={for:"yu"},gt={class:"my-2 col-xl-2"},yt=t("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),bt={class:"row table-division"},kt={class:"col-xl-12"},wt={class:"card"},$t={class:"card-body"},Ct={key:1,class:"table-responsive"},Nt={class:"content-table"},Ot={class:"table-row-accreditation-index"},Pt=t("th",null,"#",-1),St=t("br",null,null,-1),Bt={style:{color:"#ccc"}},Gt=t("br",null,null,-1),xt={style:{color:"#ccc"}},Dt={class:"form-check form-switch my-auto"},Lt=["checked","disabled","onChange"],Ft={key:2},It={class:"text-center"},Ut={class:"text-center"},Wt=T({__name:"index",async setup(zt){let k,w;const{t:$}=V(),C=q(),d=N(!1),v=N(!0),e=O({search:"",edu_plan_id:null,academic_group_id:null,data:[],links:[],current_page:1,per_page:f.pagePer}),h=O({eduPlanOptions:null,academicGroupOptions:null});[k,w]=E(()=>r()),await k,w(),M(async()=>{h.eduPlanOptions=await W().then(a=>{var o;return(o=a==null?void 0:a.result)==null?void 0:o.data})}),y(()=>e.edu_plan_id,async()=>{var a;if(e.academic_group_id=null,h.academicGroupOptions=null,await r(),e.edu_plan_id){let o=await X(e.edu_plan_id);h.academicGroupOptions=(a=o==null?void 0:o.result)==null?void 0:a.data.map(i=>({id:i.id,name:i.name}))}}),y(()=>e.academic_group_id,async()=>{await r()}),y(()=>e.current_page,async a=>{Number(a)&&(e.page=Number(a),await r(a))});async function r(a){let o={page:e.page};a||(o.page=1),e.search&&(o.search=e.search),e.edu_plan_id&&(o.edu_plan_id=e.edu_plan_id),e.academic_group_id&&(o.academic_group_id=e.academic_group_id),d.value=!0;try{if(v.value){v.value=!1;const i=await Y(o);Object.assign(e,i.result),setTimeout(()=>{v.value=!0},f.loaderRefresh)}}catch(i){console.log(i)}finally{d.value=!1}}async function B(a){try{d.value=!0,await tt(a),await r(),C.success($("Data_stored_successfully"))}catch(o){C.error(o.message)}finally{d.value=!1}}async function G(){r()}return(a,o)=>{const i=_("a-select"),g=_("a-space"),x=_("a-input"),D=_("b-card"),L=_("b-collapse"),F=R,I=_("router-link"),U=j,z=Z("b-toggle");return c(),u("div",et,[t("div",at,[t("div",ot,[t("div",st,[t("h5",lt,l(a.$t("accreditation")),1),t("div",it,[t("div",nt,[H((c(),u("button",ct,[dt,m(l(a.$t("Filter")),1)])),[[z,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",rt,[n(L,{visible:"",id:"collapse-3"},{default:p(()=>[n(D,null,{default:p(()=>[t("div",_t,[t("div",ut,[n(g,null,{default:p(()=>[n(i,{"filter-option":b(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_plan_id,"onUpdate:value":o[0]||(o[0]=s=>e.edu_plan_id=s),"field-names":{value:"id",label:"name"},options:h.eduPlanOptions,placeholder:a.$t("Please_select_curriculum")},null,8,["filter-option","value","options","placeholder"])]),_:1}),t("label",pt,l(a.$t("Choose_Curriculum")),1)]),t("div",ht,[n(g,null,{default:p(()=>[n(i,{"filter-option":b(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.academic_group_id,"onUpdate:value":o[1]||(o[1]=s=>e.academic_group_id=s),disabled:!e.edu_plan_id,"field-names":{value:"id",label:"name"},options:h.academicGroupOptions,placeholder:b($)("Choose_Group")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),t("label",mt,l(a.$t("Choose_Group")),1)]),t("div",ft,[n(g,null,{default:p(()=>[n(x,{id:"yu",value:e.search,"onUpdate:value":o[2]||(o[2]=s=>e.search=s),class:"form-control"},null,8,["value"])]),_:1}),t("label",vt,l(a.$t("Search_by_Name_Student_ID_Passport_PIN")),1)]),t("div",gt,[t("button",{class:"btn-search search-color",onClick:G},[yt,m(l(a.$t("Search")),1)])])])]),_:1})]),_:1})]),t("div",bt,[t("div",kt,[t("div",wt,[t("div",$t,[d.value?(c(),P(F,{key:0})):S("",!0),e.data.length?(c(),u("div",Ct,[t("table",Nt,[t("thead",null,[t("tr",Ot,[Pt,t("th",null,l(a.$t("Student")),1),t("th",null,l(a.$t("by_Specialty")),1),t("th",null,l(a.$t("Group")),1),t("th",null,l(a.$t("student_load")),1),t("th",null,l(a.$t("Status")),1)])]),t("tbody",null,[(c(!0),u(J,null,K(e.data,(s,A)=>(c(),u("tr",{class:"table-row-accreditation-index",key:s==null?void 0:s.id},[t("td",null,l((e.current_page-1)*e.per_page+A+1),1),t("td",null,[n(I,{to:"/archive/accreditation/"+s.id},{default:p(()=>[m(l(s.student)+" ",1),St,t("span",Bt,l(s.edu_type)+"/ "+l(s.edu_form),1)]),_:2},1032,["to"])]),t("td",null,[t("div",null,[m(l(s.specialty),1),Gt,t("span",xt,l(s.edu_plan),1)])]),t("td",null,l(s.academic_group),1),t("td",null,l(s.total_credit)+"/"+l(s.total_load),1),t("td",null,[t("div",Dt,[t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:s.status,disabled:d.value,onChange:At=>B(s.id)},null,40,Lt)])])]))),128))])]),e.last_page>1?(c(),P(U,Q({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":o[3]||(o[3]=s=>e.current_page=s)}),null,16,["current-page"])):S("",!0)])):(c(),u("div",Ft,[t("h5",It,l(a.$t("No_data")),1),t("p",Ut,l(a.$t("No_information_found")),1)]))])])])])])}}});export{Wt as default};
