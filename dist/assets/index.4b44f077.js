import{_ as G}from"./SubmitButton.vue_vue_type_script_setup_true_lang.fe21b651.js";import{d as V,a as T,bO as R,B as y,Z as j,y as A,bn as J,i as v,o as l,e as d,f as t,t as o,v as K,j as c,l as w,z as N,bS as q,bq as O,h as Q,c as X,w as S,b6 as tt,k as C,bs as et,g as ot,F as st,r as at,s as nt,aR as it}from"./index.3390162f.js";import{f as lt,u as dt,c as ct,d as rt,a as _t,b as ut}from"./employee-competition.a7baf594.js";import{g as pt,h as mt,t as ht,f as yt,a as vt}from"./index.30e99442.js";import{_ as ft}from"./Pagination.f4a9fc5d.js";import{S as bt}from"./sweetalert2.all.fdef424e.js";import"./_plugin-vue_export-helper.cdc0426e.js";const gt={id:"employeeCompetitionFormModal",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},$t={class:"modal-dialog"},Ct={class:"modal-content"},wt={class:"modal-header bg-card-header"},kt={class:"modal-title",id:"myModalLabel"},Dt=t("i",{class:"mdi mdi-close font-size-18"},null,-1),Et=[Dt],Mt={class:"modal-body"},Bt={class:"row"},Lt={class:"col-md-6"},Yt={class:"mb-3"},It={for:"division-name-select",class:"form-label"},Ft={key:0,class:"text-danger small"},Nt={class:"col-md-6"},jt={class:"mb-3"},St={for:"division-name-select",class:"form-label"},Ut={key:0,class:"text-danger small"},Pt={class:"col-md-4 mb-3"},zt={for:"division-name-input",class:"form-label"},Ot={key:0,class:"text-danger small"},Vt={class:"col-md-8 mb-3"},Tt={for:"division-name-input",class:"form-label"},Rt={key:0,class:"text-danger small"},At={class:"d-flex justify-content-end"},qt={type:"button",class:"btns c-cancel me-1","data-bs-dismiss":"modal"},Ht=t("i",{class:"mdi mdi-close font-size-14 align-middle me-1"},null,-1),Wt=V({__name:"EmployeeCompetitionFormModal",props:{employeeCompetitionId:null},emits:["update:list","close"],setup(U,{emit:h}){const m=U,b=h,{t:u}=T(),k=R(),f=y(!1),L=y([]),D=y([]),E=y([]),r=j({employee_id:null,position_id:null,date:"",contract:""}),n=j({employee_id:[],position_id:[],date:[],contract:[]});y(),A(async()=>{const i=document.getElementById("employeeCompetitionFormModal");i==null||i.addEventListener("hidden.bs.modal",e=>{Y(),I(),b("close")}),L.value=await pt().then(e=>e.result.data.map(s=>({id:s.id,name:s.name+" "+s.surname}))),D.value=await mt().then(e=>e.result),E.value=await ht().then(e=>e.result)}),J(async()=>{if(m.employeeCompetitionId){const i=await lt(m.employeeCompetitionId);Object.assign(r,i.result)}});async function p(){var i,e;try{f.value=!0,I();const s=m.employeeCompetitionId?await dt(m.employeeCompetitionId,r):await ct(r);k.success(u("Data_stored_successfully")),b("update:list"),F()}catch(s){Object.assign(n,(e=(i=s.response)==null?void 0:i.data)==null?void 0:e.errors),k.error(u("Failed")+": "+s.message)}finally{f.value=!1}}function Y(){Object.assign(r,{employee_id:null,position_id:null,date:"",contract:""})}function I(){Object.assign(n,{employee_id:[],position_id:[],date:[],contract:[]})}function F(){q.getOrCreateInstance("#employeeCompetitionFormModal").hide()}function g(i){n[i]=""}return(i,e)=>{const s=v("a-select"),$=v("a-date-picker"),M=v("a-input"),B=G;return l(),d("div",gt,[t("div",$t,[t("div",Ct,[t("div",wt,[t("h5",kt,o(i.$t("Education_Year_Name")),1),t("button",{type:"button",class:"btn-close",onClick:F},Et)]),t("div",Mt,[t("form",{onSubmit:K(p,["prevent"])},[t("div",Bt,[t("div",Lt,[t("div",Yt,[t("label",It,o(i.$t("Employee")),1),c(s,{value:r.employee_id,"onUpdate:value":e[0]||(e[0]=_=>r.employee_id=_),options:L.value,"field-names":{value:"id",label:"name"},placeholder:i.$t("Choose"),onChange:e[1]||(e[1]=_=>g("employee_id"))},null,8,["value","options","placeholder"]),n.employee_id?(l(),d("span",Ft,o(n.employee_id[0]),1)):w("",!0)])]),t("div",Nt,[t("div",jt,[t("label",St,o(i.$t("by_Post")),1),c(s,{value:r.position_id,"onUpdate:value":e[2]||(e[2]=_=>r.position_id=_),options:D.value.data,"field-names":{value:"id",label:"name"},placeholder:i.$t("Choose"),onChange:e[3]||(e[3]=_=>g("position_id"))},null,8,["value","options","placeholder"]),n.position_id?(l(),d("span",Ut,o(n.position_id[0]),1)):w("",!0)])]),t("div",Pt,[t("label",zt,o(i.$t("Competition_date")),1),c($,{placeholder:"YYYY-MM-DD",value:r.date,"onUpdate:value":e[4]||(e[4]=_=>r.date=_),type:"date","value-format":"YYYY-MM-DD",onChange:e[5]||(e[5]=_=>g("date"))},null,8,["value"]),n.date?(l(),d("span",Ot,o(n.date[0]),1)):w("",!0)]),t("div",Vt,[t("label",Tt,o(i.$t("Competition_document")),1),c(M,{value:r.contract,"onUpdate:value":e[6]||(e[6]=_=>r.contract=_),onChange:e[7]||(e[7]=_=>g("contract"))},null,8,["value"]),n.contract?(l(),d("span",Rt,o(n.contract[0]),1)):w("",!0)])]),t("div",At,[t("button",qt,[Ht,N(" "+o(i.$t("Close")),1)]),c(B,{loading:f.value},null,8,["loading"])])],32)])])])])}}}),Zt={pagetitle:"'Tanlovdan o'tish oshirish'",class:"employee-competition-page"},xt={class:"card panel-header-bg"},Gt={class:"card-body"},Jt={class:"panel-header"},Kt={class:"card-title"},Qt={class:"panel-toggles"},Xt=t("i",{class:"mdi mdi-account-plus font-size-14 align-middle me-1"},null,-1),te={class:"btns c-save py-1.5 px-4 me-3",type:"button"},ee=t("i",{class:"mdi mdi-text-search font-size-14 align-middle me-2"},null,-1),oe={class:"filterBlock"},se={class:"btns c-filter py-1.5 px-4"},ae=t("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ne={class:"collapse__block"},ie={class:"row"},le={class:"my-2 col-md-4 form--item"},de={for:"yu"},ce={class:"my-2 col-md-4 form--item"},re={for:"yu"},_e={class:"my-2 col-md-4 form--item"},ue={for:"yu"},pe={class:"card"},me={class:"card-body"},he={key:0,class:"table-responsive"},ye={class:"content-table"},ve={class:"table-row d-grid w-100"},fe=t("th",null,"#",-1),be={key:0},ge={key:1},$e={key:0},Ce={key:1},we={class:"gridjs-td"},ke={class:"list-inline mb-0"},De={class:"list-inline-item"},Ee={class:"edit__project"},Me=["onClick"],Be=t("i",{class:"mdi mdi-pencil font-size-18 text-primary"},null,-1),Le=[Be],Ye={class:"list-inline-item"},Ie={class:"delete__project"},Fe=["onClick"],Ne=t("i",{class:"mdi mdi-delete font-size-18"},null,-1),je=[Ne],Se={class:"form-check form-switch my-auto"},Ue=["disabled","onChange"],Pe={key:1},ze={class:"text-center"},Oe={class:"text-center"},Ve={key:0,class:"element-count mb-2"},xe=V({__name:"index",async setup(U){let h,m;const b=y(null),{t:u}=T(),k=R(),f=y(!1),L=([h,m]=O(()=>vt().then(e=>e.result.data.map(s=>({id:s.year,name:s.name})))),h=await h,m(),h),D=y([]),E=Q(),r=X(()=>{var e,s;return(s=(e=E==null?void 0:E.user)==null?void 0:e.faculty)==null?void 0:s.name});A(async()=>{const e=await yt();D.value=e.result});const n=j({current_page:1,data:[],links:[]}),p=j({department_id:null,date:null,name:"",page:1});[h,m]=O(()=>i()),await h,m(),S(()=>n.current_page,async e=>{Number(e)&&(p.page=Number(e),await i())}),S(()=>p.department_id,async(e,s)=>{await i()}),S(()=>p.date,async(e,s)=>{await i()});function Y(e){b.value=e,q.getOrCreateInstance("#employeeCompetitionFormModal").show()}async function I(e){const s=bt.mixin({customClass:{confirmButton:"btn btn-danger me-2",cancelButton:"btn btn-success"},buttonsStyling:!1});try{(await s.fire({title:u("Delete_message.Are_you_sure"),text:u("Delete_message.Action_irreversible"),icon:"warning",confirmButtonText:u("Delete_message.Yes_Delete"),cancelButtonText:u("Delete_message.Yo_Cancel"),showCancelButton:!0})).isConfirmed&&(await rt(e),await i(),s.fire(u("Delete_message.Removed"),u("Delete_message.Record_deleted_successfull"),"success"))}catch($){s.fire(u("Dashboard_Error"),$.message,"error")}}function F(){b.value=null}async function g(e){try{f.value=!0,await _t(e),await i(),k.success(u("Data_stored_successfully"))}catch(s){k.error(s.message)}finally{f.value=!1}}async function i(){const e=await ut(p);n.data=null,Object.assign(n,e.result)}return(e,s)=>{const $=v("router-link"),M=v("a-select"),B=v("a-space"),_=v("b-card"),H=v("b-collapse"),W=ft,Z=Wt,x=tt("b-toggle");return l(),d("div",Zt,[t("div",xt,[t("div",Gt,[t("div",Jt,[t("h5",Kt,o(e.$t("Employee_Competition")),1),t("div",Qt,[t("button",{class:"btns c-save py-1.5 px-4 me-3",type:"button",onClick:s[0]||(s[0]=a=>Y(null))},[Xt,N(o(e.$t("add")),1)]),c($,{to:"/employee/employee-competition/monitoring"},{default:C(()=>[t("button",te,[ee,N(" "+o(e.$t("Employee_Competition_Monitoring")),1)])]),_:1}),t("div",oe,[et((l(),d("button",se,[ae,N(o(e.$t("Filter")),1)])),[[x,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",ne,[c(H,{visible:"",id:"collapse-3"},{default:C(()=>[c(_,null,{default:C(()=>[t("div",ie,[t("div",le,[c(B,null,{default:C(()=>[c(M,{class:"form--item",value:r.value,disabled:""},null,8,["value"])]),_:1}),t("label",de,o(e.$t("Choose_faculty")),1)]),t("div",ce,[c(B,null,{default:C(()=>[c(M,{value:p.department_id,"onUpdate:value":s[1]||(s[1]=a=>p.department_id=a),"field-names":{value:"id",label:"name"},options:D.value,"allow-clear":"","show-search":""},null,8,["value","options"])]),_:1}),t("label",re,o(e.$t("Choose_Department")),1)]),t("div",_e,[c(B,null,{default:C(()=>[c(M,{value:p.date,"onUpdate:value":s[2]||(s[2]=a=>p.date=a),"field-names":{value:"id",label:"name"},options:ot(L),"allow-clear":"","show-search":""},null,8,["value","options"])]),_:1}),t("label",ue,o(e.$t("Choose_Year")),1)])])]),_:1})]),_:1})]),t("div",pe,[t("div",me,[n.data.length?(l(),d("div",he,[t("table",ye,[t("thead",null,[t("tr",ve,[fe,t("th",null,o(e.$t("Employee")),1),t("th",null,o(e.$t("Hei_cathedra")),1),t("th",null,o(e.$t("Competition_position")),1),t("th",null,o(e.$t("academic_Degree")),1),t("th",null,o(e.$t("academic_Rank")),1),t("th",null,o(e.$t("Competition_date")),1),t("th",null,o(e.$t("action")),1),t("th",null,o(e.$t("Enable")),1)])]),t("tbody",null,[(l(!0),d(st,null,at(n.data,(a,P)=>(l(),d("tr",{class:"table-row d-grid w-100",key:P},[t("td",null,o((n.current_page-1)*n.per_page+P+1),1),t("td",null,o(a==null?void 0:a.fullname),1),t("td",null,o(a==null?void 0:a.department),1),t("td",null,o(a==null?void 0:a.position),1),t("td",null,[(a==null?void 0:a.academic_degree)==null?(l(),d("span",be,o(e.$t("No_Degree")),1)):(l(),d("span",ge,o(a==null?void 0:a.academic_degree),1))]),t("td",null,[(a==null?void 0:a.academic_title)==null?(l(),d("span",$e,o(e.$t("Untitled")),1)):(l(),d("span",Ce,o(a==null?void 0:a.academic_title),1))]),t("td",null,o(a==null?void 0:a.date),1),t("td",we,[t("ul",ke,[t("li",De,[t("div",Ee,[t("a",{type:"text",onClick:z=>Y(a.id)},Le,8,Me)])]),t("li",Ye,[t("div",Ie,[t("a",{class:"text-danger",type:"danger",onClick:z=>I(a.id)},je,8,Fe)])])])]),t("td",null,[t("div",Se,[t("input",{class:"form-check-input",type:"checkbox",checked:"",disabled:f.value,onChange:z=>g(a.id)},null,40,Ue)])])]))),128))])]),n.last_page>1?(l(),nt(W,it({key:0,class:"mt-2"},{...n},{"current-page":n.current_page,"onUpdate:currentPage":s[3]||(s[3]=a=>n.current_page=a)}),null,16,["current-page"])):w("",!0)])):(l(),d("div",Pe,[t("h5",ze,o(e.$t("No_data")),1),t("p",Oe,o(e.$t("No_information_found")),1)]))])]),n.data.length?(l(),d("span",Ve,o(n.current_page)+"-"+o(n.data.length+n.per_page*(n.current_page-1))+"/ "+o(e.$t("Total_Point"))+": "+o(n.total),1)):w("",!0),c(Z,{"employee-competition-id":b.value,"onUpdate:list":i,onClose:F},null,8,["employee-competition-id"])])}}});export{xe as default};
