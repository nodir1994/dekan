import{_ as B}from"./SubmitButton.vue_vue_type_script_setup_true_lang.fe21b651.js";import{d as N,Z as v,h as U,c as Y,B as E,bO as F,a as G,u as C,y as T,w as M,i as h,o as u,e as m,f as r,j as s,k as p,t as i,g as f,l as _,v as q}from"./index.3390162f.js";import{u as x,c as V}from"./index.e7beba24.js";import{B as P,a as Q,m as H,e as I,c as K,N as R,O as W,P as Z,Q as z}from"./index.30e99442.js";import{h as b}from"./helper.569bc08f.js";const J={class:"row"},X={class:"col-md-4"},ee={for:"division-name-select",class:"form-label"},ae={key:0,class:"text-danger small"},te={for:"division-name-select",class:"form-label"},le={key:0,class:"text-danger small"},se={for:"division-name-select",class:"form-label"},ie={key:0,class:"text-danger small"},oe={for:"division-name-input",class:"form-label"},ne={key:0,class:"text-danger small"},de={class:"col-md-4"},re={for:"division-name-select",class:"form-label"},ce={key:0,class:"text-danger small"},ue={for:"division-name-select",class:"form-label"},me={key:0,class:"text-danger small"},pe={for:"division-name-select",class:"form-label"},_e={key:0,class:"text-danger small"},fe={for:"division-name-select",class:"form-label"},be={key:0,class:"text-danger small"},ye={class:"col-md-4"},ve={for:"division-name-select",class:"form-label"},he={key:0,class:"text-danger small"},ke={for:"division-name-select",class:"form-label"},ge={key:0,class:"text-danger small"},we={for:"division-name-select",class:"form-label"},Le={key:0,class:"text-danger small"},De={class:"row"},Se={for:"division-name-select",class:"form-label"},je={key:0,class:"text-danger small"},Oe={for:"division-name-select",class:"form-label"},$e={key:0,class:"text-danger small"},Ae={class:"d-flex justify-content-end"},Fe=N({__name:"DakForm",props:{formState:{type:[Array,Object],required:!0}},setup(j){const c=v({optionsAcademicYearList:null,optionsEduTypeList:null,optionsSpecialList:null,optionsDepartment:null,optionsDak:null,optionsAllDak:null,getListSubjectsAll:null,academicGroupsList:null,allStudents:null}),k=U();Y(()=>{var a,t;return(t=(a=k==null?void 0:k.user)==null?void 0:a.faculty)==null?void 0:t.name});const g=E(!1),w=F(),{t:L}=G();C();const D=j,e=v({student_id:null,dak_id:null,dak_order:null,date:null,theme_id:null,subject_id:null,mark:null,ball:null,academic_year_id:null,department_id:null,edu_type_id:null,specialty_id:null,academic_group_id:null});Object.assign(e,D.formState),T(async()=>{c.optionsDepartment=await P().then(a=>a.result),c.optionsAcademicYearList=await Q().then(a=>{var t;return(t=a==null?void 0:a.result)==null?void 0:t.data}),c.academicGroupsList=await H().then(a=>{var t;return(t=a==null?void 0:a.result)==null?void 0:t.data}),c.optionsEduTypeList=await I().then(a=>a.result),c.optionsSpecialList=await K().then(a=>{var t;return(t=a==null?void 0:a.result)==null?void 0:t.data.map(n=>({id:n.id,name:n.name+`-(${n.code})`}))}),c.optionsDak=await R().then(a=>a==null?void 0:a.result),c.optionsAllDak=await W().then(a=>a==null?void 0:a.result)});const l=v({edu_type:[],specialty:[],department:[],academic_year:[],type:[],name:[]});M(()=>e.academic_group_id||e.academic_year_id,async()=>{if(e.academic_group_id&&e.academic_year_id){let a=v({academic_group_id:e.academic_group_id,academic_year_id:e.academic_year_id});const t=await Z(a);c.getListSubjectsAll=t.result.data.map(n=>({id:n.id,name:n.name})),c.allStudents=await z(e==null?void 0:e.academic_group_id).then(n=>{var d;return(d=n==null?void 0:n.result)==null?void 0:d.data})}});async function O(){var a,t,n;try{g.value=!0,$();const d=new FormData;Object.getOwnPropertyNames(e).forEach(y=>{e[y]&&d.append(y,e[y])});const S=(a=D.form)!=null&&a.id?await x(e==null?void 0:e.id,e):await V(d);w.success(L("Data_stored_successfully"))}catch(d){Object.assign(l,(n=(t=d.response)==null?void 0:t.data)==null?void 0:n.errors),w.error(L("Dashboard_Error"))}finally{g.value=!1}}function $(){Object.assign(l,{edu_type:[],specialty:[],department:[],academic_year:[],type:[],name:[]})}return(a,t)=>{const n=h("a-select"),d=h("a-form-item"),S=h("a-date-picker"),y=h("a-input"),A=B;return u(),m("form",{onSubmit:q(O,["prevent"])},[r("div",J,[r("div",X,[s(d,{class:"mb-3"},{default:p(()=>[r("label",ee,i(a.$t("Hei_department")),1),s(n,{"filter-option":f(b).filterOptionByName,"show-search":"",value:e.department_id,"onUpdate:value":t[0]||(t[0]=o=>e.department_id=o),"field-names":{value:"id",label:"name"},options:c.optionsDepartment},null,8,["filter-option","value","options"]),l.department_id?(u(),m("span",ae,i(l.department_id[0]),1)):_("",!0)]),_:1}),s(d,{class:"mb-3"},{default:p(()=>[r("label",te,i(a.$t("Education_Year_Name")),1),s(n,{"filter-option":f(b).filterOptionByName,"show-search":"",value:e.academic_year_id,"onUpdate:value":t[1]||(t[1]=o=>e.academic_year_id=o),"field-names":{value:"id",label:"name"},options:c.optionsAcademicYearList},null,8,["filter-option","value","options"]),l.academic_year_id?(u(),m("span",le,i(l.academic_year_id[0]),1)):_("",!0)]),_:1}),s(d,{class:"mb-3"},{default:p(()=>[r("label",se,i(a.$t("Student")),1),s(n,{"filter-option":f(b).filterOptionByFullName,"show-search":"",value:e.student_id,"onUpdate:value":t[2]||(t[2]=o=>e.student_id=o),"field-names":{value:"id",label:"fullname"},disabled:!e.academic_group_id||!e.academic_year_id,options:c.allStudents},null,8,["filter-option","value","disabled","options"]),l.student_id?(u(),m("span",ie,i(l.student_id[0]),1)):_("",!0)]),_:1}),s(d,{class:"mb-3",name:"nameFaculty"},{default:p(()=>[r("label",oe,i(a.$t("SAC_decision_date")),1),s(S,{value:e.date,"onUpdate:value":t[3]||(t[3]=o=>e.date=o),"value-format":"YYYY-MM-DD",placeholder:a.$t("select_the_data")},null,8,["value","placeholder"]),l.date?(u(),m("span",ne,i(l.date[0]),1)):_("",!0)]),_:1})]),r("div",de,[s(d,{class:"mb-3"},{default:p(()=>[r("label",re,i(a.$t("Education_Type")),1),s(n,{"filter-option":f(b).filterOptionByName,"show-search":"",value:e.edu_type_id,"onUpdate:value":t[4]||(t[4]=o=>e.edu_type_id=o),"field-names":{value:"id",label:"name"},options:c.optionsEduTypeList},null,8,["filter-option","value","options"]),l.edu_type_id?(u(),m("span",ce,i(l.edu_type_id[0]),1)):_("",!0)]),_:1}),s(d,{class:"mb-3"},{default:p(()=>[r("label",ue,i(a.$t("Group")),1),s(n,{"filter-option":f(b).filterOptionByName,"show-search":"",value:e.academic_group_id,"onUpdate:value":t[5]||(t[5]=o=>e.academic_group_id=o),"field-names":{value:"id",label:"name"},options:c.academicGroupsList},null,8,["filter-option","value","options"]),l.academic_group_id?(u(),m("span",me,i(l.academic_group_id[0]),1)):_("",!0)]),_:1}),s(d,{class:"mb-3"},{default:p(()=>[r("label",pe,i(a.$t("certificate_Committee")),1),s(n,{"filter-option":f(b).filterOptionByName,"show-search":"",class:"form--item",value:e.dak_id,"onUpdate:value":t[6]||(t[6]=o=>e.dak_id=o),options:c.optionsAllDak,"field-names":{value:"id",label:"name"}},null,8,["filter-option","value","options"]),l.dak_id?(u(),m("span",_e,i(l.dak_id[0]),1)):_("",!0)]),_:1}),s(d,{class:"mb-3"},{default:p(()=>[r("label",fe,i(a.$t("Graduate_Qualifying_Work")),1),s(n,{"filter-option":f(b).filterOptionByTheme,"show-search":"",value:e.theme_id,"onUpdate:value":t[7]||(t[7]=o=>e.theme_id=o),"field-names":{value:"id",label:"theme"},options:c.optionsDak},null,8,["filter-option","value","options"]),l.theme_id?(u(),m("span",be,i(l.theme_id[0]),1)):_("",!0)]),_:1})]),r("div",ye,[s(d,{class:"mb-3",name:"nameSpecial"},{default:p(()=>[r("label",ve,i(a.$t("by_speciality")),1),s(n,{"filter-option":f(b).filterOptionByName,"show-search":"",value:e.specialty_id,"onUpdate:value":t[8]||(t[8]=o=>e.specialty_id=o),"field-names":{value:"id",label:"name"},options:c.optionsSpecialList},null,8,["filter-option","value","options"]),l.specialty_id?(u(),m("span",he,i(l.specialty_id[0]),1)):_("",!0)]),_:1}),s(d,{class:"mb-3",name:"nameSpecial"},{default:p(()=>[r("label",ke,i(a.$t("Subjects")),1),s(n,{"filter-option":f(b).filterOptionByName,"show-search":"",value:e.subject_id,"onUpdate:value":t[9]||(t[9]=o=>e.subject_id=o),disabled:!e.academic_year_id||!e.academic_group_id,"field-names":{value:"id",label:"name"},options:c.getListSubjectsAll},null,8,["filter-option","value","disabled","options"]),l.subject_id?(u(),m("span",ge,i(l.subject_id[0]),1)):_("",!0)]),_:1}),s(d,{class:"mb-3",name:"nameFaculty"},{default:p(()=>[r("label",we,i(a.$t("DAK_qarori_raqami")),1),s(y,{value:e.dak_order,"onUpdate:value":t[10]||(t[10]=o=>e.dak_order=o),class:"form--item"},null,8,["value"]),l.dak_order?(u(),m("span",Le,i(l.dak_order[0]),1)):_("",!0)]),_:1}),r("div",De,[s(d,{class:"mb-3 col-md-6",name:"nameFaculty"},{default:p(()=>[r("label",Se,i(a.$t("Score")),1),s(y,{class:"form--item",value:e.ball,"onUpdate:value":t[11]||(t[11]=o=>e.ball=o)},null,8,["value"]),l.ball?(u(),m("span",je,i(l.ball[0]),1)):_("",!0)]),_:1}),s(d,{class:"mb-3 col-md-6",name:"nameFaculty"},{default:p(()=>[r("label",Oe,i(a.$t("Grade")),1),s(y,{class:"form--item",value:e.mark,"onUpdate:value":t[12]||(t[12]=o=>e.mark=o)},null,8,["value"]),l.mark?(u(),m("span",$e,i(l.mark[0]),1)):_("",!0)]),_:1})])])]),r("div",Ae,[s(A,{loading:g.value,icon:"content-save"},null,8,["loading"])])],32)}}});export{Fe as _};
