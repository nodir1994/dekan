import{d as H,B as L,bO as Q,a as G,u as W,n as P,bq as O,Z as U,c as X,y as x,w as ee,i as E,o as i,e as _,f as t,t as a,j as d,k as c,l as u,s as S,g as w,q as te,bs as V,bH as A,F as se,r as ae,z as j,v as le}from"./index.3390162f.js";import{b as ne,u as oe,c as de,d as ie,e as re,f as ue}from"./transcript.605beb58.js";import{a6 as _e}from"./index.30e99442.js";import{h as ce}from"./helper.569bc08f.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const pe={class:"modal-title modal-data-tip mb-2"},me={class:"row"},ve={class:"col-md-3"},ye={for:""},fe={key:0,class:"text-danger small"},be={class:"col-md-3"},he={for:""},ge={key:0,class:"text-danger small"},ke={class:"col-md-3"},$e={for:""},Se={key:0,class:"text-danger small"},we={class:"col-md-3"},Ue={for:""},je={key:0,class:"text-danger small"},Ye={for:""},Ne={key:0,class:"text-danger small"},Te={class:"modal-title modal-data-tip mb-2"},Ce={class:"row"},Ee={class:"col-md-3"},De={for:""},Be={key:0,class:"text-danger small"},Me={for:""},Ie={key:0,class:"text-danger small"},Oe={class:"col-md-3"},qe={for:""},ze={key:0,class:"text-danger small"},Fe={class:"col-md-3"},Re={for:""},Ve={key:0,class:"text-danger small"},Ae={class:"col-md-3"},He={for:""},Le={key:0,class:"text-danger small"},Ge={class:"modal-title modal-data-tip mb-2"},Pe={class:"row"},Ze={class:"col-md-3"},Je={for:""},Ke={key:0,class:"text-danger small"},Qe={class:"col-md-3"},We={for:""},Xe={key:0,class:"text-danger small"},xe={class:"col-md-3"},et={for:""},tt={key:0,class:"text-danger small"},st={class:"col-md-3"},at={for:""},lt={key:0,class:"text-danger small"},nt={class:"col-md-3"},ot={for:""},dt={key:0,class:"text-danger small"},it={class:"col-md-3"},rt={for:""},ut={key:0,class:"text-danger small"},_t={for:""},ct={key:0,class:"text-danger small"},pt=t("h5",{class:"modal-title modal-data-tip mb-2"},"Transkript ma'lumotlari",-1),mt={class:"row"},vt={class:"col-md-3"},yt={for:""},ft={key:0,class:"text-danger small"},bt={class:"col-md-3"},ht={for:""},gt={key:0,class:"text-danger small"},kt={class:"col-md-3"},$t={for:"division-name-select"},St={key:0,class:"text-danger small"},wt={class:"top__system__raiting"},Ut={class:"modal-title modal-data-tip mb-2"},jt={class:"table-responsive"},Yt={class:"table-row-transkript-id"},Nt={class:"form-check"},Tt=t("th",null,"#",-1),Ct={class:"form-check"},Et=["value"],Dt={key:0,class:"d-flex justify-content-end"},Bt=t("i",{class:"mdi mdi-content-save font-size-14 align-middle me-1"},null,-1),Mt={class:"btns c-save",type:"submit"},It=t("i",{class:"mdi mdi-content-save font-size-14 align-middle me-1"},null,-1),Ot={key:1,class:"d-flex justify-content-end"},qt={class:"btns c-save",type:"submit"},zt=t("i",{class:"mdi mdi-content-save font-size-14 align-middle me-1"},null,-1),Ft=H({__name:"TranscriptForm",props:{form:{}},async setup(q){var C,M,z,F;let f,g;const k=L(!1),b=Q(),{t:v}=G(),Y=W(),N=q,D=P(),h=(M=(C=D.query)==null?void 0:C.id)!=null?M:null;(F=(z=D.query)==null?void 0:z.student_id)!=null,console.log({props:N},"salom",{paramsID:h},"alik");const I=([f,g]=O(()=>_e().then(n=>n.result.map(s=>({id:s==null?void 0:s.semester,name:(s==null?void 0:s.semester)+"-"+v("semester_number")})))),f=await f,g(),f),y=U([]),T=X({get(){var n,s,r;return((n=e==null?void 0:e.transcript_subject_ids)==null?void 0:n.length)===((s=y==null?void 0:y.value)==null?void 0:s.length)&&((r=y==null?void 0:y.value)==null?void 0:r.length)>0},set(n){n?e.transcript_subject_ids=y.value:e.transcript_subject_ids=[]}});U({});const e=U({student_id:null,number:null,given_date:null,token:null,semester:null,full_name:null,label:null,birthdate:null,academic_group:null,university:null,faculty:null,rector:null,dean:null,edu_type:null,edu_form:null,shifr:null,intered_year:null,graduation_year:null,specialty:null,transcript_subject_ids:[]}),o=U({student_id:[],number:[],given_date:[],token:[],semester:[],full_name:[],label:[],birthdate:[],academic_group:[],university:[],faculty:[],rector:[],dean:[],edu_type:[],edu_form:[],shifr:[],intered_year:[],graduation_year:[],specialty:[]});async function B(){var n,s;try{k.value=!0,$(),e.university?e.eduni_name=e.university:e.eduni_name=e.eduni_name,e.academic_group?e.group=e.academic_group:e.group=e.group,e.specialty?e.speciality=e.specialty:e.speciality=e.speciality;const r=h?await oe(e==null?void 0:e.id,e):await de(e);h?b.success(v("Data_stored_successfully")):(b.success(v("success_created")),await Y.push("/archive/transcript"))}catch(r){Object.assign(o,(s=(n=r.response)==null?void 0:n.data)==null?void 0:s.errors),b.error(v("Dashboard_Error"))}finally{k.value=!1}}async function m(){var n,s;try{k.value=!0;const r=await ie(e==null?void 0:e.id);b.success(v("Delete_message.Removed")),await Y.push("/archive/transcript")}catch(r){Object.assign(o,(s=(n=r.response)==null?void 0:n.data)==null?void 0:s.errors),b.error(v("Dashboard_Error"))}finally{k.value=!1}}function $(){Object.assign(o,{student_id:[],number:[],given_date:[],token:[],semester:[],full_name:[],label:[],birthdate:[],academic_group:[],university:[],faculty:[],rector:[],dean:[],edu_type:[],edu_form:[],shifr:[],intered_year:[],graduation_year:[],specialty:[]})}return x(()=>{Object.assign(e,N.form)}),ee(()=>e.semester,async n=>{let s=await ne(n,e.student_id);y.value=s==null?void 0:s.result.map(r=>r.id),e.transcript_subjects=s==null?void 0:s.result}),(n,s)=>{const r=E("a-input"),p=E("a-form-item"),R=E("a-date-picker"),Z=E("a-select");return i(),_("form",{onSubmit:le(B,["prevent"])},[t("h5",pe,a(n.$t("Student_information")),1),t("div",me,[t("div",ve,[d(p,null,{default:c(()=>[t("label",ye,a(n.$t("Student_Name")),1),d(r,{disabled:"",value:e.full_name,"onUpdate:value":s[0]||(s[0]=l=>e.full_name=l)},null,8,["value"]),o.full_name?(i(),_("span",fe,a(o.full_name[0]),1)):u("",!0)]),_:1})]),t("div",be,[d(p,null,{default:c(()=>[t("label",he,a(n.$t("Student_Status_Label")),1),d(r,{disabled:"",value:e.label,"onUpdate:value":s[1]||(s[1]=l=>e.label=l)},null,8,["value"]),o.label?(i(),_("span",ge,a(o.label[0]),1)):u("",!0)]),_:1})]),t("div",ke,[d(p,null,{default:c(()=>[t("label",$e,a(n.$t("Student_Birthday")),1),d(R,{disabled:"",placeholder:"YYYY-MM-DD",type:"date","value-format":"YYYY-MM-DD",value:e.birthdate,"onUpdate:value":s[2]||(s[2]=l=>e.birthdate=l)},null,8,["value"]),o.birthdate?(i(),_("span",Se,a(o.birthdate[0]),1)):u("",!0)]),_:1})]),t("div",we,[e.academic_group?(i(),S(p,{key:0},{default:c(()=>[t("label",Ue,a(n.$t("Group_name")),1),d(r,{disabled:"",value:e.academic_group,"onUpdate:value":s[3]||(s[3]=l=>e.academic_group=l)},null,8,["value"]),o.academic_group?(i(),_("span",je,a(o.academic_group[0]),1)):u("",!0)]),_:1})):u("",!0),e.group?(i(),S(p,{key:1},{default:c(()=>[t("label",Ye,a(n.$t("Group_name")),1),d(r,{disabled:"",value:e.group,"onUpdate:value":s[4]||(s[4]=l=>e.group=l)},null,8,["value"]),o.group?(i(),_("span",Ne,a(o.group[0]),1)):u("",!0)]),_:1})):u("",!0)])]),t("h5",Te,a(n.$t("HEI_information")),1),t("div",Ce,[t("div",Ee,[e.university?(i(),S(p,{key:0},{default:c(()=>[t("label",De,a(n.$t("Name_of_HEI")),1),d(r,{disabled:"",value:e.university,"onUpdate:value":s[5]||(s[5]=l=>e.university=l)},null,8,["value"]),o.university?(i(),_("span",Be,a(o.university[0]),1)):u("",!0)]),_:1})):u("",!0),e.eduni_name?(i(),S(p,{key:1},{default:c(()=>[t("label",Me,a(n.$t("Name_of_HEI")),1),d(r,{disabled:"",value:e.eduni_name,"onUpdate:value":s[6]||(s[6]=l=>e.eduni_name=l)},null,8,["value"]),o.eduni_name?(i(),_("span",Ie,a(o.eduni_name[0]),1)):u("",!0)]),_:1})):u("",!0)]),t("div",Oe,[d(p,null,{default:c(()=>[t("label",qe,a(n.$t("Faculty_Name")),1),d(r,{disabled:"",value:e.faculty,"onUpdate:value":s[7]||(s[7]=l=>e.faculty=l)},null,8,["value"]),o.faculty?(i(),_("span",ze,a(o.faculty[0]),1)):u("",!0)]),_:1})]),t("div",Fe,[d(p,null,{default:c(()=>[t("label",Re,a(n.$t("Rector")),1),d(r,{disabled:"",value:e.rector,"onUpdate:value":s[8]||(s[8]=l=>e.rector=l)},null,8,["value"]),o.rector?(i(),_("span",Ve,a(o.rector[0]),1)):u("",!0)]),_:1})]),t("div",Ae,[d(p,null,{default:c(()=>[t("label",He,a(n.$t("rolName")),1),d(r,{disabled:"",value:e.dean,"onUpdate:value":s[9]||(s[9]=l=>e.dean=l)},null,8,["value"]),o.dean?(i(),_("span",Le,a(o.dean[0]),1)):u("",!0)]),_:1})])]),t("h5",Ge,a(n.$t("Education_information")),1),t("div",Pe,[t("div",Ze,[d(p,null,{default:c(()=>[t("label",Je,a(n.$t("Education_Type")),1),d(r,{disabled:"",value:e.edu_type,"onUpdate:value":s[10]||(s[10]=l=>e.edu_type=l)},null,8,["value"]),o.edu_type?(i(),_("span",Ke,a(o.edu_type[0]),1)):u("",!0)]),_:1})]),t("div",Qe,[d(p,null,{default:c(()=>[t("label",We,a(n.$t("Edu_form")),1),d(r,{disabled:"",value:e.edu_form,"onUpdate:value":s[11]||(s[11]=l=>e.edu_form=l)},null,8,["value"]),o.edu_form?(i(),_("span",Xe,a(o.edu_form[0]),1)):u("",!0)]),_:1})]),t("div",xe,[d(p,null,{default:c(()=>[t("label",et,a(n.$t("Specialty_code")),1),d(r,{disabled:"",value:e.shifr,"onUpdate:value":s[12]||(s[12]=l=>e.shifr=l)},null,8,["value"]),o.shifr?(i(),_("span",tt,a(o.shifr[0]),1)):u("",!0)]),_:1})]),t("div",st,[d(p,null,{default:c(()=>[t("label",at,a(n.$t("Year_Of_Entered")),1),d(r,{value:e.intered_year,"onUpdate:value":s[13]||(s[13]=l=>e.intered_year=l)},null,8,["value"]),o.intered_year?(i(),_("span",lt,a(o.intered_year[0]),1)):u("",!0)]),_:1})]),t("div",nt,[d(p,null,{default:c(()=>[t("label",ot,a(n.$t("Year_Of_Graduated")),1),d(r,{value:e.graduation_year,"onUpdate:value":s[14]||(s[14]=l=>e.graduation_year=l)},null,8,["value"]),o.graduation_year?(i(),_("span",dt,a(o.graduation_year[0]),1)):u("",!0)]),_:1})]),t("div",it,[e.specialty?(i(),S(p,{key:0},{default:c(()=>[t("label",rt,a(n.$t("Specialty_Name")),1),d(r,{disabled:"",value:e.specialty,"onUpdate:value":s[15]||(s[15]=l=>e.specialty=l)},null,8,["value"]),o.specialty?(i(),_("span",ut,a(o.specialty[0]),1)):u("",!0)]),_:1})):u("",!0),e.speciality?(i(),S(p,{key:1},{default:c(()=>[t("label",_t,a(n.$t("Specialty_Name")),1),d(r,{disabled:"",value:e.speciality,"onUpdate:value":s[16]||(s[16]=l=>e.speciality=l)},null,8,["value"]),o.speciality?(i(),_("span",ct,a(o.speciality[0]),1)):u("",!0)]),_:1})):u("",!0)])]),pt,t("div",mt,[t("div",vt,[d(p,null,{default:c(()=>[t("label",yt,a(n.$t("academic_Register_Number")),1),d(r,{value:e.number,"onUpdate:value":s[17]||(s[17]=l=>e.number=l)},null,8,["value"]),o.number?(i(),_("span",ft,a(o.number[0]),1)):u("",!0)]),_:1})]),t("div",bt,[d(p,null,{default:c(()=>[t("label",ht,a(n.$t("academic_Register_Date")),1),d(R,{placeholder:"YYYY-MM-DD",type:"date","value-format":"YYYY-MM-DD",value:e.given_date,"onUpdate:value":s[18]||(s[18]=l=>e.given_date=l)},null,8,["value"]),o.given_date?(i(),_("span",gt,a(o.given_date[0]),1)):u("",!0)]),_:1})]),t("div",kt,[d(p,{class:"mb-3"},{default:c(()=>[t("label",$t,a(n.$t("Choose_Semester")),1),d(Z,{"filter-option":w(ce).filterOptionByName,"show-search":"",class:"form--item",value:e.semester,"onUpdate:value":s[19]||(s[19]=l=>e.semester=l),allowClear:"",disabled:w(h),options:w(I),"field-names":{value:"id",label:"name"},placeholder:w(v)("Select_payment_form")},null,8,["filter-option","value","disabled","options","placeholder"]),o.semester?(i(),_("span",St,a(o.semester[0]),1)):u("",!0)]),_:1})])]),t("div",wt,[t("h5",Ut,[t("b",null,a(n.$t("Curriculum_Subject")),1),t("span",null,a(e==null?void 0:e.rating_system),1)])]),t("div",jt,[e.semester?(i(),_("table",{key:0,class:te(["content-table mb-3",w(h)?"edit":"create"])},[t("thead",null,[t("tr",Yt,[t("th",null,[t("div",Nt,[V(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[20]||(s[20]=l=>T.value=l)},null,512),[[A,T.value]])])]),Tt,t("th",null,a(n.$t("Subjects")),1),t("th",null,a(n.$t("Semester_Name")),1),t("th",null,a(n.$t("Total_Acload")),1),t("th",null,a(n.$t("Credit")),1),t("th",null,a(n.$t("Score")),1),t("th",null,a(n.$t("gradeSome")),1)])]),t("tbody",null,[(i(!0),_(se,null,ae(e==null?void 0:e.transcript_subjects,(l,J)=>(i(),_("tr",{class:"table-row-transkript-id",key:l==null?void 0:l.id},[t("td",null,[t("div",Ct,[V(t("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":s[21]||(s[21]=K=>e.transcript_subject_ids=K),value:l==null?void 0:l.id},null,8,Et),[[A,e.transcript_subject_ids]])])]),t("td",null,a(J+1),1),t("td",null,a(l.subjec),1),t("td",null,a(l.semester)+" - "+a(n.$t("semester")),1),t("td",null,a(l==null?void 0:l.load),1),t("td",null,a(l==null?void 0:l.credit),1),t("td",null,a(l==null?void 0:l.ball),1),t("td",null,a(l==null?void 0:l.grade),1)]))),128))])],2)):u("",!0)]),w(h)?(i(),_("div",Dt,[t("button",{class:"btns c-delete me-2",onClick:s[22]||(s[22]=l=>m()),type:"button"},[Bt,j(" "+a(n.$t("Delete")),1)]),t("button",Mt,[It,j(" "+a(n.$t("Save")),1)])])):(i(),_("div",Ot,[t("button",qt,[zt,j(" "+a(n.$t("Create")),1)])]))],32)}}});const Rt={pagetitle:"`Transkript yaratish`",class:"createStudentPage adf"},Vt={class:"card panel-header-bg"},At={class:"card-body"},Ht={class:"panel-header"},Lt={class:"card-title"},Gt={class:"panel-toggles"},Pt=t("i",{class:"mdi mdi-arrow-left font-size-14 align-middle me-1 me-1"},null,-1),Zt={class:"card"},Jt={class:"card-body"},ts=H({__name:"edit",async setup(q){var T,e,o,B;let f,g;G();const k=L(!1),b=P(),v=U({student_id:null,number:null,given_date:null,token:null,semester:null,full_name:null,label:null,birthdate:null,academic_group:null,eduni_name:null,faculty:null,rector:null,dean:null,edu_type:null,edu_form:null,shifr:null,intered_year:null,graduation_year:null,specialty:null}),Y=U({student_id:[],number:[],given_date:[],token:[],semester:[],full_name:[],label:[],birthdate:[],academic_group:[],eduni_name:[],faculty:[],rector:[],dean:[],edu_type:[],edu_form:[],shifr:[],intered_year:[],graduation_year:[],specialty:[]}),N=(e=(T=b.query)==null?void 0:T.id)!=null?e:null,D=(B=(o=b.query)==null?void 0:o.student_id)!=null?B:null;async function h(m){const $=await re(m);Object.assign(v,$.result)}async function I(m){const $=await ue(m);Object.assign(v,$.result)}N?([f,g]=O(()=>h(N)),await f,g()):([f,g]=O(()=>I(D)),await f,g());function y(m){Y[m]=[]}return(m,$)=>{const C=E("router-link"),M=Ft;return i(),_("div",Rt,[t("div",Vt,[t("div",At,[t("div",Ht,[t("h5",Lt,[d(C,{to:"/archive/transcript"},{default:c(()=>[j(a(m.$t("archive_Transcript"))+" / ",1)]),_:1}),j(" "+a(m.$t("archive_Transcript_Edit")),1)]),t("div",Gt,[d(C,{to:"/archive/transcript",class:"btns black-c py-1.5 px-4 d-inline-block"},{default:c(()=>[Pt,j(a(m.$t("Prev")),1)]),_:1})])])])]),t("div",Zt,[t("div",Jt,[d(M,{form:v,errors:Y,"is-loading":k.value,onSubmit:m.onSubmit,onClearError:y},null,8,["form","errors","is-loading","onSubmit"])])])])}}});export{ts as default};
