import{_ as K}from"./SubmitButton.vue_vue_type_script_setup_true_lang.fe21b651.js";import{d as A,a as R,bO as q,B as b,Z as I,y as Q,bn as X,i as $,o as r,e as c,f as e,t as s,v as x,j as _,l as v,z as L,bS as H,h as ee,c as te,bq as O,w as F,aU as se,b6 as ae,k as Y,bs as oe,g as N,F as ne,r as le,bU as V,s as ie,aR as de}from"./index.3390162f.js";import{f as re,u as ce,c as _e,a as ue,d as pe,b as me}from"./advenced-training.b7657279.js";import{i as ve,h as he,t as ge,f as fe,a as ye}from"./index.30e99442.js";import{_ as be}from"./Pagination.f4a9fc5d.js";import{S as $e}from"./sweetalert2.all.fdef424e.js";import{h as we}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./moment.2cad4b18.js";const ke={id:"advencedTrainingFormModal",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},Ce={class:"modal-dialog"},De={class:"modal-content"},Ye={class:"modal-header bg-card-header"},Me={class:"modal-title",id:"myModalLabel"},Te=e("i",{class:"mdi mdi-close font-size-18"},null,-1),Be=[Te],Pe={class:"modal-body"},Ue={class:"row"},Ee={class:"col-md-6"},Le={class:"mb-3"},Ie={for:"division-name-select",class:"form-label"},Fe={key:0,class:"text-danger small"},Ne={class:"col-md-6"},Se={class:"mb-3"},je={for:"division-name-select",class:"form-label"},ze={key:0,class:"text-danger small"},Oe={class:"col-md-6"},Ve={class:"mb-3"},Ae={for:"division-name-input",class:"form-label"},Re={key:0,class:"text-danger small"},qe={class:"col-md-3 mb-3"},He={for:"division-name-select",class:"form-label"},We={key:0,class:"text-danger small"},Ze={class:"col-md-3 mb-3"},Ge={for:"division-name-input",class:"form-label"},Je={key:0,class:"text-danger small"},Ke={class:"col-md-3 mb-3"},Qe={for:"division-name-input",class:"form-label"},Xe={key:0,class:"text-danger small"},xe={class:"col-md-3 mb-3"},et={for:"division-name-input",class:"form-label"},tt={key:0,class:"text-danger small"},st={class:"col-md-6 mb-3"},at={for:"division-name-input",class:"form-label"},ot={key:0,class:"text-danger small"},nt={class:"d-flex justify-content-end"},lt={type:"button",class:"btns c-cancel me-1","data-bs-dismiss":"modal"},it=e("i",{class:"mdi mdi-close font-size-14 align-middle me-1"},null,-1),dt=A({__name:"AdvencedTrainingFormModal",props:{advencedTrainingId:null},emits:["update:list","close"],setup(S,{emit:f}){const h=S,k=f,{t:u}=R(),M=q(),w=b(!1),C=b([]),U=b([]),T=b([]),d=I({employee_id:null,position_id:null,training_place_id:null,topic:null,year:null,date_start:null,date_end:null,document:""}),o=I({employee_id:[],position_id:[],training_place_id:[],topic:[],year:[],date_start:[],date_end:[],document:[]});b(),Q(async()=>{const l=document.getElementById("advencedTrainingFormModal");l==null||l.addEventListener("hidden.bs.modal",t=>{B(),g(),k("close")}),C.value=await ve().then(t=>t.result.data.map(n=>({id:n.employee_id,surname:n.fullname}))),U.value=await he().then(t=>t.result),T.value=await ge().then(t=>t.result)}),X(async()=>{if(h.advencedTrainingId){const l=await re(h.advencedTrainingId);console.log("res",l),Object.assign(d,l.result)}});async function p(){var l,t;try{w.value=!0,B();const n=h.advencedTrainingId?await ce(h.advencedTrainingId,d):await _e(d);M.success(u("Data_stored_successfully")),k("update:list"),E()}catch(n){Object.assign(o,(t=(l=n.response)==null?void 0:l.data)==null?void 0:t.errors),M.error(u("Failed")+": "+n.message)}finally{w.value=!1}}function g(){Object.assign(d,{employee_id:null,position_id:null,training_place_id:null,topic:null,year:null,date_start:null,date_end:null,document:null})}function B(){Object.assign(o,{employee_id:[],position_id:[],training_place_id:[],topic:[],year:[],date_start:[],date_end:[],document:[]})}function E(){H.getOrCreateInstance("#advencedTrainingFormModal").hide()}function m(l){o[l]=""}return(l,t)=>{const n=$("a-select"),y=$("a-input"),D=$("a-date-picker"),P=K;return r(),c("div",ke,[e("div",Ce,[e("div",De,[e("div",Ye,[e("h5",Me,s(l.$t("Education_Year_Name")),1),e("button",{type:"button",class:"btn-close",onClick:E},Be)]),e("div",Pe,[e("form",{onSubmit:x(p,["prevent"])},[e("div",Ue,[e("div",Ee,[e("div",Le,[e("label",Ie,s(l.$t("Employee")),1),_(n,{value:d.employee_id,"onUpdate:value":t[0]||(t[0]=i=>d.employee_id=i),options:C.value,"field-names":{value:"id",label:"surname"},placeholder:l.$t("Choose"),onChange:t[1]||(t[1]=i=>m("employee_id"))},null,8,["value","options","placeholder"]),o.employee_id?(r(),c("span",Fe,s(o.employee_id[0]),1)):v("",!0)])]),e("div",Ne,[e("div",Se,[e("label",je,s(l.$t("by_Post")),1),_(n,{value:d.position_id,"onUpdate:value":t[2]||(t[2]=i=>d.position_id=i),options:U.value.data,"field-names":{value:"id",label:"name"},placeholder:l.$t("Choose"),onChange:t[3]||(t[3]=i=>m("position_id"))},null,8,["value","options","placeholder"]),o.position_id?(r(),c("span",ze,s(o.position_id[0]),1)):v("",!0)])]),e("div",Oe,[e("div",Ve,[e("label",Ae,s(l.$t("Professional_development_theme")),1),_(y,{value:d.topic,"onUpdate:value":t[4]||(t[4]=i=>d.topic=i),onChange:t[5]||(t[5]=i=>m("topic"))},null,8,["value"]),o.topic?(r(),c("span",Re,s(o.topic[0]),1)):v("",!0)])]),e("div",qe,[e("label",He,s(l.$t("Training_Place")),1),_(n,{value:d.training_place_id,"onUpdate:value":t[6]||(t[6]=i=>d.training_place_id=i),options:T.value,"field-names":{value:"id",label:"name"},placeholder:l.$t("Choose"),onChange:t[7]||(t[7]=i=>m("training_place_id"))},null,8,["value","options","placeholder"]),o.training_place_id?(r(),c("span",We,s(o.training_place_id[0]),1)):v("",!0)]),e("div",Ze,[e("label",Ge,s(l.$t("year")),1),_(y,{value:d.year,"onUpdate:value":t[8]||(t[8]=i=>d.year=i),onChange:t[9]||(t[9]=i=>m("year")),type:"number"},null,8,["value"]),o.year?(r(),c("span",Je,s(o.year[0]),1)):v("",!0)]),e("div",Ke,[e("label",Qe,s(l.$t("Choice_Start_Date")),1),_(D,{placeholder:"YYYY-MM-DD",value:d.date_start,"onUpdate:value":t[10]||(t[10]=i=>d.date_start=i),type:"date","value-format":"YYYY-MM-DD",onChange:t[11]||(t[11]=i=>m("date_start"))},null,8,["value"]),o.date_start?(r(),c("span",Xe,s(o.date_start[0]),1)):v("",!0)]),e("div",xe,[e("label",et,s(l.$t("End_date")),1),_(D,{placeholder:"YYYY-MM-DD",type:"date",value:d.date_end,"onUpdate:value":t[12]||(t[12]=i=>d.date_end=i),"value-format":"YYYY-MM-DD",onChange:t[13]||(t[13]=i=>m("date_end"))},null,8,["value"]),o.date_end?(r(),c("span",tt,s(o.date_end[0]),1)):v("",!0)]),e("div",st,[e("label",at,s(l.$t("Professional_development_document")),1),_(y,{value:d.document,"onUpdate:value":t[14]||(t[14]=i=>d.document=i),onChange:t[15]||(t[15]=i=>m("document"))},null,8,["value"]),o.document?(r(),c("span",ot,s(o.document[0]),1)):v("",!0)])]),e("div",nt,[e("button",lt,[it,L(" "+s(l.$t("Close")),1)]),_(P,{loading:w.value},null,8,["loading"])])],32)])])])])}}}),rt={pagetitle:"'Malaka oshirish'",class:"advenced-training-page"},ct={class:"card panel-header-bg"},_t={class:"card-body"},ut={class:"panel-header"},pt={class:"card-title"},mt={class:"panel-toggles"},vt=e("i",{class:"mdi mdi-account-plus font-size-14 align-middle me-1"},null,-1),ht={class:"btns c-save py-1.5 px-4 me-3",type:"button"},gt=e("i",{class:"mdi mdi-text-search font-size-14 align-middle me-2"},null,-1),ft={class:"filterBlock"},yt={class:"btns c-filter py-1.5 px-4"},bt=e("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),$t={class:"collapse__block"},wt={class:"row"},kt={class:"my-2 col-md-4 form--item"},Ct={for:"yu"},Dt={class:"my-2 col-md-4 form--item"},Yt={for:"yu"},Mt={class:"my-2 col-md-4 form--item"},Tt={for:"yu"},Bt={class:"card"},Pt={class:"card-body"},Ut={key:0,class:"table-responsive"},Et={class:"content-table"},Lt={class:"table-row d-grid w-100"},It=e("th",null,"#",-1),Ft={key:0},Nt={key:1},St={key:0},jt={key:1},zt={class:"gridjs-td"},Ot={class:"list-inline mb-0"},Vt={class:"list-inline-item"},At={class:"edit__project"},Rt=["onClick"],qt=e("i",{class:"mdi mdi-pencil font-size-18 text-primary"},null,-1),Ht=[qt],Wt={class:"list-inline-item"},Zt={class:"delete__project"},Gt=["onClick"],Jt=e("i",{class:"mdi mdi-delete font-size-18"},null,-1),Kt=[Jt],Qt={class:"form-check form-switch my-auto"},Xt=["checked","disabled","onChange"],xt={key:1},es={class:"text-center"},ts={class:"text-center mb-0"},ss={key:0,class:"element-count mb-2"},us=A({__name:"index",async setup(S){let f,h;const k=b(null),{t:u}=R(),M=q(),w=b(!1),C=ee(),U=te(()=>{var t,n;return(n=(t=C==null?void 0:C.user)==null?void 0:t.faculty)==null?void 0:n.name}),T=b([]),d=([f,h]=O(()=>ye().then(t=>t.result.data.map(n=>({id:n.year,name:n.year+"-"+u("year")})))),f=await f,h(),f),o=I({current_page:1,data:[],links:[]}),p=I({department_id:null,year:null,name:"",page:1,per_page:we.pagePer});[f,h]=O(()=>g()),await f,h(),F(()=>o.current_page,async t=>{Number(t)&&(p.page=Number(t),await g())}),F(()=>p.department_id,async(t,n)=>{await g()}),F(()=>p.year,async(t,n)=>{await g()}),se(async()=>{const t=await fe();T.value=t.result});async function g(){const t=await ue(p);Object.assign(o,t.result)}function B(t){k.value=t,H.getOrCreateInstance("#advencedTrainingFormModal").show()}async function E(t){const n=$e.mixin({customClass:{confirmButton:"btn btn-danger me-2",cancelButton:"btn btn-success"},buttonsStyling:!1});try{(await n.fire({title:u("Delete_message.Are_you_sure"),text:u("Delete_message.Action_irreversible"),icon:"warning",confirmButtonText:u("Delete_message.Yes_Delete"),cancelButtonText:u("Delete_message.Yo_Cancel"),showCancelButton:!0})).isConfirmed&&(await pe(t),await g(),n.fire(u("Delete_message.Removed"),u("Delete_message.Record_deleted_successfull"),"success"))}catch(y){n.fire(u("Dashboard_Error"),y.message,"error")}}function m(){k.value=null}async function l(t){try{w.value=!0,await me(t),await g(),M.success(u("Data_stored_successfully"))}catch(n){M.error(n.message)}finally{w.value=!1}}return(t,n)=>{const y=$("router-link"),D=$("a-select"),P=$("a-space"),i=$("b-card"),W=$("b-collapse"),Z=be,G=dt,J=ae("b-toggle");return r(),c("div",rt,[e("div",ct,[e("div",_t,[e("div",ut,[e("h5",pt,s(t.$t("Employee_Professional_Development")),1),e("div",mt,[e("button",{class:"btns c-save py-1.5 px-4 me-3",type:"button",onClick:n[0]||(n[0]=a=>B(null))},[vt,L(s(t.$t("add")),1)]),_(y,{to:"/employee/advenced-training/monitoring"},{default:Y(()=>[e("button",ht,[gt,L(" "+s(t.$t("Employee_Competition_Monitoring")),1)])]),_:1}),e("div",ft,[oe((r(),c("button",yt,[bt,L(s(t.$t("Filter")),1)])),[[J,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",$t,[_(W,{visible:"",id:"collapse-3"},{default:Y(()=>[_(i,null,{default:Y(()=>[e("div",wt,[e("div",kt,[_(P,null,{default:Y(()=>[_(D,{class:"form--item",value:U.value,disabled:""},null,8,["value"])]),_:1}),e("label",Ct,s(t.$t("Choose_faculty")),1)]),e("div",Dt,[_(P,null,{default:Y(()=>[_(D,{value:p.department_id,"onUpdate:value":n[1]||(n[1]=a=>p.department_id=a),"field-names":{value:"id",label:"name"},options:T.value,"allow-clear":"","show-search":""},null,8,["value","options"])]),_:1}),e("label",Yt,s(t.$t("Choose_Department")),1)]),e("div",Mt,[_(P,null,{default:Y(()=>[_(D,{value:p.year,"onUpdate:value":n[2]||(n[2]=a=>p.year=a),"field-names":{value:"id",label:"name"},options:N(d),"allow-clear":"","show-search":""},null,8,["value","options"])]),_:1}),e("label",Tt,s(t.$t("Choose_Year")),1)])])]),_:1})]),_:1})]),e("div",Bt,[e("div",Pt,[o.data.length?(r(),c("div",Ut,[e("table",Et,[e("thead",null,[e("tr",Lt,[It,e("th",null,s(t.$t("Employee")),1),e("th",null,s(t.$t("Hei_cathedra")),1),e("th",null,s(t.$t("by_Post")),1),e("th",null,s(t.$t("academic_Degree")),1),e("th",null,s(t.$t("academic_Rank")),1),e("th",null,s(t.$t("Training_Place")),1),e("th",null,s(t.$t("Training_Period")),1),e("th",null,s(t.$t("Year")),1),e("th",null,s(t.$t("action")),1),e("th",null,s(t.$t("Enable")),1)])]),e("tbody",null,[(r(!0),c(ne,null,le(o.data,(a,j)=>(r(),c("tr",{class:"table-row d-grid w-100",key:j},[e("td",null,s((o.current_page-1)*o.per_page+j+1),1),e("td",null,s(a==null?void 0:a.fullname),1),e("td",null,s(a==null?void 0:a.department),1),e("td",null,s(a==null?void 0:a.position),1),e("td",null,[(a==null?void 0:a.academic_degree)==null?(r(),c("span",Ft,s(t.$t("No_Degree")),1)):(r(),c("span",Nt,s(a==null?void 0:a.academic_degree),1))]),e("td",null,[(a==null?void 0:a.academic_title)==null?(r(),c("span",St,s(t.$t("Untitled")),1)):(r(),c("span",jt,s(a==null?void 0:a.academic_title),1))]),e("td",null,s(a==null?void 0:a.training_place),1),e("td",null,s(N(V)(new Date(a.date_start),"YYYY-MM-DD"))+"/"+s(N(V)(new Date(a.date_end),"YYYY-MM-DD")),1),e("td",null,s(a.year),1),e("td",zt,[e("ul",Ot,[e("li",Vt,[e("div",At,[e("a",{type:"text",onClick:z=>B(a.id)},Ht,8,Rt)])]),e("li",Wt,[e("div",Zt,[e("a",{class:"text-danger",type:"danger",onClick:z=>E(a.id)},Kt,8,Gt)])])])]),e("td",null,[e("div",Qt,[e("input",{class:"form-check-input",type:"checkbox",checked:a.status,disabled:w.value,onChange:z=>l(a.id)},null,40,Xt)])])]))),128))])]),o.last_page>1?(r(),ie(Z,de({key:0,class:"mt-2"},{...o},{"current-page":o.current_page,"onUpdate:currentPage":n[3]||(n[3]=a=>o.current_page=a)}),null,16,["current-page"])):v("",!0)])):(r(),c("div",xt,[e("h5",es,s(t.$t("No_data")),1),e("p",ts,s(t.$t("No_information_found")),1)]))])]),o.data.length?(r(),c("span",ss,s(o.current_page)+"-"+s(o.data.length+o.per_page*(o.current_page-1))+"/ "+s(t.$t("Total_Point"))+": "+s(o.total),1)):v("",!0),_(G,{"advenced-training-id":k.value,"onUpdate:list":g,onClose:m},null,8,["advenced-training-id"])])}}});export{us as default};
