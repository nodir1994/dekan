import{bR as R,d as Z,h as H,c as J,a as K,B as _,Z as N,i as h,b6 as Q,o as a,e as l,f as e,t as s,bs as W,z as f,j as c,k as m,v as X,s as P,l as k,F as w,r as $}from"./index.3390162f.js";import"./index.30e99442.js";import{_ as V}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{_ as Y}from"./NoData.ac42776e.js";import"./vue.runtime.esm-bundler.84001772.js";/* empty css                                                               */import"./_plugin-vue_export-helper.cdc0426e.js";const x=R();async function ee(S){try{const{data:p}=await x({url:`/api/statistic/teacher/${S.url}`});return p}catch(p){throw p}}const te={pagetitle:"`O'qituvchi statistikasi`",class:"byStudentGeneral"},ae={class:"card panel-header-bg"},se={class:"card-body"},le={class:"panel-header"},oe={class:"card-title"},re={class:"panel-toggles"},ne={class:"filterBlock"},ue={class:"btns c-filter py-1.5 px-4"},ce=e("i",{class:"mdi mdi-filter me-2"},null,-1),ie={class:"collapse__block"},de={class:"mt-3 col-md-5"},_e={class:"my-2 mt- col-md-2"},me=["disabled"],pe=e("i",{class:"mdi mdi-eye me-2"},null,-1),ve={key:0,class:"card"},he={class:"card-body"},fe={class:"table-responsive table-statistical"},ye={class:"table-header"},be={rowspan:"2",style:{"min-width":"350px"}},ge={colspan:"3"},ke={key:0,style:{"min-width":"50px"}},we={key:1,style:{"min-width":"50px"}},$e={key:2,style:{"min-width":"50px"}},Ce={key:1,class:"card"},Ee={class:"card-body"},Ve=Z({__name:"index",setup(S){const p=H(),D=J(()=>{var t,o;return(o=(t=p==null?void 0:p.user)==null?void 0:t.faculty)==null?void 0:o.name});K();const C=_(!1),v=_([]),B=_([]),T=_([]),A=_([]),y=_(!1),i=_([]),F=_(!0),b=N({result:[]}),d=N({url:""});async function L(){await I()}function G(t){let o=[];return t.map(E=>{o.push(E)}),o}async function I(){d.url=="academic-degree"&&(y.value=!0),d.url=="academic-title"&&(y.value=!0),d.url=="position"&&(y.value=!0),d.url=="work-form"&&(y.value=!0);try{if(C.value=!0,F.value){F.value=!1;const t=await ee(d);b.result=t.result}setTimeout(()=>{F.value=!0},100),B.value=[],T.value=[],v.value=[],b.result.forEach(t=>{const o=G(t.departments);B.value.push(o)}),A.value=[],B.value.forEach(t=>{t.forEach((o,E)=>{T.value.push(o),i.value=[],o.degrees.forEach(n=>{i.value.push(n.male_count),i.value.push(n.female_count),i.value.push(n.all_count)}),i.value.push(o.degrees.reduce((n,r)=>n+r.male_count,0)),i.value.push(o.degrees.reduce((n,r)=>n+r.female_count,0)),i.value.push(o.degrees.reduce((n,r)=>n+r.all_count,0)),i.value.forEach((n,r)=>{v.value.length<r+1&&(v.value.length=r+1,v.value[r]=0),v.value[r]+=n}),A.value.push(i.value)})})}catch(t){console.log(t)}finally{C.value=!1}}return(t,o)=>{const E=h("a-select"),n=h("a-form-item"),r=h("a-radio"),M=h("a-radio-group"),O=h("b-card"),U=h("b-collapse"),j=Q("b-toggle");return a(),l("div",te,[e("div",ae,[e("div",se,[e("div",le,[e("h5",oe,s(t.$t("Teacher_statistics")),1),e("div",re,[e("div",ne,[W((a(),l("button",ue,[ce,f(s(t.$t("Filtr")),1)])),[[j,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",ie,[c(U,{visible:"",id:"collapse-3"},{default:m(()=>[c(O,null,{default:m(()=>[e("form",{class:"row",onSubmit:X(L,["prevent"])},[c(n,{class:"my-2 col-md-5",name:"faculty"},{default:m(()=>[c(E,{class:"form--item",value:D.value,disabled:""},null,8,["value"])]),_:1}),e("div",de,[c(M,{value:d.url,"onUpdate:value":o[0]||(o[0]=u=>d.url=u),name:"radioGroup",class:"d-flex"},{default:m(()=>[c(r,{value:"academic-degree"},{default:m(()=>[f(s(t.$t("Academic_degree")),1)]),_:1}),c(r,{value:"academic-title"},{default:m(()=>[f(s(t.$t("Scientific_title")),1)]),_:1}),c(r,{value:"position"},{default:m(()=>[f(s(t.$t("Position")),1)]),_:1}),c(r,{value:"work-form"},{default:m(()=>[f(s(t.$t("Form_of_work")),1)]),_:1})]),_:1},8,["value"])]),e("div",_e,[e("button",{disabled:!d.url,class:"btn-search c-save",type:"submit"},[pe,f(s(t.$t("View_Academic_Sheet")),1)],8,me)])],32)]),_:1})]),_:1})]),y.value&&b.result.length?(a(),l("div",ve,[C.value?(a(),P(V,{key:0})):k("",!0),e("div",he,[e("div",fe,[e("div",ye,[e("table",null,[e("tr",null,[e("td",null,[e("span",null,s(t.$t("Faculty"))+":",1),e("b",null,s(D.value),1)])])])]),e("table",null,[e("thead",null,[e("tr",null,[e("th",be,s(t.$t("Academic_degree")),1),(a(!0),l(w,null,$(b.result[0].departments[0].degrees,(u,g)=>(a(),l("th",{colspan:"3",key:g},s(u.academic_degree),1))),128)),e("th",ge,s(t.$t("Total_Point")),1)]),e("tr",null,[(a(!0),l(w,null,$((b.result[0].departments[0].degrees.length+1)*3,u=>(a(),l("th",{key:u},[u%3==1?(a(),l("span",ke,s(t.$t("Male")),1)):k("",!0),u%3==2?(a(),l("span",we,s(t.$t("Female")),1)):k("",!0),u%3==0?(a(),l("span",$e,s(t.$t("Total_Point")),1)):k("",!0)]))),128))])]),e("tbody",null,[(a(!0),l(w,null,$(T.value,(u,g)=>(a(),l("tr",{key:g},[e("td",null,s(u.name),1),(a(!0),l(w,null,$(A.value[g],(q,z)=>(a(),l("td",{key:z},s(q),1))),128))]))),128)),e("tr",null,[e("th",null,s(t.$t("Total_Point")),1),(a(!0),l(w,null,$(v.value,(u,g)=>(a(),l("th",null,s(u),1))),256))])])])])])])):(a(),l("div",Ce,[e("div",Ee,[C.value?(a(),P(V,{key:0})):k("",!0),c(Y)])]))])}}});export{Ve as default};
