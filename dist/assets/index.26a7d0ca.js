import{_ as T}from"./Pagination.f4a9fc5d.js";import{_ as U}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as V,d as Y,a as j,h as q,c as z,B as k,Z as L,bq as P,w as $,i as m,b6 as E,o as r,e as i,f as t,t as n,bs as I,z as G,j as d,k as b,v as H,s as B,l as f,F as M,r as Z,aR as J}from"./index.3390162f.js";import{a as K}from"./index.30e99442.js";import{h as Q}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const W=V();async function X(y){try{const{data:o}=await W({url:"/api/ratings/departments",method:"GET",params:y});return o}catch(o){throw o}}const D={pagetitle:"`O'qituvchi reytingi`",class:"departmentRatingPage"},tt={class:"card panel-header-bg"},et={class:"card-body"},at={class:"panel-header"},st={class:"card-title"},ot={class:"panel-toggles"},nt={class:"filterBlock"},lt={class:"btns c-filter py-1.5 px-4"},rt=t("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ct={class:"collapse__block"},it={class:"my-2 col-md-6",name:"faculty"},dt={class:"my-2 col-md-6",name:"educationYear"},_t={class:"card"},ut={class:"card-body"},pt={class:"table-responsive"},mt={class:"table-vertical"},ht={class:"table-row w-100 d-grid"},gt=t("th",null,[t("b",null,"#")],-1),vt={key:0},bt={class:"table-error",rowspan:"4"},ft={class:"table-row w-100 d-grid"},yt=t("th",null,[t("b")],-1),xt=Y({__name:"index",async setup(y){let o,_;j();const h=q(),N=z(()=>{var a,l;return(l=(a=h==null?void 0:h.user)==null?void 0:a.faculty)==null?void 0:l.name}),g=k(!1),c=L({page:1,academic_year_id:150,per_page:Q.pagePer}),e=L({current_page:1,total:0,last_page:1,per_page:1,data:[],links:[]}),w=k([]);w.value=([o,_]=P(()=>K().then(a=>a.result)),o=await o,_(),o),c.academic_year_id=1,[o,_]=P(()=>u()),await o,_(),$(()=>c.academic_year_id,async()=>{await u()}),$(()=>e.current_page,async a=>{Number(a)&&(c.page=Number(a),await u())});async function C(){await u()}async function u(){g.value=!0;const a=await X(c);Object.assign(e,a.result),e.total=e==null?void 0:e.data.reduce(function(l,p){return l+p.department_ball},0),g.value=!1}return(a,l)=>{const p=m("a-select"),R=m("a-space"),S=m("b-card"),x=m("b-collapse"),A=U,F=T,O=E("b-toggle");return r(),i("div",D,[t("div",tt,[t("div",et,[t("div",at,[t("h5",st,n(a.$t("Rating_Department")),1),t("div",ot,[t("div",nt,[I((r(),i("button",lt,[rt,G(n(a.$t("Filter")),1)])),[[O,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",ct,[d(x,{visible:"",id:"collapse-3"},{default:b(()=>[d(S,null,{default:b(()=>{var s;return[t("form",{onSubmit:H(C,["prevent"]),class:"row"},[t("div",it,[d(R,null,{default:b(()=>[d(p,{class:"form--item",value:N.value,disabled:""},null,8,["value"])]),_:1})]),t("div",dt,[d(p,{value:c.academic_year_id,"onUpdate:value":l[0]||(l[0]=v=>c.academic_year_id=v),"field-names":{value:"id",label:"name"},options:(s=w.value)==null?void 0:s.data,"show-search":""},null,8,["value","options"])])],32)]}),_:1})]),_:1})]),t("div",_t,[t("div",ut,[g.value?(r(),B(A,{key:0})):f("",!0),t("div",pt,[t("table",mt,[t("thead",null,[t("tr",ht,[gt,t("th",null,[t("b",null,n(a.$t("Hei_department")),1)]),t("th",null,[t("b",null,n(a.$t("Score")),1)])])]),t("tbody",null,[(e==null?void 0:e.data.length)===0?(r(),i("tr",vt,[t("td",bt,n(a.$t("not__found")),1)])):f("",!0),(r(!0),i(M,null,Z(e==null?void 0:e.data,(s,v)=>(r(),i("tr",{class:"table-row w-100 d-grid",key:s.id},[t("td",null,n((e.current_page-1)*e.per_page+v+1),1),t("td",null,n(s==null?void 0:s.department),1),t("td",null,n(s==null?void 0:s.department_ball),1)]))),128))]),t("thead",null,[t("tr",ft,[yt,t("th",null,[t("b",null,n(a.$t("Total_Point")),1)]),t("th",null,[t("b",null,n(e==null?void 0:e.total),1)])])])]),e.last_page>1?(r(),B(F,J({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":l[1]||(l[1]=s=>e.current_page=s)}),null,16,["current-page"])):f("",!0)])])])])}}});export{xt as default};
