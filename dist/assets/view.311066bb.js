import{_ as Z,a as G}from"./EmployeesListModal.vue_vue_type_script_setup_true_lang.89129a5c.js";import{_ as H}from"./SubmitButton.vue_vue_type_script_setup_true_lang.fe21b651.js";import{d as J,a as K,n as P,u as Q,bO as W,B as i,Z as I,bq as X,w as y,i as N,o as g,e as w,f as e,j as m,k as $,z as d,t as l,v as Y,F as ee,r as se,bS as V}from"./index.3390162f.js";import{e as te,g as ne,s as le}from"./conference.cd1ecb2a.js";import"./Pagination.f4a9fc5d.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./index.88fda4e6.js";const oe={class:"sendConferencesList"},ae={class:"row"},ie={class:"col-12"},de={class:"card"},ce={class:"card-header bg-card-header justify-content-between d-flex align-items-center"},ue={class:"card-title"},re=e("i",{class:"mdi mdi-arrow-left font-size-14 align-middle me-1 me-1"},null,-1),_e={class:"card-body"},me={class:"row"},pe={class:"col-md-8"},fe={class:"mb-3 height-auto conference-select"},ve={class:"text-danger"},be={class:"col-md-2"},he={class:"mb-3"},ye=e("i",{class:"mdi mdi-plus me-2"},null,-1),ge={class:"col-md-2"},we={class:"mb-3"},$e=e("i",{class:"mdi mdi-plus me-2"},null,-1),ke={class:"table conf_table"},Ce=["onClick"],Le=e("i",{class:"mdi mdi-delete"},null,-1),Oe=[Le],Se={class:"mt-3 d-flex"},xe=J({__name:"view",async setup(Be){let k,C;const{t:L}=K(),x=P(),D=Q(),O=W(),p=i(!1),v=i(!1),b=i(!1),h=x.params.id,c=i([]),u=i([]);I({users:[],theme:"",message:""});const r=i({});async function S(){const s=await ne(h);Object.assign(r.value,s==null?void 0:s.result)}const _=I({users:[],theme:[],message:[]});[k,C]=X(()=>S()),await k,C(),y(v,function(s){const t=V.getOrCreateInstance("#employeesListModal");s?t.show():t.hide()}),y(b,function(s){const t=V.getOrCreateInstance("#studentsListModal");s?t.show():t.hide()});const f=i(!0);y(u,function(s){u.value.length?f.value=!1:f.value=!0}),y(c,function(s){c.value.length?f.value=!1:f.value=!0});async function z(){var s,t;try{p.value=!0,B();const o=await le({id:h,user_ids:[...c.value.map(a=>a.id),...u.value.map(a=>a.id)]});O.success(L("Message_title_sent_to_count_address")),await S(h)}catch(o){Object.assign(_,(t=(s=o.response)==null?void 0:s.data)==null?void 0:t.errors)}finally{p.value=!1}}function B(){_.user_ids=[],_.theme=[],_.message=[]}async function F(s){var t,o;try{p.value=!0,B();const a=await te(h,s);O.success(L("Delete_message.Record_deleted_successfull")),D.push("/conferences")}catch(a){Object.assign(_,(o=(t=a.response)==null?void 0:t.data)==null?void 0:o.errors)}finally{p.value=!1}}return(s,t)=>{var M,E,R,U,j;const o=N("router-link"),a=N("a-select"),T=H,q=Z,A=G;return g(),w("div",oe,[e("div",ae,[e("div",ie,[e("div",de,[e("div",ce,[e("h5",ue,[m(o,{to:"/conferences"},{default:$(()=>[d(l(s.$t("all_conference")),1)]),_:1}),d(" / "+l(s.$t("list_conference_one")),1)]),m(o,{to:"/conferences",class:"btns black-c py-1.5 px-4"},{default:$(()=>[re,d(" "+l(s.$t("Back")),1)]),_:1})]),e("div",_e,[e("form",{onSubmit:Y(z,["prevent"])},[e("div",me,[e("div",pe,[e("div",fe,[m(a,{value:[...c.value.map(n=>n.full_name),...u.value.map(n=>n.full_name)],mode:"multiple",placeholder:s.$t("Recipients")},null,8,["value","placeholder"]),e("span",ve,l(_.users[0]),1)])]),e("div",be,[e("div",he,[e("button",{class:"btns student-c py-2 px-4 w-100 text-center",type:"button",onClick:t[0]||(t[0]=n=>v.value=!0)},[ye,d(" "+l(s.$t("employee")),1)])])]),e("div",ge,[e("div",we,[e("button",{type:"button",class:"btns c-save text-center py-2 px-4 w-100",onClick:t[1]||(t[1]=n=>b.value=!0)},[$e,d(" "+l(s.$t("Student")),1)])])])]),e("table",ke,[e("tbody",null,[e("tr",null,[e("td",null,[e("b",null,l(s.$t("Type")),1)]),e("td",null,l((M=r.value)==null?void 0:M.conference_type_id),1)]),e("tr",null,[e("td",null,[e("b",null,l(s.$t("Name")),1)]),e("td",null,l((E=r.value)==null?void 0:E.name),1)]),e("tr",null,[e("td",null,[e("b",null,l(s.$t("Begin_Date")),1)]),e("td",null,l((R=r.value)==null?void 0:R.date),1)]),e("tr",null,[e("td",null,[e("b",null,l(s.$t("Explanation")),1)]),e("td",null,l((U=r.value)==null?void 0:U.description),1)]),e("tr",null,[e("td",null,[e("b",null,l(s.$t("participants")),1)]),e("td",null,[(g(!0),w(ee,null,se((j=r.value)==null?void 0:j.participants,n=>(g(),w("span",{class:"d-inline-block me-4",key:n.id},[d(l(n.fio),1),e("button",{type:"button",class:"btn p-0",onClick:Me=>F(n.id)},Oe,8,Ce)]))),128))])])])]),e("div",Se,[m(T,{disabled:f.value,class:"c-filter py-2 px-4 my-1 ms-auto",loading:p.value,icon:"send"},{default:$(()=>[d(l(s.$t("Run_Report")),1)]),_:1},8,["disabled","loading"])])],32),m(q,{"is-open":v.value,"onUpdate:isOpen":t[2]||(t[2]=n=>v.value=n),"selected-employees":c.value,"onUpdate:selectedEmployees":t[3]||(t[3]=n=>c.value=n)},null,8,["is-open","selected-employees"]),m(A,{"is-open":b.value,"onUpdate:isOpen":t[4]||(t[4]=n=>b.value=n),"selected-students":u.value,"onUpdate:selectedStudents":t[5]||(t[5]=n=>u.value=n)},null,8,["is-open","selected-students"])])])])])])}}});export{xe as default};
