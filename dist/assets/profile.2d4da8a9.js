import{_ as F}from"./AvatarInput.vue_vue_type_style_index_0_lang.6e259ab2.js";import{s as L}from"./index.30e99442.js";import{d as U,B as k,a as D,c as j,y as B,i as g,b6 as N,o as b,s as O,k as M,f as s,j as r,t as n,e as w,l as $,bs as V,z as E,n as z,u as I,bO as R,Z as P,bq as T,bP as q,bQ as A}from"./index.3390162f.js";const Q={class:"row"},Y={class:"col-xl-2 d-flex justify-content-center"},Z={class:"col-xl-5"},G={class:"mb-3"},H={for:"division-name-input",class:"form-label"},J={class:"mb-3"},K={for:"division-name-input",class:"form-label"},W={class:"mb-3"},X={for:"division-name-input",class:"form-label"},x={class:"col-xl-5"},ee={class:"row"},se={class:"mb-3 col-md-6"},ae={for:"division-name-select",class:"form-label"},oe={key:0,class:"text-danger small"},te={class:"mb-3 col-md-6"},le={for:"otm-name-input",class:"form-label"},ne={class:"mb-3"},ie={for:"division-name-input",class:"form-label"},re={key:0,class:"text-danger small"},de={class:"mb-3"},ue={for:"division-name-input",class:"form-label"},ce={key:0,class:"text-danger small"},me={class:"d-flex justify-content-end"},_e={class:"btns c-save py-2 px-3"},pe=s("i",{class:"mdi mdi-account-edit font-size-14 align-middle me-2"},null,-1),fe=U({__name:"MyProfileForm",props:{formState:{},errors:{},isLoading:{type:Boolean}},emits:["submit","updateCount","clearError"],setup(S,{emit:h}){const u=k(!1),d=k([]),f=S,c=h;D();const a=j({get(){return f.formState},set(e){c("update:formState",e)}});B(async()=>{d.value=[],d.value=await L().then(e=>e.result),console.log(a,"computedFormState")});function m(){c("submit")}return(e,o)=>{const y=F,l=g("a-input"),v=g("a-select"),i=g("a-checkbox"),_=g("a-input-password"),C=g("a-form"),p=N("maska");return b(),O(C,{onFinish:m,model:a.value},{default:M(()=>[s("div",Q,[s("div",Y,[r(y,{"img-url":a.value.image,onInput:o[0]||(o[0]=t=>a.value.image=t)},null,8,["img-url"])]),s("div",Z,[s("div",G,[s("label",H,n(e.$t("Login")),1),r(l,{value:e.formState.username,"onUpdate:value":o[1]||(o[1]=t=>e.formState.username=t),disabled:""},null,8,["value"])]),s("div",J,[s("label",K,n(e.$t("Full_name")),1),r(l,{value:e.formState.fullname,"onUpdate:value":o[2]||(o[2]=t=>e.formState.fullname=t),disabled:""},null,8,["value"])]),s("div",W,[s("label",X,n(e.$t("Email")),1),r(l,{value:a.value.email,"onUpdate:value":o[3]||(o[3]=t=>a.value.email=t)},null,8,["value"])])]),s("div",x,[s("div",ee,[s("div",se,[s("label",ae,n(e.$t("Education_Language")),1),r(v,{value:a.value.language_id,"onUpdate:value":o[4]||(o[4]=t=>a.value.language_id=t),options:d.value,"field-names":{value:"id",label:"name"},placeholder:e.$t("Choose_Education_Lang")},null,8,["value","options","placeholder"]),e.errors.language_id?(b(),w("span",oe,n(e.errors.language_id[0]),1)):$("",!0)]),s("div",te,[s("label",le,n(e.$t("Contact")),1),V(r(l,{class:"select",tupe:"tel",value:a.value.phone,"onUpdate:value":o[5]||(o[5]=t=>a.value.phone=t),placeholder:"+998## ###-##-##"},null,8,["value"]),[[p,["+998## ###-##-##","+998## ###-##-##"]]])])]),s("div",ne,[s("label",ie,[r(i,{checked:u.value,"onUpdate:checked":o[6]||(o[6]=t=>u.value=t),class:"me-2"},null,8,["checked"]),E(n(e.$t("Change_Password")),1)]),r(_,{disabled:!u.value,value:a.value.password,"onUpdate:value":o[7]||(o[7]=t=>a.value.password=t),placeholder:e.$t("New_Password")},null,8,["disabled","value","placeholder"]),e.errors.password?(b(),w("span",re,n(e.errors.password[0]),1)):$("",!0)]),s("div",de,[s("label",ue,n(e.$t("Confirm_password")),1),r(_,{disabled:!u.value,value:a.value.password_confirmation,"onUpdate:value":o[8]||(o[8]=t=>a.value.password_confirmation=t),placeholder:e.$t("Confirm_password")},null,8,["disabled","value","placeholder"]),e.errors.password_confirmation?(b(),w("span",ce,n(e.errors.password_confirmation[0]),1)):$("",!0)]),s("div",me,[s("button",_e,[pe,E(n(e.$t("Edit")),1)])])])])]),_:1},8,["model"])}}}),ve={pagetitle:"'Barcha xabarlar'",class:"my-profile"},ge={class:"card"},be={class:"card-header bg-card-header"},he={class:"card-title mb-0"},we={class:"card-body"},Se=U({__name:"profile",async setup(S){let h,u;z(),I();const{t:d}=D(),f=R(),c=k(!1),a=P({email:"",phone:"",password:"",password_confirmation:"",language_id:null,image:null,username:"",fullname:"",status:""}),m=P({email:[],phone:[],password:[],password_confirmation:[],language_id:[],image:[]});[h,u]=T(()=>e()),await h,u();async function e(){const l=await q();Object.assign(a,l.result)}async function o(){var l,v;try{c.value=!0,Object.assign(m,{});const i=new FormData;let _={email:a.email,phone:a.phone,password:a.password,password_confirmation:a.password_confirmation,language_id:a.language_id,image:a.image,_method:"PUT"};Object.getOwnPropertyNames(_).forEach(p=>{!["id","citizenship","user_id"].includes(p)&&_[p]&&i.append(p,_[p])});const C=await A(i);f.success(d("Your_profile_updated_successfully")),setTimeout(()=>{location.reload()},500)}catch(i){console.log(i,"error"),Object.assign(m,(v=(l=i.response)==null?void 0:l.data)==null?void 0:v.errors),i.response.status==422?f.error(d("Dashboard_Error")+": "+d("Fill_in_the_required_fields")):f.error(d("Dashboard_Error")+": "+i.message)}finally{c.value=!1}}function y(l){m[l]=[]}return(l,v)=>{const i=fe;return b(),w("div",ve,[s("div",ge,[s("div",be,[s("h4",he,n(l.$t("My_Profile")),1)]),s("div",we,[r(i,{"form-state":a,errors:m,"is-loading":c.value,onSubmit:o,onClearError:y},null,8,["form-state","errors","is-loading"])])])])}}});export{Se as default};
