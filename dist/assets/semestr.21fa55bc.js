import{_ as ae}from"./Pagination.f4a9fc5d.js";import{_ as se}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as te,d as ie,a as oe,bO as le,B as C,Z as g,c as de,y as re,w as b,i as G,o as c,e as u,f as a,t as o,v as ne,j as m,k as ce,z as S,s as T,l as w,g as _,bs as H,bH as Z,F as q,r as D,aR as J}from"./index.3390162f.js";import{j as _e}from"./index.30e99442.js";import{a as ue,b as pe,s as me}from"./id.5a6e5f30.js";import{S as he}from"./sweetalert2.all.fdef424e.js";import{h}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./moment.2cad4b18.js";const Q=te();async function K(N){try{const{data:d}=await Q({url:"api/students/transfer-study",method:"GET",params:N});return d}catch(d){throw d}}async function fe(N){try{const{data:d}=await Q({url:"/api/student-actions/transfer-semester",method:"PUT",data:N});return d}catch(d){throw d}}const ve={pagetitle:"'Talabani tiklash'",class:"transfer-semester-page"},ye={class:"card panel-header-bg"},ge={class:"card-body"},be={class:"panel-header"},we={style:{padding:"7px 0"},class:"card-title"},Oe={class:"card"},ke={class:"card-body"},$e={class:"my-2 col-md-10 form--item"},Ne={for:"yu"},Be={class:"my-2 col-xl-2"},Pe=["disabled"],Ce=a("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Se={class:"row"},Te={class:"col-lg-5"},Ue={class:"card"},Fe={class:"card-header bg-card-header"},Ge={class:"card-title mb-0"},Ye={class:"card-body"},je={class:"row"},Le={class:"col-xl-6"},Ee={class:"mb-3",name:"nameFaculty"},xe={class:"col-xl-6"},Ae={class:"mb-3",name:"nameFaculty"},Ie={class:"col-xl-6"},Ve={class:"mb-3",name:"nameFaculty"},ze={class:"col-xl-6"},Me={class:"mb-3",name:"nameFaculty"},Re={key:0,class:"table-responsive"},He={class:"table-vertical"},Ze={class:"table-row d-grid w-100"},qe={class:"form-check"},De={class:"form-check"},Je=["value"],Ke=a("br",null,null,-1),Qe=a("br",null,null,-1),We={key:1},Xe={class:"text-center"},ea={class:"text-center"},aa={key:0,class:"element-count mb-2"},sa={class:"col-lg-7"},ta={class:"card"},ia={class:"card-header bg-card-header"},oa={class:"card-title mb-0"},la={class:"card-body"},da={class:"row"},ra={class:"col-xl-6"},na={class:"mb-3",name:"nameFaculty"},ca={class:"col-xl-6"},_a={class:"mb-3",name:"nameFaculty"},ua={class:"col-xl-6"},pa={class:"mb-3",name:"nameFaculty"},ma={key:0,class:"text-danger small"},ha={class:"col-xl-6"},fa={class:"d-flex h-100 justify-content-end align-items-center"},va=["disabled"],ya=a("i",{class:"mdi mdi-check font-size-14 align-middle me-1"},null,-1),ga={class:"table-responsive"},ba={class:"table-vertical"},wa={class:"table-row-transfer d-grid w-100"},Oa=a("th",null,"#",-1),ka={key:0,class:"element-count mb-2"},ja=ie({__name:"semestr",setup(N){const{t:d}=oe(),Y=le(),O=C(!1),U=C(!1);g({});const F=C(!1),e=g({edu_plan_id:null,academic_year_id:null,semester_id:null,semester_id2:null,academic_group_id:null,data:[],links:[],students:[],search:null,current_page:1,total:0,page:1,per_page:h.pagePer}),r=g({current_page:1,total:0,data:[],per_page:h.pagePer}),n=g({eduPlanOptions:null,academicYearsOptions:null,semesterOptions:null,academicGroupOptions:null}),k=C([]),j=de({get(){var i,t;return((i=e==null?void 0:e.students)==null?void 0:i.length)===((t=k==null?void 0:k.value)==null?void 0:t.length)},set(i){i?e.students=k.value:e.students=[]}});async function W(){await f()}re(async()=>{n.eduPlanOptions=await _e().then(i=>{var t;return(t=i==null?void 0:i.result)==null?void 0:t.data})}),b(()=>e.edu_plan_id,async()=>{var i,t;if(e.academic_year_id=null,e.semester_id=null,e.semester_id2=null,e.academic_group_id=null,n.academicYearsOptions=null,n.academicGroupOptions=null,n.semesterOptions=null,e.edu_plan_id){let l=await ue(e.edu_plan_id);n.academicYearsOptions=(i=l==null?void 0:l.result)==null?void 0:i.data.map(v=>({id:v.id,name:v.name}));let p=await pe(e.edu_plan_id);n.academicGroupOptions=(t=p==null?void 0:p.result)==null?void 0:t.data.map(v=>({id:v.id,name:v.name}))}else e.data=[],r.data=[]}),b(()=>e.academic_year_id,async()=>{var i;if(e.semester_id=null,n.semesterOptions=null,!e.academic_year_id&&e.edu_plan_id&&await f(),e.academic_year_id&&await f(),e.edu_plan_id&&e.academic_year_id){let t=await me(e);n.semesterOptions=(i=t==null?void 0:t.result)==null?void 0:i.data.map(l=>({id:l.id,name:l.semester+"-"+d("semester_number")}))}}),b(()=>e.academic_group_id,async()=>{await f()}),b(()=>e.semester_id,async()=>{!e.semester_id&&e.academic_year_id&&await f(),e.semester_id&&await f()}),b(()=>e.current_page,async i=>{Number(i)&&await f(i)}),b(()=>r.current_page,async i=>{Number(i)&&await L(i)}),b(()=>e.semester_id2,async()=>{e.semester_id2?await L():(r.data=[],F.value=!1)});async function X(){var i,t;try{O.value=!0,ee();let l={};e.page>1&&(l.page=e==null?void 0:e.page),Object.assign(l,{students:e.students,semester_id:e.semester_id2,edu_plan_id:e.edu_plan_id}),he.fire({title:d("Delete_message.Are_you_sure"),text:d("Delete_message.Action_irreversible"),showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:d("No_Cancel"),confirmButtonText:d("transfer")}).then(async p=>{p.value&&(await fe(l),Y.success(d("Data_was_successfully_transferred")),setTimeout(async()=>{await f()},1e3),location.reload())})}catch(l){Object.assign(B,(t=(i=l.response)==null?void 0:i.data)==null?void 0:t.errors),Y.error(d("Failed")+": "+l.message)}finally{O.value=!1}}function ee(){Object.assign(B,{semester_id:[],academic_group_id:[]})}const B=g({edu_plan_id:[],semester_id:[]});async function f(i){let t=g({page:i||1,per_page:e.per_page});e.edu_plan_id&&(t.edu_plan_id=e.edu_plan_id),e.academic_year_id&&(t.academic_year_id=e.academic_year_id),e.semester_id&&(t.semester_id=e.semester_id),e.academic_group_id&&(t.academic_group_id=e.academic_group_id),e.search&&(t.search=e.search),O.value=!0;try{const l=await K(t);Object.assign(e,l.result),k.value=e.data.map(p=>p.id)}catch(l){console.log(l)}finally{O.value=!1}}async function L(i){let t=g({page:i||1,per_page:e.per_page});e.edu_plan_id&&(t.edu_plan_id=e.edu_plan_id),e.academic_year_id&&(t.academic_year_id=e.academic_year_id),e.semester_id&&(t.semester_id=e.semester_id),e.academic_group_id&&(t.academic_group_id=e.academic_group_id),e.search&&(t.search=e.search),U.value=!0;try{t.semester_id=e.semester_id2;const l=await K(t);Object.assign(r,l.result)}catch(l){console.log(l)}finally{U.value=!1,F.value=!0}}return(i,t)=>{var x,A,I;const l=G("a-input"),p=G("a-space"),v=se,y=G("a-select"),E=ae;return c(),u("div",ve,[a("div",ye,[a("div",ge,[a("div",be,[a("h5",we,o(i.$t("transfer__student__corse")),1)])])]),a("div",Oe,[a("div",ke,[a("form",{onSubmit:ne(W,["prevent"]),class:"row"},[a("div",$e,[m(p,null,{default:ce(()=>[m(l,{id:"yu",class:"form-control","allow-clear":"",value:e.search,"onUpdate:value":t[0]||(t[0]=s=>e.search=s)},null,8,["value"])]),_:1}),a("label",Ne,o(i.$t("Search_by_Name_Number")),1)]),a("div",Be,[a("button",{type:"submit",class:"btn-search search-color",disabled:!e.academic_year_id||!e.edu_plan_id},[Ce,S(o(i.$t("Search")),1)],8,Pe)])],32)])]),a("div",Se,[a("div",Te,[a("div",Ue,[a("div",Fe,[a("h4",Ge,o(i.$t("Students_in_Group")),1)]),O.value?(c(),T(v,{key:0})):w("",!0),a("div",Ye,[a("form",je,[a("div",Le,[a("div",Ee,[m(y,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_plan_id,"onUpdate:value":t[1]||(t[1]=s=>e.edu_plan_id=s),"field-names":{value:"id",label:"name"},options:n.eduPlanOptions,placeholder:i.$t("Please_select_curriculum")},null,8,["filter-option","value","options","placeholder"])])]),a("div",xe,[a("div",Ae,[m(y,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.academic_year_id,"onUpdate:value":t[2]||(t[2]=s=>e.academic_year_id=s),disabled:!e.edu_plan_id,"field-names":{value:"id",label:"name"},options:n.academicYearsOptions,placeholder:_(d)("Choose_Education_Year")},null,8,["filter-option","value","disabled","options","placeholder"])])]),a("div",Ie,[a("div",Ve,[m(y,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.semester_id,"onUpdate:value":t[3]||(t[3]=s=>e.semester_id=s),disabled:!e.academic_year_id,"field-names":{value:"id",label:"name"},options:n.semesterOptions,placeholder:_(d)("Choose_Semester")},null,8,["filter-option","value","disabled","options","placeholder"])])]),a("div",ze,[a("div",Me,[m(y,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.academic_group_id,"onUpdate:value":t[4]||(t[4]=s=>e.academic_group_id=s),disabled:!e.semester_id,"field-names":{value:"id",label:"name"},options:n.academicGroupOptions,placeholder:_(d)("Choose_Group")},null,8,["filter-option","value","disabled","options","placeholder"])])])]),e.data.length?(c(),u("div",Re,[a("table",He,[a("thead",null,[a("tr",Ze,[a("th",null,[a("div",qe,[H(a("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=s=>j.value=s)},null,512),[[Z,j.value]])])]),a("th",null,o(i.$t("Student")),1),a("th",null,o(i.$t("Payment_Form")),1)])]),a("tbody",null,[(c(!0),u(q,null,D(e.data,(s,V)=>{var $;return c(),u("tr",{class:"table-row w-100 d-grid",key:s==null?void 0:s.id},[a("td",null,[a("div",De,[H(a("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[6]||(t[6]=P=>e.students=P),value:s==null?void 0:s.id},null,8,Je),[[Z,e.students]])])]),a("td",null,[S(o(s==null?void 0:s.surname)+" "+o(s==null?void 0:s.name)+" "+o(s==null?void 0:s.last_name)+" ",1),Ke]),a("td",null,[S(o(($=s==null?void 0:s.payment_type)==null?void 0:$.name)+" ",1),Qe])])}),128))])]),e.last_page>1?(c(),T(E,J({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":t[7]||(t[7]=s=>e.current_page=s)}),null,16,["current-page"])):w("",!0)])):(c(),u("div",We,[a("h5",Xe,o(i.$t("No_data")),1),a("p",ea,o(i.$t("No_information_found")),1)]))])]),e.data.length?(c(),u("span",aa,o(e.current_page)+"-"+o(((x=e==null?void 0:e.data)==null?void 0:x.length)+e.per_page*(e.current_page-1))+"/ "+o(i.$t("Total_Point"))+": "+o(e.total),1)):w("",!0)]),a("div",sa,[a("div",ta,[a("div",ia,[a("h4",oa,o(i.$t("transfer")),1)]),U.value?(c(),T(v,{key:0})):w("",!0),a("div",la,[a("div",da,[a("div",ra,[a("div",na,[m(y,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",disabled:"",value:e.edu_plan_id,"onUpdate:value":t[8]||(t[8]=s=>e.edu_plan_id=s),"field-names":{value:"id",label:"name"},options:n.eduPlanOptions,placeholder:i.$t("Curriculum")},null,8,["filter-option","value","options","placeholder"])])]),a("div",ca,[a("div",_a,[m(y,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",disabled:"",value:e.academic_year_id,"onUpdate:value":t[9]||(t[9]=s=>e.academic_year_id=s),"field-names":{value:"id",label:"name"},options:n.academicYearsOptions,placeholder:_(d)("Curriculum_Education_Year")},null,8,["filter-option","value","options","placeholder"])])]),a("div",ua,[a("div",pa,[m(y,{"filter-option":_(h).filterOptionByName,"show-search":"","allow-clear":"",value:e.semester_id2,"onUpdate:value":t[10]||(t[10]=s=>e.semester_id2=s),"field-names":{value:"id",label:"name"},options:n.semesterOptions,disabled:!e.academic_year_id,placeholder:_(d)("Choose_Semester")},null,8,["filter-option","value","options","disabled","placeholder"]),B.semester_id?(c(),u("span",ma,o(B.semester_id[0]),1)):w("",!0)])]),a("div",ha,[a("div",fa,[a("button",{class:"btns search-color",onClick:X,type:"button",disabled:!(((A=e.students)==null?void 0:A.length)>0)},[ya,S(o(i.$t("transfer")),1)],8,va)])]),a("div",ga,[a("table",ba,[a("thead",null,[a("tr",wa,[Oa,a("th",null,o(i.$t("Student")),1),a("th",null,o(i.$t("Education_Year_Name")),1),a("th",null,o(i.$t("Semester_Name")),1),a("th",null,o(i.$t("by_Level")),1),a("th",null,o(i.$t("Group")),1)])]),a("tbody",null,[(c(!0),u(q,null,D(r.data,(s,V)=>{var $,P,z,M,R;return c(),u("tr",{class:"table-row-transfer w-100 d-grid",key:s==null?void 0:s.id},[a("td",null,o((e.current_page-1)*e.per_page+V+1),1),a("td",null,o(s==null?void 0:s.surname)+" "+o(s==null?void 0:s.name)+" "+o(s==null?void 0:s.last_name),1),a("td",null,o((P=($=s==null?void 0:s.semester)==null?void 0:$.academic_year)==null?void 0:P.name),1),a("td",null,o((z=s==null?void 0:s.semester)==null?void 0:z.semester)+"- "+o(i.$t("semester_number")),1),a("td",null,o((M=s==null?void 0:s.semester)==null?void 0:M.course)+"- "+o(i.$t("course_number")),1),a("td",null,o((R=s==null?void 0:s.academic_group)==null?void 0:R.name),1)])}),128))])]),r.last_page>1&&r.data.length?(c(),T(E,J({key:0,class:"mt-2"},{...r},{"current-page":r.current_page,"onUpdate:currentPage":t[11]||(t[11]=s=>r.current_page=s)}),null,16,["current-page"])):w("",!0)])])])]),F.value?(c(),u("span",ka,o(r.current_page)+"-"+o(((I=r==null?void 0:r.data)==null?void 0:I.length)+r.per_page*(r.current_page-1))+"/ "+o(i.$t("Total_Point"))+": "+o(r.total),1)):w("",!0)])])])}}});export{ja as default};
