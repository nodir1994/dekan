import{d as ns,bO as cs,B,Z as $,n as rs,a as us,u as _s,bq as ms,y as ps,w as U,i as T,o as _,e as m,f as s,j as u,k as v,z as y,t as l,g as p,bs as ss,bM as es,F,r as q}from"./index.3390162f.js";import{e as hs,b as vs,f as fs}from"./id.5a6e5f30.js";import{d as ts}from"./vuedraggable.umd.235d3591.js";import{a as bs,b as ys,c as gs}from"./recover.00bb39a9.js";import{h as w}from"./helper.569bc08f.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const $s={pagetitle:"`O'qishni tiklash`",class:"student-recovery-id-page"},ws={class:"card panel-header-bg"},Os={class:"card-body"},ks={class:"panel-header"},js={class:"card-title"},Cs={class:"panel-toggles"},Ss={class:"panel-toggles"},Bs=s("i",{class:"mdi mdi-arrow-left font-size-14 align-middle me-1 me-1"},null,-1),Es={class:"row table-division"},Ns={class:"col-md-12"},Ls={class:"card"},Ts={class:"card-header bg-card-header"},Fs={class:"card-title mb-0"},Ps={class:"card-body"},Gs={class:"table-responsive"},Is={class:"table-vertical"},Rs={class:"table-row d-grid w-100"},As=s("th",null,"#",-1),Us={class:"table-row d-grid w-100"},qs=s("td",null,"1",-1),Ms=s("br",null,null,-1),Vs={class:"c-gray"},zs=s("br",null,null,-1),Ks={class:"c-gray"},Zs=s("br",null,null,-1),Hs={class:"c-gray"},Js=s("br",null,null,-1),Qs={class:"c-gray"},Ws={class:"card"},Xs={class:"card-header bg-card-header"},Ys={class:"card-title mb-0"},xs={class:"card-body"},Ds={class:"row"},se={class:"col-xl-6"},ee={for:"division-name-select",class:"form-label"},te={for:"division-name-select",class:"form-label"},le={for:"division-name-select",class:"form-label"},oe={class:"col-xl-6"},ie={for:"division-name-select",class:"form-label"},de={for:"division-name-select",class:"form-label"},ae={for:"division-name-select",class:"form-label"},ne={key:0},ce={class:"card"},re={class:"card-body"},ue={class:"row"},_e={class:"col list1",style:{"min-height":"300px"}},me={class:"table-responsive"},pe={class:"drag_table"},he={class:"column5",style:{background:"none !important"}},ve={key:0,class:"semestr_title column1"},fe={key:1,class:"column5"},be={class:"column name_subject"},ye={class:"column"},ge={class:"column"},$e={class:"column"},we={class:"col list2"},Oe={style:{opacity:"0"}},ke=s("p",{style:{opacity:"0"}}," Tiklanadigan o'quv rejasi va semestrni tanlang ",-1),je={class:"table-responsive"},Ce={class:"drag_table"},Se={class:"top"},Be={key:0,class:"semestr_title list-group-item"},Ee={key:1,class:"list-group-item"},Ne={class:"column name_subject"},Le={class:"column"},Te={class:"column"},Fe={class:"column"},Pe={class:"column"},Ge={class:"col list3"},Ie={style:{opacity:"0"}},Re={class:"table-responsive"},Ae={class:"drag_table"},Ue={class:"top"},qe={key:0,class:"semestr_title list-group-item"},Me={key:1,class:"list-group-item"},Ve={class:"column name_subject"},ze={class:"column"},Ke={class:"column"},Ze={class:"column"},He={class:"column"},Je={class:"text-end"},Qe=["disabled"],ot=ns({__name:"id",async setup(We){let M,V;const ls=cs(),O=B([]),g=$([]),k=$([]),j=$([]),P=B([]),G=B([]),os=rs(),{t:b}=us(),z=B(!1),I=os.params.id;_s();const e=$({search:"",edu_plan_id:null,edu_type:null,semester_id:null,academic_group_id:null,edu_form:null,command_id:null,edu_form_id:null,edu_plan:null});$({});const f=$({eduPlanOptions:null,semesterOptions:null,academicGroupOptions:null,orderListOptions:null});B(!0),[M,V]=ms(()=>is()),await M,V(),ps(async()=>{f.orderListOptions=await bs().then(t=>{var o;return(o=t.result)==null?void 0:o.data.map(d=>({id:d==null?void 0:d.id,name:(d==null?void 0:d.name)+" "+(d==null?void 0:d.number)}))})});async function K(t,o){var d;if(o||(e.semester_id=null,e.academic_group_id=null,f.semesterOptions=null,f.academicGroupOptions=null),t){let n=await vs(t);f.academicGroupOptions=(d=n==null?void 0:n.result)==null?void 0:d.data.map(c=>({id:c.id,name:c.name}));let r=await fs(t).then(c=>{var h;return(h=c==null?void 0:c.result)==null?void 0:h.data});G.value=r,f.semesterOptions=G.value.map(c=>({id:c.id,name:c.course+"-"+b("Course")+" "+c.semester+"-"+b("semester_number")})),R()}}async function R(){if(e.semester_id){let t=G.value.find(d=>d.id==e.semester_id).semester,o=await gs(e.edu_plan_id,t).then(d=>d==null?void 0:d.result);ds(o)}}async function is(){var o,d,n,r;let t=await ys(I).then(c=>c.result);e.edu_plan_id=(o=t==null?void 0:t.edu_plan)==null?void 0:o.id,e.semester_id=(d=t==null?void 0:t.semester)==null?void 0:d.id,e.academic_group_id=(n=t==null?void 0:t.academic_group)==null?void 0:n.id,K(e.edu_plan_id,!0),Object.assign(e,t),f.eduPlanOptions=await hs((r=t==null?void 0:t.edu_form)==null?void 0:r.id).then(c=>{var h;return(h=c.result)==null?void 0:h.data}),P.value=t==null?void 0:t.semesters,A(t==null?void 0:t.semesters)}function Z(t){return!t.to.getElementsByClassName("list-group-item").length}U(()=>e.edu_plan_id,async()=>{K(e.edu_plan_id,!1)},{deep:!0}),U(()=>e.semester_id,async()=>{O.value=[],g.splice(0),k.splice(0),j.splice(0),R(),A(P.value)}),U(()=>e.academic_group_id,async()=>{O.value=[],g.splice(0),k.splice(0),j.splice(0),R(),A(P.value)});function ds(t){t.map(function(o){if((o==null?void 0:o.subjects)&&(o==null?void 0:o.subjects.length)>0){let d=[{semester:(o==null?void 0:o.semester)+"-semestr"}];O.value.push(d),g.push(d),j.push(d),o==null||o.subjects.forEach(n=>{let r=[],c=[n];g.push(r),O.value.push(c),j.push(c)})}})}function A(t){t.map(function(o){if((o==null?void 0:o.accreditations)&&(o==null?void 0:o.accreditations.length)>0){let d=[{semester:(o==null?void 0:o.semester)+"-semestr"}];k.push(d),o==null||o.accreditations.forEach(n=>{let r=[n];k.push(r)})}})}async function as(){var o,d;let t={students:[+I],semester_id:e==null?void 0:e.semester_id,academic_group_id:e==null?void 0:e.academic_group_id,command_id:e==null?void 0:e.command_id,accreditations:[]};g.forEach(function(n,r){var c,h,C,S;if(!((c=n[0])!=null&&c.semester)){let E={curriculum_subject_id:(h=j[r][0])==null?void 0:h.id,grade:((C=n[0])==null?void 0:C.grade)||null,ball:((S=n[0])==null?void 0:S.ball)||null};t.accreditations.push(E)}});try{z.value=!0}catch(n){ls.error(b("Dashboard_Error")+": "+((d=(o=n.response)==null?void 0:o.data)==null?void 0:d.message))}finally{z.value=!1}console.log(t,"datas")}return(t,o)=>{var h,C,S,E,H,J,Q;const d=T("router-link"),n=T("a-select"),r=T("a-form-item"),c=T("a-form");return _(),m("div",$s,[s("div",ws,[s("div",Os,[s("div",ks,[s("h5",js,[u(d,{to:"/status-student/transfer-recovery"},{default:v(()=>[y(l(t.$t("education__recovery")),1)]),_:1}),y(" / "+l(t.$t("student__fish")),1)]),s("div",Cs,[s("div",Ss,[u(d,{to:"/status-student/transfer-recovery",class:"btns black-c py-1.5 px-4"},{default:v(()=>[Bs,y(l(t.$t("Prev")),1)]),_:1})])])])])]),s("div",Es,[s("div",Ns,[s("div",Ls,[s("div",Ts,[s("h4",Fs,l(t.$t("Student_information")),1)]),s("div",Ps,[s("div",Gs,[s("table",Is,[s("thead",null,[s("tr",Rs,[As,s("th",null,l(t.$t("Student")),1),s("th",null,l(t.$t("Education_Type")),1),s("th",null,l(t.$t("Group")),1),s("th",null,l(t.$t("by_Level")),1),s("th",null,l(t.$t("Transfer_Status")),1),s("th",null,l(t.$t("Updated_At")),1)])]),s("tbody",null,[s("tr",Us,[qs,s("td",null,[s("div",null,[y(l(e==null?void 0:e.fullname)+" ",1),Ms,s("span",Vs,l(p(I)),1)])]),s("td",null,[s("div",null,[y(l((h=e==null?void 0:e.edu_type)==null?void 0:h.name)+" ",1),zs,s("span",Ks,l((C=e==null?void 0:e.edu_form)==null?void 0:C.name),1)])]),s("td",null,[s("div",null,[y(l((S=e==null?void 0:e.academic_group)==null?void 0:S.name)+" ",1),Zs,s("span",Hs,l((E=e==null?void 0:e.edu_plan)==null?void 0:E.name),1)])]),s("td",null,[s("div",null,[y(l((H=e==null?void 0:e.semester)==null?void 0:H.course)+" - kurs ",1),Js,s("span",Qs,l((J=e==null?void 0:e.semester)==null?void 0:J.semester)+" - semestr",1)])]),s("td",null,l((Q=e==null?void 0:e.student_status)==null?void 0:Q.name),1),s("td",null,l(e==null?void 0:e.updated_at),1)])])])])])])])]),s("div",Ws,[s("div",Xs,[s("h4",Ys,l(t.$t("Readmission_parametrs")),1)]),s("div",xs,[u(c,null,{default:v(()=>[s("div",Ds,[s("div",se,[u(r,{class:"mb-3",name:"educationType"},{default:v(()=>{var a;return[s("label",ee,l(t.$t("Education_Type")),1),u(n,{"filter-option":p(w).filterOptionByName,"show-search":"",value:(a=e.edu_type)==null?void 0:a.name,"field-names":{value:"id",label:"name"},placeholder:p(b)("Choose_Education_Type"),disabled:""},null,8,["filter-option","value","placeholder"])]}),_:1}),u(r,{class:"mb-3",name:"educationForm"},{default:v(()=>{var a;return[s("label",te,l(t.$t("Edu_form")),1),u(n,{"filter-option":p(w).filterOptionByName,"show-search":"","allow-clear":"",value:(a=e.edu_form)==null?void 0:a.name,"field-names":{value:"id",label:"name"},placeholder:p(b)("Choose_Education_Form"),disabled:""},null,8,["filter-option","value","placeholder"])]}),_:1}),u(r,{class:"mb-3",name:"nameFaculty"},{default:v(()=>[s("label",le,l(t.$t("Curriculum")),1),u(n,{"filter-option":p(w).filterOptionByName,"show-search":"",value:e.edu_plan_id,"onUpdate:value":o[0]||(o[0]=a=>e.edu_plan_id=a),"field-names":{value:"id",label:"name"},options:f.eduPlanOptions,placeholder:t.$t("Please_select_curriculum")},null,8,["filter-option","value","options","placeholder"])]),_:1})]),s("div",oe,[u(r,{class:"mb-3",name:"nameFaculty"},{default:v(()=>[s("label",ie,l(t.$t("semester")),1),u(n,{"filter-option":p(w).filterOptionByName,"show-search":"","allow-clear":"",value:e.semester_id,"onUpdate:value":o[1]||(o[1]=a=>e.semester_id=a),"field-names":{value:"id",label:"name"},disabled:!e.edu_plan_id,options:f.semesterOptions,placeholder:p(b)("Choose_Semester")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),u(r,{class:"mb-3",name:"nameFaculty"},{default:v(()=>[s("label",de,l(t.$t("Group")),1),u(n,{"filter-option":p(w).filterOptionByName,"show-search":"","allow-clear":"",value:e.academic_group_id,"onUpdate:value":o[2]||(o[2]=a=>e.academic_group_id=a),"field-names":{value:"id",label:"name"},options:f.academicGroupOptions,disabled:!e.edu_plan_id,placeholder:p(b)("Choose_Group")},null,8,["filter-option","value","options","disabled","placeholder"])]),_:1}),u(r,{class:"mb-3",name:"nameFaculty"},{default:v(()=>[s("label",ae,l(t.$t("Decree")),1),u(n,{"filter-option":p(w).filterOptionByName,"show-search":"","allow-clear":"",value:e.command_id,"onUpdate:value":o[3]||(o[3]=a=>e.command_id=a),"field-names":{value:"id",label:"name"},options:f.orderListOptions,placeholder:p(b)("Select_the_command")},null,8,["filter-option","value","options","placeholder"])]),_:1})])])]),_:1})])]),(_(),m("div",ne,[ss(s("div",ce,[s("div",re,[s("div",ue,[s("div",_e,[s("h5",null,l(t.$t("Readmission_Curr_Courses")),1),s("p",null,l(t.$t("Select_the_curriculum_and_semester_to_be_renewed")),1),s("div",me,[s("div",pe,[s("div",he,[s("div",null,l(t.$t("Subjects")),1),s("div",null,l(t.$t("Type")),1),s("div",null,l(t.$t("acload")),1),s("div",null,l(t.$t("Credit")),1)]),(_(!0),m(F,null,q(O.value,(a,N)=>{var i,L,W,X,Y,x,D;return _(),m(F,{key:a.id},[(i=a[0])!=null&&i.semester?(_(),m("div",ve,l((L=a[0])==null?void 0:L.semester),1)):(_(),m("div",fe,[s("div",be,l((X=(W=a[0])==null?void 0:W.subject)==null?void 0:X.name),1),s("div",ye,l((Y=a[0])==null?void 0:Y.type),1),s("div",ge,l((x=a[0])==null?void 0:x.load),1),s("div",$e,l((D=a[0])==null?void 0:D.credit),1)]))],64)}),128))])])]),s("div",we,[s("h5",Oe,l(t.$t("Readmission_Curr_Courses")),1),ke,s("div",je,[s("div",Ce,[s("div",Se,[s("div",null,l(t.$t("Subjects")),1),s("div",null,l(t.$t("Type")),1),s("div",null,l(t.$t("acload")),1),s("div",null,l(t.$t("Credit")),1),s("div",null,l(t.$t("gradeSome")),1)]),(_(!0),m(F,null,q(g,(a,N)=>(_(),m("div",{class:"block_list",key:N},[u(p(ts),{move:Z,class:"list-group",list:a,willInsertAfter:"false",group:"people",sort:!1,itemKey:"item.name"},{item:v(({element:i,index:L})=>[i!=null&&i.semester?(_(),m("div",Be,l(i==null?void 0:i.semester),1)):(_(),m("div",Ee,[s("div",Ne,l(i==null?void 0:i.subject),1),s("div",Le,l(i==null?void 0:i.subject_type),1),s("div",Te,l(i==null?void 0:i.load),1),s("div",Fe,l(i==null?void 0:i.credit),1),s("div",Pe,l(i==null?void 0:i.ball),1)]))]),_:2},1032,["list"])]))),128))])])]),s("div",Ge,[s("h5",null,l(t.$t("Academic_Records")),1),s("p",Ie,l(t.$t("Select_the_curriculum_and_semester_to_be_renewed")),1),s("div",Re,[s("div",Ae,[s("div",Ue,[s("div",null,l(t.$t("Subjects")),1),s("div",null,l(t.$t("Type")),1),s("div",null,l(t.$t("acload")),1),s("div",null,l(t.$t("Credit")),1),s("div",null,l(t.$t("gradeSome")),1)]),(_(!0),m(F,null,q(k,(a,N)=>(_(),m("div",{class:"block_list",key:N},[u(p(ts),{move:Z,class:"list-group",list:a,willInsertAfter:"false",group:"people",sort:!1,itemKey:"item.name"},{item:v(({element:i,index:L})=>[i!=null&&i.semester?(_(),m("div",qe,l(i==null?void 0:i.semester),1)):(_(),m("div",Me,[s("div",Ve,l(i==null?void 0:i.subject),1),s("div",ze,l(i==null?void 0:i.subject_type),1),s("div",Ke,l(i==null?void 0:i.load),1),s("div",Ze,l(i==null?void 0:i.credit),1),s("div",He,l(i==null?void 0:i.ball),1)]))]),_:2},1032,["list"])]))),128))])])])])])],512),[[es,(e==null?void 0:e.semester_id)&&(e==null?void 0:e.academic_group_id)]]),ss(s("div",Je,[s("button",{type:"button",class:"btns c-save m-3",onClick:o[4]||(o[4]=a=>as()),disabled:!e.command_id},l(t.$t("Run_Report")),9,Qe)],512),[[es,(e==null?void 0:e.semester_id)&&(e==null?void 0:e.academic_group_id)]])]))])}}});export{ot as default};
