import{d as X,a as N,n as tt,u as st,B as H,bO as et,Z as O,bq as P,i as nt,o as l,e as a,f as t,j as A,k as S,z as k,t as e,g as u,F as h,r as p,q as ot,l as B}from"./index.3390162f.js";import{S as lt}from"./sweetalert2.all.fdef424e.js";import{t as at,s as it,d as dt,e as rt}from"./subject.a5ecd5ae.js";const ct={pagetitle:"`O'quv reja`",class:"weeksPage"},_t={class:"card panel-header-bg"},ut={class:"card-body"},ht={class:"panel-header"},pt={class:"card-title"},yt={class:"panel-toggles"},ft=t("i",{class:"mdi mdi-download font-size-14 align-middle me-1"},null,-1),gt={class:"btns black-c py-1.5 px-4",type:"submit"},bt=t("i",{class:"mdi mdi-arrow-left font-size-14 align-middle me-1 me-1"},null,-1),wt={class:"card"},vt={class:"card-body"},mt={class:"table-responsive mb-4"},xt={class:"table-vertical"},kt={class:"table-row w-100 d-grid"},$t={colspan:"2",style:{"text-align":"cenetr"}},Ct={class:"table-row w-100 d-grid"},At={style:{"text-align":"start"}},St={style:{"text-align":"end"}},Bt={class:"table-row w-100 d-grid"},jt={style:{"text-align":"start"}},Tt=t("td",{style:{"text-align":"end"}},"0 / 0",-1),Lt={class:"table-row w-100 d-grid"},Rt={style:{"text-align":"start"}},zt={style:{"text-align":"end"}},Et={style:{"background-color":"#219ebc",color:"#fff"}},Ft=["colspan"],Ht=["colspan"],Ot={style:{"background-color":"#99c1de"}},Pt={rowspan:"2",style:{"min-width":"80px"}},Vt={rowspan:"2",style:{"min-width":"200px",width:"100%"}},qt={rowspan:"2",style:{"min-width":"80px"}},Dt={rowspan:"2",style:{"min-width":"200px",width:"100%"}},It={rowspan:"2",style:{"min-width":"100px"}},Gt={rowspan:"2",style:{"text-align":"start"},class:"vertical-text"},Ut={rowspan:"2",class:"vertical-text",style:{"text-align":"start"}},Wt={rowspan:"2",style:{"text-align":"start"},class:"vertical-text"},Yt=["colspan"],Mt=["colspan"],Zt=["colspan"],Jt=t("th",{colspan:"2",rowspan:"2",style:{"min-width":"60px"}},null,-1),Kt={style:{"background-color":"#ffbe0b"}},Qt={rowspan:"2",style:{"text-align":"start"},class:"vertical-text"},Xt={class:"p-0"},Nt={class:"flex-wrap-table"},ts={class:"p-0"},ss={class:"flex-wrap-table"},es={class:"p-0"},ns={class:"flex-wrap-table"},os={key:0},ls={key:0},as={key:0},is={class:"gridjs-td",style:{"min-width":"60px"}},ds={class:"list-inline mb-0"},rs={class:"list-inline-item"},cs=["onClick"],_s=t("i",{class:"mdi mdi-pencil font-size-18 text-primary"},null,-1),us=[_s],hs={class:"list-inline-item"},ps=["onClick"],ys=t("i",{class:"mdi mdi-delete font-size-18 text-danger"},null,-1),fs=[ys],gs={style:{"background-color":"#219ebc",color:"#fff"}},bs={colspan:"6",style:{"text-align":"end"}},ws=["colspan"],vs=t("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),Cs=X({__name:"subjects",props:{},async setup(ms){var R,z;let m,$;const{t:v}=N(),V=tt(),q=st(),j=H(!1);et();const C=(z=(R=V.params)==null?void 0:R.id)!=null?z:null;H(null);const D=O({curriculum_id:C}),c=O({}),y=([m,$]=P(()=>at().then(s=>s.result)),m=await m,$(),m);[m,$]=P(()=>T()),await m,$();async function T(){const s=await it(D);Object.assign(c,s.result)}async function I(s){q.push(`/curriculum/curriculum/${C}/subject-update/${s}`)}function L(s){return s.reduce((i,d)=>i+Number(d.value),0)}function G(s){return s.reduce((i,d)=>i+Number(d.credit),0)}function U(s){return s.reduce((i,d)=>i+Number(d.total_load),0)}function W(s){return s.reduce((i,d)=>i+L(d.curriculum_audience_hours),0)}function Y(s,i){var d;return s.find(o=>{var f;return((f=o.lesson_activity)==null?void 0:f.type)==i})?(d=s.find(o=>{var f;return((f=o.lesson_activity)==null?void 0:f.type)==i}))==null?void 0:d.value:0}function M(s,i){return s.reduce((d,o)=>d+Y(o.curriculum_audience_hours,i),0)}function Z(s,i){var d;return s.find(o=>{var f;return((f=o.additional_type)==null?void 0:f.type)==i})?(d=s.find(o=>{var f;return((f=o.additional_type)==null?void 0:f.type)==i}))==null?void 0:d.value:0}function J(s,i){return s.reduce((d,o)=>d+Z(o.curriculum_additional_types,i),0)}async function K(s){const i=lt.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger ml-2"},buttonsStyling:!1});try{(await i.fire({title:v("Delete_message.Are_you_sure"),text:v("Delete_message.Action_irreversible"),icon:"warning",confirmButtonText:v("Delete_message.Yes_Delete"),cancelButtonText:v("Delete_message.Yo_Cancel"),showCancelButton:!0})).isConfirmed&&(await dt(s),await T(),i.fire(v("Delete_message.Removed"),v("Delete_message.Record_deleted_successfull"),"success"))}catch(d){i.fire(v("Something_went_wrong"),d.message,"error")}}async function Q(s){try{j.value=!0;const i=await rt(s),d=URL.createObjectURL(new Blob([i],{type:"application/vnd.ms-excel"})),o=document.createElement("a");o.href=d,o.setAttribute("download",`Worksheet_${Date.now()}.xlsx`),document.body.appendChild(o),o.click()}catch(i){console.log({error:i})}finally{j.value=!1}}return(s,i)=>{const d=nt("router-link");return l(),a("div",ct,[t("div",_t,[t("div",ut,[t("div",ht,[t("h5",pt,[A(d,{to:"/curriculum/curriculum"},{default:S(()=>[k(e(s.$t("Curriculum"))+" / ",1)]),_:1}),k(e(c.name),1)]),t("div",yt,[t("button",{onClick:i[0]||(i[0]=o=>Q(u(C))),class:"btns c-save py-1.5 px-4 me-3",type:"button"},[ft,k(e(s.$t("Download")),1)]),A(d,{to:"/curriculum/curriculum"},{default:S(()=>[t("button",gt,[bt,k(e(s.$t("Back")),1)])]),_:1})])])])]),t("div",wt,[t("div",vt,[t("div",mt,[t("table",xt,[t("tr",kt,[t("td",$t,[t("b",null,e(c.name),1)])]),t("tr",Ct,[t("td",At,[t("b",null,e(s.$t("all_Main")),1)]),t("td",St,e(c==null?void 0:c.total_load)+" / "+e(c==null?void 0:c.total_credit),1)]),t("tr",Bt,[t("td",jt,[t("b",null,e(s.$t("all_Additional")),1)]),Tt]),t("tr",Lt,[t("td",Rt,[t("b",null,e(s.$t("Total_Point")),1)]),t("td",zt,e(c==null?void 0:c.total_load)+" / "+e(c==null?void 0:c.total_credit),1)])])]),(l(!0),a(h,null,p(c.semesters,(o,f)=>(l(),a("div",{key:f,class:"table-responsive table-curriculm mb-5"},[t("table",null,[t("thead",null,[t("tr",Et,[t("th",{colspan:9+u(y).lesson_activity.length+u(y).additional_type.length},e(c==null?void 0:c.name),9,Ft),t("th",{colspan:2+u(y).exam_type.length},e(o.semester)+"-"+e(s.$t("semester_number")),9,Ht)]),t("tr",Ot,[t("th",Pt,e(s.$t("sciense_type")),1),t("th",Vt,e(s.$t("Subject_name")),1),t("th",qt,e(s.$t("Subject_code")),1),t("th",Dt,e(s.$t("Hei_department")),1),t("th",It,e(s.$t("Curriculum_Rating_Grade")),1),t("th",Gt,e(s.$t("Test"))+" / "+e(s.$t("Exam")),1),t("th",Ut,e(s.$t("Credit")),1),t("th",Wt,e(s.$t("Hours")),1),t("th",{colspan:u(y).lesson_activity.length+1},e(s.$t("Auditorm_hour")),9,Yt),t("th",{colspan:u(y).additional_type.length},e(s.$t("Extra_hour")),9,Mt),t("th",{colspan:u(y).exam_type.length,style:{"min-width":"60px"}},e(s.$t("Rating_Grades")),9,Zt),Jt]),t("tr",Kt,[t("th",Qt,e(s.$t("Total_Point")),1),(l(!0),a(h,null,p(u(y).lesson_activity,(n,g)=>(l(),a("th",{rowspan:"2",style:{"text-align":"start"},class:"vertical-text",key:g},e(n.name),1))),128)),(l(!0),a(h,null,p(u(y).additional_type,(n,g)=>(l(),a("th",{rowspan:"2",style:{"text-align":"start"},class:"vertical-text",key:g},e(n.name),1))),128)),(l(!0),a(h,null,p(u(y).exam_type,(n,g)=>(l(),a("th",{rowspan:"2",style:{"text-align":"start"},class:"vertical-text",key:g},e(n.name),1))),128))])]),t("tbody",null,[(l(!0),a(h,null,p(o.curriculums,(n,g)=>{var E,F;return l(),a("tr",{key:g,class:ot((n==null?void 0:n.subject_type_code)==12?"bg-light text-primary":"")},[t("td",null,e(n.type),1),t("td",Xt,[t("div",Nt,[(l(!0),a(h,null,p(n.subjects,(_,b)=>{var r;return l(),a("span",{key:b},e((r=_==null?void 0:_.subjects)==null?void 0:r.name),1)}),128))])]),t("td",ts,[t("div",ss,[(l(!0),a(h,null,p(n.subjects,(_,b)=>{var r;return l(),a("span",{key:b},e((r=_==null?void 0:_.subjects)==null?void 0:r.code),1)}),128))])]),t("td",es,[t("div",ns,[(l(!0),a(h,null,p(n.subjects,(_,b)=>{var r;return l(),a("span",{key:b},e((r=_==null?void 0:_.departments)==null?void 0:r.name),1)}),128))])]),t("td",null,e((E=n==null?void 0:n.ratinggrade)==null?void 0:E.name),1),t("td",null,e((F=n==null?void 0:n.final_exam_type)==null?void 0:F.name[0]),1),t("td",null,e(n==null?void 0:n.credit),1),t("td",null,e(n==null?void 0:n.total_load),1),t("td",null,e(L(n.curriculum_audience_hours)),1),(l(!0),a(h,null,p(u(y).lesson_activity,(_,b)=>(l(),a("td",{key:b},[(l(!0),a(h,null,p(n.curriculum_audience_hours,(r,x)=>{var w;return l(),a("span",{key:x},[_.id==((w=r==null?void 0:r.lesson_activity)==null?void 0:w.id)?(l(),a("span",os,e(r.value),1)):B("",!0)])}),128))]))),128)),(l(!0),a(h,null,p(u(y).additional_type,(_,b)=>(l(),a("td",{key:b},[(l(!0),a(h,null,p(n.curriculum_additional_types,(r,x)=>{var w;return l(),a("span",{key:x},[_.id==((w=r==null?void 0:r.additional_type)==null?void 0:w.id)?(l(),a("span",ls,e(r.value),1)):B("",!0)])}),128))]))),128)),(l(!0),a(h,null,p(u(y).exam_type,(_,b)=>(l(),a("td",{key:b},[(l(!0),a(h,null,p(n.curriculum_exam_types,(r,x)=>{var w;return l(),a("span",{key:x},[_.id==((w=r==null?void 0:r.exam_type)==null?void 0:w.id)?(l(),a("span",as,e(r.value),1)):B("",!0)])}),128))]))),128)),t("td",is,[t("ul",ds,[t("li",rs,[t("div",null,[t("a",{type:"text",onClick:_=>I(n.id)},us,8,cs)])]),t("li",hs,[t("div",null,[t("a",{class:"text-danger",type:"danger",onClick:_=>K(n.id)},fs,8,ps)])])])])],2)}),128)),t("tr",gs,[t("th",bs,e(s.$t("In_total_semester")),1),t("td",null,e(G(o==null?void 0:o.curriculums)),1),t("td",null,e(U(o==null?void 0:o.curriculums)),1),t("td",null,e(W(o==null?void 0:o.curriculums)),1),(l(!0),a(h,null,p(u(y).lesson_activity,(n,g)=>(l(),a("td",{key:g},e(M(o==null?void 0:o.curriculums,n==null?void 0:n.type)),1))),128)),(l(!0),a(h,null,p(u(y).additional_type,(n,g)=>(l(),a("td",{key:g},e(J(o==null?void 0:o.curriculums,n==null?void 0:n.type)),1))),128)),t("th",{colspan:2+u(y).exam_type.length,class:"p-0"},[A(d,{class:"btns c-subject-add py-2 px-4",type:"text",to:`/curriculum/curriculum/${u(C)}/create-subject/${o.id}`},{default:S(()=>[vs,k(" "+e(s.$t("Add_subject")),1)]),_:2},1032,["to"])],8,ws)])])])]))),128))])])])}}});export{Cs as default};
