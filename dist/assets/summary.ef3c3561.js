import{_ as I}from"./Pagination.f4a9fc5d.js";import{_ as E}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as V,d as z,a as M,Z as y,B as R,y as T,w as b,i as f,b6 as q,o as n,e as r,f as a,t as l,bs as A,z as B,j as c,k as p,v as J,g,s as N,l as w,F as O,r as k,aR as Z}from"./index.3390162f.js";import{k as H}from"./index.30e99442.js";import{a as K,b as Q,s as W}from"./id.5a6e5f30.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";const X=V();async function x(C){try{const{data:_}=await X({url:"api/exam-results/summary-record",params:C});return _}catch(_){throw _}}const D={pagetitle:"`Jamlanma qaytnoma`",class:"summaryPage"},ee={class:"card panel-header-bg"},ae={class:"card-body"},se={class:"panel-header"},te={class:"card-title"},le={class:"panel-toggles"},oe={class:"filterBlock"},ie={class:"btns c-filter py-1.5 px-4"},ne=a("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),de={class:"collapse__block"},re={class:"my-2 col-md-7 form--item"},ce={for:"yu"},_e={class:"my-2 col-md-5 form--item"},ue={for:"yu"},me={class:"my-2 col-md-5 form--item"},pe={class:"my-2 col-md-5 form--item"},he={class:"my-2 col-md-2"},ye=["disabled"],fe=a("i",{class:"mdi mdi-search-web me-2"},null,-1),ve={class:"row table-division"},be={class:"col-md-12"},ge={class:"card"},we={class:"card-body"},Oe={key:1,class:"table-responsive table-statistical"},ke=a("th",null,"\u2116",-1),Ce={class:"text-start"},$e={style:{"text-align":"start"}},Pe={key:2},Be={class:"text-center"},Ne={class:"text-center"},Se={key:0,class:"element-count mb-2"},Ve=z({__name:"summary",setup(C){const{t:_}=M();y({});const e=y({search:"",data:[],edu_plan_id:null,academic_year_id:null,course:null,semester_id:null,academic_group_id:null,current_page:1}),d=y({eduPlanOptions:null,academicYearsOptions:null,semesterOptions:null,academicGroupOptions:null}),v=R(!1);T(async()=>{d.eduPlanOptions=await H().then(s=>{var t;return(t=s==null?void 0:s.result)==null?void 0:t.data})}),b(()=>e.edu_plan_id,async()=>{var s,t;if(e.academic_year_id=null,e.semester_id=null,e.academic_group_id=null,d.academicYearsOptions=null,d.academicGroupOptions=null,d.semesterOptions=null,e.edu_plan_id){let i=await K(e.edu_plan_id);d.academicYearsOptions=(s=i==null?void 0:i.result)==null?void 0:s.data.map(m=>({id:m.id,name:m.name}));let u=await Q(e.edu_plan_id);d.academicGroupOptions=(t=u==null?void 0:u.result)==null?void 0:t.data.map(m=>({id:m.id,name:m.name}))}}),b(()=>e.academic_year_id,async()=>{var s;if(e.semester_id=null,d.semesterOptions=null,e.edu_plan_id&&e.academic_year_id){let t=await W(e);d.semesterOptions=(s=t==null?void 0:t.result)==null?void 0:s.data.map(i=>({id:i.id,semester:i.semester,name:i.course+"-"+_("Course")+" "+i.semester+"-"+_("semester")}))}}),b(()=>e.current_page,async s=>{Number(s)&&(e.page=Number(s),await $())});async function S(){await $()}async function $(){try{v.value=!0;let s=y({});e.semester_id&&(s.semester_id=e.semester_id),e.academic_year_id&&(s.academic_year_id=e.academic_year_id),e.edu_plan_id&&(s.edu_plan_id=e.edu_plan_id),e.academic_group_id&&(s.academic_group_id=e.academic_group_id);const t=await x(s);Object.assign(e,t.result)}catch(s){console.log(s)}finally{v.value=!1}}return(s,t)=>{var P;const i=f("a-select"),u=f("a-space"),m=f("b-card"),G=f("b-collapse"),Y=E,L=I,F=q("b-toggle");return n(),r("div",D,[a("div",ee,[a("div",ae,[a("div",se,[a("h5",te,l(s.$t("Performance_Summary")),1),a("div",le,[a("div",oe,[A((n(),r("button",ie,[ne,B(l(s.$t("Filter")),1)])),[[F,void 0,void 0,{"collapse-3":!0}]])])])])])]),a("div",de,[c(G,{visible:"",id:"collapse-3"},{default:p(()=>[c(m,null,{default:p(()=>[a("form",{class:"row",onSubmit:J(S,["prevent"])},[a("div",re,[c(u,null,{default:p(()=>[c(i,{"allow-clear":"",value:e.edu_plan_id,"onUpdate:value":t[0]||(t[0]=o=>e.edu_plan_id=o),"field-names":{value:"id",label:"name"},options:d.eduPlanOptions,placeholder:s.$t("Please_select_curriculum")},null,8,["value","options","placeholder"])]),_:1}),a("label",ce,l(s.$t("Choose_Curriculum")),1)]),a("div",_e,[c(u,null,{default:p(()=>[c(i,{"allow-clear":"",value:e.academic_year_id,"onUpdate:value":t[1]||(t[1]=o=>e.academic_year_id=o),"field-names":{value:"id",label:"name"},options:d.academicYearsOptions,disabled:!e.edu_plan_id,placeholder:g(_)("Choose_Education_Year")},null,8,["value","options","disabled","placeholder"])]),_:1}),a("label",ue,l(s.$t("Choose_Education_Year")),1)]),a("div",me,[c(u,null,{default:p(()=>[c(i,{"allow-clear":"",value:e.semester_id,"onUpdate:value":t[2]||(t[2]=o=>e.semester_id=o),"field-names":{value:"id",label:"name"},options:d.semesterOptions,disabled:!e.academic_year_id,placeholder:g(_)("Choose_Semester")},null,8,["value","options","disabled","placeholder"])]),_:1}),a("label",null,l(s.$t("Choose_Semester")),1)]),a("div",pe,[c(u,null,{default:p(()=>[c(i,{"allow-clear":"",value:e.academic_group_id,"onUpdate:value":t[3]||(t[3]=o=>e.academic_group_id=o),"field-names":{value:"id",label:"name"},options:d.academicGroupOptions,disabled:!e.edu_plan_id,placeholder:g(_)("Choose_Group")},null,8,["value","options","disabled","placeholder"])]),_:1}),a("label",null,l(s.$t("Choose_Group")),1)]),a("div",he,[a("button",{disabled:!e.academic_group_id||!e.semester_id||!e.academic_year_id||!e.edu_plan_id,type:"submit",class:"btn-search search-color"},[fe,B(l(s.$t("search")),1)],8,ye)])],32)]),_:1})]),_:1})]),a("div",ve,[a("div",be,[a("div",ge,[a("div",we,[v.value?(n(),N(Y,{key:0})):w("",!0),((P=e==null?void 0:e.subjects)==null?void 0:P.length)>0?(n(),r("div",Oe,[a("table",null,[a("thead",null,[a("tr",null,[ke,a("th",Ce,l(s.$t("Fullname_of_Student")),1),(n(!0),r(O,null,k(e==null?void 0:e.subjects,o=>(n(),r("th",{key:o.id},l(o.name),1))),128))])]),a("tbody",null,[(n(!0),r(O,null,k(e==null?void 0:e.students,(o,U)=>(n(),r("tr",{key:o.id},[a("td",null,l(U+1),1),a("td",$e,l(o==null?void 0:o.fullname),1),(n(!0),r(O,null,k(o.ratings,(h,j)=>(n(),r("td",{key:j},l(h.rating?h.rating:0)+"["+l(h.position?h.position:0)+"] ",1))),128))]))),128))])]),e.last_page>1?(n(),N(L,Z({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":t[4]||(t[4]=o=>e.current_page=o)}),null,16,["current-page"])):w("",!0)])):(n(),r("div",Pe,[a("h5",Be,l(s.$t("No_data")),1),a("p",Ne,l(s.$t("No_information_found")),1)]))])]),e.data.length?(n(),r("span",Se,l(e.current_page)+"-"+l(e.data.length+e.per_page*(e.current_page-1))+"/ "+l(s.$t("Total_Point"))+": "+l(e.total),1)):w("",!0)])])])}}});export{Ve as default};
