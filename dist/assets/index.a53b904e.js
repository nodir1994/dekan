import{_ as j}from"./Pagination.f4a9fc5d.js";import{d as x,a as q,bO as M,B as S,Z as $,bq as Z,y as H,w as h,i as v,b6 as J,o as m,e as y,f as t,t as s,j as a,k as r,z as _,bs as K,g as p,F as Q,r as W,s as X,aR as Y,l as F}from"./index.3390162f.js";import{e as D,b as ee,a8 as te}from"./index.30e99442.js";import{c as oe,g as le,e as se,a as ie}from"./give.14ed0249.js";import{l as ae,g as ne}from"./id.5a6e5f30.js";import{h as f}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const de={pagetitle:"'Diplom berish'",class:"award"},ce={class:"card panel-header-bg"},re={class:"card-body"},_e={class:"panel-header"},ue={class:"card-title"},pe={class:"panel-toggles"},me={class:"btns c-save py-1.5 px-4 me-3",type:"submit"},he=t("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),ye={class:"filterBlock"},fe={class:"btns c-filter py-1.5 px-4"},ge=t("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ve={class:"collapse__block"},be={class:"row"},we={class:"my-2 col-xl-3 form--item"},ke={for:"yu"},$e={class:"my-2 col-xl-3 form--item"},Oe={class:"my-2 col-xl-3 form--item"},Ce={for:"yu"},Ne={class:"my-2 col-xl-3 form--item"},Be={for:"yu"},Te={class:"my-2 col-xl-3 form--item"},Se={for:"yu"},Fe={class:"my-2 col-xl-7 form--item"},Ue={for:"yu"},Le={class:"my-2 col-xl-2"},Ee=t("i",{class:"mdi mdi-magnify font-size-14 align-middle me-1"},null,-1),Ge={class:"card"},Pe={class:"card-body"},Re={key:0,class:"table-responsive"},ze={class:"content-table"},Ae={class:"table-row-gived"},Ie=t("th",null,"#",-1),Ve={class:"badge bg-success"},je=t("br",null,null,-1),xe=t("br",null,null,-1),qe=["onClick"],Me=t("i",{class:"mdi mdi-download font-size-14 align-middle me-1"},null,-1),Ze=["onClick"],He=t("i",{class:"mdi mdi-download font-size-14 align-middle me-1"},null,-1),Je={class:"form-check form-switch my-auto"},Ke=["checked","disabled","onChange"],Qe={key:1},We={class:"text-center"},Xe={class:"text-center"},Ye={key:0,class:"element-count mb-2"},ct=x({__name:"index",async setup(De){let O,C;const{t:b}=q(),N=M(),w=S(!1),e=$({search:"",specialty_id:null,edu_type_id:null,academic_group_id:null,edu_form_id:null,diplom_category_id:null,data:[],links:[],students:[],current_page:1,per_page:f.pagePer,page:1}),d=$({eduTypeOptions:null,eduFormOptions:null,specialOptions:null,academicGroupOptions:null,diplomTypeOptions:null}),k=S(!0);[O,C]=Z(()=>c()),await O,C(),H(async()=>{d.eduTypeOptions=await D().then(o=>o.result),d.eduFormOptions=await ee().then(o=>o.result),d.diplomTypeOptions=await te().then(o=>o.result)}),h(()=>e.edu_type_id,async()=>{await c(),e.specialty_id=null,d.specialOptions=null,e.edu_type_id&&(d.specialOptions=await ae(e.edu_type_id).then(o=>{var l;return(l=o.result)==null?void 0:l.data.map(n=>({id:n.id,name:n.name+`-(${n.code})`}))}))});async function U(o){try{w.value=!0,await oe(o),await c(),N.success(b("Data_stored_successfully"))}catch(l){N.error(l.message)}finally{w.value=!1}}h(()=>e.edu_form_id,async()=>{await c()}),h(()=>e.diplom_category_id,async()=>{await c()}),h(()=>e.specialty_id,async()=>{var o;if(e.academic_group_id=null,d.academicGroupOptions=null,await c(),e.specialty_id){let l=await ne(e.specialty_id);d.academicGroupOptions=(o=l==null?void 0:l.result)==null?void 0:o.data.map(n=>({id:n.id,name:n.name}))}}),h(()=>[e.edu_form_id,e.academic_group_id],async(o,l)=>{await c()}),h(()=>e.current_page,async o=>{Number(o)&&(e.page=Number(o),await c(o))}),h(()=>e.academic_group_id,async()=>{await c()}),$({});async function L(){await c()}async function c(o){w.value=!0;let l={page:o,per_page:e.per_page};e.search.length>0&&(l.search=e==null?void 0:e.search),e.edu_type_id&&(l.edu_type_id=e==null?void 0:e.edu_type_id),e.edu_form_id&&(l.edu_form_id=e==null?void 0:e.edu_form_id),e.specialty_id&&(l.specialty_id=e==null?void 0:e.specialty_id),e.academic_group_id&&(l.academic_group_id=e==null?void 0:e.academic_group_id),e.diplom_category_id&&(l.diplom_category_id=e==null?void 0:e.diplom_category_id);try{if(k.value){k.value=!1;const n=await le(l);Object.assign(e,n.result),setTimeout(()=>{k.value=!0},f.loaderRefresh)}}catch(n){console.log(n)}finally{w.value=!1}}function B(o){const l=new Blob([o],{type:"application/pdf"}),n=URL.createObjectURL(l),u=document.createElement("a");u.href=n,u.download="FileName"+new Date+".pdf",u.click()}async function E(o){let l=await se(o);B(l)}async function G(o){let l=await ie(o);B(l)}return(o,l)=>{const n=v("router-link"),u=v("a-select"),g=v("a-space"),P=v("a-input"),R=v("b-card"),z=v("b-collapse"),A=j,I=J("b-toggle");return m(),y("div",de,[t("div",ce,[t("div",re,[t("div",_e,[t("h5",ue,s(o.$t("archive_Diploma")),1),t("div",pe,[a(n,{to:{path:"/archive/diplom-give/create"}},{default:r(()=>[t("button",me,[he,_(s(o.$t("Create")),1)])]),_:1}),t("div",ye,[K((m(),y("button",fe,[ge,_(s(o.$t("Filter")),1)])),[[I,void 0,void 0,{"collapse-3":!0}]])])])])])]),t("div",ve,[a(z,{visible:"",id:"collapse-3"},{default:r(()=>[a(R,null,{default:r(()=>[t("div",be,[t("div",we,[a(g,null,{default:r(()=>[a(u,{"filter-option":p(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_type_id,"onUpdate:value":l[0]||(l[0]=i=>e.edu_type_id=i),"field-names":{value:"id",label:"name"},options:d.eduTypeOptions,placeholder:p(b)("Choose_Education_Type")},null,8,["filter-option","value","options","placeholder"])]),_:1}),t("label",ke,s(o.$t("Choose_Education_Type")),1)]),t("div",$e,[a(g,null,{default:r(()=>[a(u,{"filter-option":p(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.edu_form_id,"onUpdate:value":l[1]||(l[1]=i=>e.edu_form_id=i),"field-names":{value:"id",label:"name"},options:d.eduFormOptions,placeholder:p(b)("Choose_Education_Form")},null,8,["filter-option","value","options","placeholder"])]),_:1}),t("label",null,s(o.$t("Choose_Education_Form")),1)]),t("div",Oe,[a(g,null,{default:r(()=>[a(u,{"filter-option":p(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.specialty_id,"onUpdate:value":l[2]||(l[2]=i=>e.specialty_id=i),"field-names":{value:"id",label:"name"},options:d.specialOptions,disabled:!e.edu_type_id,placeholder:o.$t("Please_select_curriculum")},null,8,["filter-option","value","options","disabled","placeholder"])]),_:1}),t("label",Ce,s(o.$t("select__specialty")),1)]),t("div",Ne,[a(g,null,{default:r(()=>[a(u,{"filter-option":p(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.academic_group_id,"onUpdate:value":l[3]||(l[3]=i=>e.academic_group_id=i),"field-names":{value:"id",label:"name"},disabled:!e.specialty_id,options:d.academicGroupOptions,placeholder:p(b)("Choose_Group")},null,8,["filter-option","value","disabled","options","placeholder"])]),_:1}),t("label",Be,s(o.$t("Choose_Group")),1)]),t("div",Te,[a(g,null,{default:r(()=>[a(u,{"filter-option":p(f).filterOptionByName,"show-search":"","allow-clear":"",value:e.diplom_category_id,"onUpdate:value":l[4]||(l[4]=i=>e.diplom_category_id=i),"field-names":{value:"id",label:"name"},options:d.diplomTypeOptions,placeholder:p(b)("choose_diplom_type")},null,8,["filter-option","value","options","placeholder"])]),_:1}),t("label",Se,s(o.$t("choose_diplom_type")),1)]),t("div",Fe,[a(g,null,{default:r(()=>[a(P,{id:"yu",value:e.search,"onUpdate:value":l[5]||(l[5]=i=>e.search=i),class:"form-control","allow-clear":""},null,8,["value"])]),_:1}),t("label",Ue,s(o.$t("Search_by_Diploma_Number_Register_Number")),1)]),t("div",Le,[t("button",{class:"btn-search search-color",onClick:L},[Ee,_(s(o.$t("Search")),1)])])])]),_:1})]),_:1})]),t("div",Ge,[t("div",Pe,[e.data.length?(m(),y("div",Re,[t("table",ze,[t("thead",null,[t("tr",Ae,[Ie,t("th",null,s(o.$t("Student")),1),t("th",null,s(o.$t("Education_Type")),1),t("th",null,s(o.$t("by_Specialty")),1),t("th",null,s(o.$t("Diploma_number")),1),t("th",null,s(o.$t("academic_Register_Number")),1),t("th",null,s(o.$t("Files")),1),t("th",null,s(o.$t("Confirmation")),1)])]),t("tbody",null,[(m(!0),y(Q,null,W(e.data,(i,V)=>(m(),y("tr",{class:"table-row-gived",key:i.id},[t("td",null,s((e.current_page-1)*e.per_page+V+1),1),t("td",null,[a(n,{to:"/archive/diplom-give/edit?id="+(i==null?void 0:i.id)},{default:r(()=>[_(s(i.surname)+" "+s(i.name)+" "+s(i.last_name)+" \xA0 ",1),t("span",Ve,s(i.status_form),1)]),_:2},1032,["to"])]),t("td",null,s(i.edu_type),1),t("td",null,s(i.speciality_code),1),t("td",null,[t("div",null,[_(s(i.number)+" ",1),je,_(" "+s(i.category),1)])]),t("td",null,[t("div",null,[_(s(i.note_number)+" ",1),xe,_(" "+s(i.note_date)+" - "+s(i.dak_date),1)])]),t("td",null,[t("div",null,[t("a",{onClick:T=>E(i.id),class:"btns c-save py-1.5 px-4 w-100 d-inline-block mb-2"},[Me,_(s(o.$t("Diploma")),1)],8,qe),t("a",{onClick:T=>G(i.id),class:"btns c-save py-1.5 px-4 w-100 d-inline-block"},[He,_(s(o.$t("Print_Supplement")),1)],8,Ze)])]),t("td",null,[t("div",Je,[t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:i.status,disabled:w.value,onChange:T=>U(i.id)},null,40,Ke)])])]))),128))])]),e.last_page>1?(m(),X(A,Y({key:0,class:"mt-2"},{...e},{"current-page":e.current_page,"onUpdate:currentPage":l[6]||(l[6]=i=>e.current_page=i)}),null,16,["current-page"])):F("",!0)])):(m(),y("div",Qe,[t("h5",We,s(o.$t("No_data")),1),t("p",Xe,s(o.$t("No_information_found")),1)]))])]),e!=null&&e.total?(m(),y("span",Ye,s(e==null?void 0:e.current_page)+"-"+s((e==null?void 0:e.data.length)+e.per_page*((e==null?void 0:e.current_page)-1))+"/ "+s(o.$t("Total_Point"))+": "+s(e==null?void 0:e.total),1)):F("",!0)])}}});export{ct as default};
