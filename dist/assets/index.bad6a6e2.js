import{_ as V}from"./Pagination.f4a9fc5d.js";import{bR as W,d as j,h as z,B as g,a as E,c as I,Z as v,y as M,w as O,i as f,b6 as R,o as c,e as _,f as e,t as a,bs as Z,z as Y,j as i,k as m,v as G,g as B,s as U,l as C,F as H,r as J,aR as K,q as Q}from"./index.3390162f.js";import{W as X,V as x,a as ee}from"./index.30e99442.js";import{_ as te}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{_ as ae}from"./NoData.ac42776e.js";import{h as se}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";/* empty css                                                               */import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const oe=W();async function le(L){try{const{data:u}=await oe({url:"/api/statistic/student/category",params:L});return u}catch(u){throw u}}const ne={pagetitle:"`Talaba ro'yxati (toifa)`",class:"byStudentSocial"},ie={class:"card panel-header-bg"},re={class:"card-body"},ce={class:"panel-header"},de={class:"card-title"},ue={class:"panel-toggles"},_e={class:"filterBlock"},pe={class:"btns c-filter py-1.5 px-4"},me=e("i",{class:"mdi mdi-filter me-2"},null,-1),ge={class:"collapse__block"},ye={class:"my-2 col-md-6 form--item"},he={for:"yu"},ve={class:"my-2 col-md-6 form--item"},fe={for:"yu"},be={class:"my-2 col-md-6 form--item"},we={for:"yu"},Se={class:"my-2 col-md-4 form--item"},$e={for:"yu"},Ce={class:"my-2 col-md-2 form--item"},Le=["disabled"],ke=e("i",{class:"mdi mdi-eye me-2"},null,-1),Ne={class:"card"},Te={class:"card-body"},Pe={key:1,class:"table-responsiveWS"},Ye={class:"table-header"},Be={style:{width:"33%"}},Ue={style:{width:"33%"}},qe={style:{width:"33%"}},Ae={class:"table-responsive"},De={class:"table-vertical"},Fe={class:"table-row d-grid w-100"},Ve=e("th",null,"#",-1),We={key:2,class:"table-responsiveWS"},Qe=j({__name:"index",setup(L){const u=z(),y=g(!1),{t:b}=E(),k=g(),N=g(),T=g(),q=I(()=>{var t,l;return(l=(t=u==null?void 0:u.user)==null?void 0:t.faculty)==null?void 0:l.name}),h=g({sequenceNumber:null,theNumber:null,sorting:null}),o=v({academic_year_id:null,semester_type:null,social_category_id:null,per_page:se.pagePer,page:1}),s=v({pagination:{current_page:1,per_page:o.per_page,loading:!1},result:[]}),r=v({optionfacultyList:null,optionacademicYeList:null,optionTypeSemester:null,optionsocialCategoryList:null});M(async()=>{r.optionsocialCategoryList=await X().then(t=>t.result),r.optionTypeSemester=await x().then(t=>t.result),r.optionacademicYeList=await ee().then(t=>{var l;return(l=t.result)==null?void 0:l.data})}),O(()=>s.pagination.current_page,async t=>{Number(t)&&(o.page=Number(t),await w(t))});async function A(){k.value=r.optionTypeSemester.find(t=>t.code==o.semester_type).name,N.value=r.optionacademicYeList.find(t=>t.id==o.academic_year_id).name,T.value=r.optionsocialCategoryList.find(t=>t.id==o.social_category_id).name,await w()}async function w(t){delete o.page;let l=v({...o,page:t||1});try{y.value=!0;const d=await le(l);Object.assign(s,d);let p=`${s.pagination.per_page*(s.pagination.current_page-1)+1}- ${s.result.length+s.pagination.per_page*(s.pagination.current_page-1)}`,S=`${b("Total_Point")} : ${s.pagination.total}`,$=s.pagination.per_page*(s.pagination.current_page-1);h.value.sequenceNumber=p,h.value.theNumber=S,h.value.sorting=$}catch(d){console.log(d)}finally{y.value=!1}}return(t,l)=>{const d=f("a-select"),p=f("a-space"),S=f("b-card"),$=f("b-collapse"),D=V,F=R("b-toggle");return c(),_("div",ne,[e("div",ie,[e("div",re,[e("div",ce,[e("h5",de,a(t.$t("Student_list"))+" ("+a(t.$t("category"))+") ",1),e("div",ue,[e("div",_e,[Z((c(),_("button",pe,[me,Y(a(t.$t("Filtr")),1)])),[[F,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",ge,[i($,{visible:"",id:"collapse-3"},{default:m(()=>[i(S,null,{default:m(()=>[e("form",{class:"row",onSubmit:G(A,["prevent"])},[e("div",ye,[i(p,null,{default:m(()=>[i(d,{class:"form--item",value:q.value,disabled:""},null,8,["value"])]),_:1}),e("label",he,a(t.$t("Choose_faculty")),1)]),e("div",ve,[i(p,null,{default:m(()=>[i(d,{class:"form--item",value:o.academic_year_id,"onUpdate:value":l[0]||(l[0]=n=>o.academic_year_id=n),options:r.optionacademicYeList,"field-names":{value:"id",label:"name"},allowClear:""},null,8,["value","options"])]),_:1}),e("label",fe,a(t.$t("Choose_Education_Year")),1)]),e("div",be,[i(p,null,{default:m(()=>[i(d,{class:"form--item",value:o.semester_type,"onUpdate:value":l[1]||(l[1]=n=>o.semester_type=n),options:r.optionTypeSemester,"field-names":{value:"code",label:"name"},allowClear:""},null,8,["value","options"])]),_:1}),e("label",we,a(B(b)("Choose_Semestr_Type")),1)]),e("div",Se,[i(p,null,{default:m(()=>[i(d,{class:"form--item",value:o.social_category_id,"onUpdate:value":l[2]||(l[2]=n=>o.social_category_id=n),options:r.optionsocialCategoryList,"field-names":{value:"id",label:"name"},allowClear:""},null,8,["value","options"])]),_:1}),e("label",$e,a(t.$t("Social_Category")),1)]),e("div",Ce,[e("button",{disabled:!o.academic_year_id||o.semester_type==null||!o.social_category_id,class:"btn-search c-save",type:"submit"},[ke,Y(a(t.$t("View_Academic_Sheet")),1)],8,Le)])],32)]),_:1})]),_:1})]),e("div",Ne,[e("div",Te,[y.value?(c(),U(te,{key:0})):C("",!0),s.result.length>0?(c(),_("div",Pe,[e("div",Ye,[e("table",null,[e("tr",null,[e("td",Be,[e("span",null,a(t.$t("Academic_year"))+":",1),e("b",null,a(N.value),1)]),e("td",Ue,[e("span",null,a(t.$t("Semester_type"))+":",1),e("b",null,a(k.value),1)]),e("td",qe,[e("span",null,a(t.$t("Social_class"))+":",1),e("b",null,a(T.value),1)])])])]),e("div",Ae,[e("table",De,[e("thead",null,[e("tr",Fe,[Ve,e("th",null,a(t.$t("Student")),1),e("th",null,a(B(b)("Type_of_education")),1),e("th",null,a(t.$t("Form_of_education")),1),e("th",null,a(t.$t("semester")),1)])]),e("tbody",null,[(c(!0),_(H,null,J(s.result,(n,P)=>(c(),_("tr",{class:"table-row d-grid w-100",key:P},[e("td",null,a(h.value.sorting+P+1),1),e("td",null,a(n.name)+" "+a(n.surname)+" "+a(n.last_name),1),e("td",null,a(n.edu_type),1),e("td",null,a(n.edu_form),1),e("td",null,a(n.semester)+"-"+a(t.$t("semester")),1)]))),128))])]),s.pagination.last_page>1?(c(),U(D,K({key:0,class:"mt-2"},{...s.pagination},{"current-page":s.pagination.current_page,"onUpdate:currentPage":l[3]||(l[3]=n=>s.pagination.current_page=n),loading:y.value,onOnPageChange:w}),null,16,["current-page","loading"])):C("",!0)])])):(c(),_("div",We,[i(ae)]))])]),s.pagination.total?(c(),_("span",{key:0,class:Q(["element-count mb-2",s.pagination.total?"":"d-none"])},a(s.pagination.current_page)+"-"+a(s.result.length+s.pagination.per_page*(s.pagination.current_page-1))+" / "+a(t.$t("Total_Point"))+": "+a(s.pagination.total),3)):C("",!0)])}}});export{Qe as default};
