import{d as j,n as M,u as N,a as Y,bO as V,B as z,Z as f,y as D,bq as R,w as b,i as w,o as i,e as u,f as s,j as _,k as U,z as g,t as o,g as p,v as q,l as v}from"./index.3390162f.js";import{a as x,u as Z,b as H}from"./award.8b25ad3e.js";import{e as J,b as K,k as Q,an as W,a as X,ao as ee}from"./index.30e99442.js";import{b as E}from"./create.451c2cea.js";import{f as ae,b as se}from"./id.5a6e5f30.js";const te={pagetitle:"`Talaba yutug'i yaratish`",class:"creat-award-page"},oe={class:"card panel-header-bg"},le={class:"card-body"},ne={class:"panel-header"},de={class:"card-title"},ie={key:0},ue={key:1},re={class:"panel-toggles"},ce=s("i",{class:"mdi mdi-arrow-left font-size-14 align-middle me-1 me-1"},null,-1),_e={class:"card"},pe={class:"card-body"},me={class:"row"},ve={key:0,class:"col-lg-6"},he={class:"row"},ye={class:"col-lg-6"},fe={class:"mb-3",name:"optionsEducationType"},be={for:"division-name-select",class:"form-label"},we={class:"col-lg-6"},ge={class:"mb-3",name:"optionsEducationForm"},Oe={for:"division-name-select",class:"form-label"},ke={key:0,class:"text-danger small"},Ce={class:"col-12"},$e={class:"mb-3",name:"optionsTrainingPlan"},Te={for:"division-name-select",class:"form-label"},Ge={key:0,class:"text-danger small"},Be={class:"col-lg-6"},Ue={class:"mb-3",name:"courseStudent"},Ee={for:"division-name-select",class:"form-label"},Se={key:0,class:"text-danger small"},Ae={class:"col-lg-6"},Fe={class:"mb-3",name:"optionsGroup"},Le={for:"division-name-select",class:"form-label"},Pe={key:0,class:"text-danger small"},Ie={class:"col-12"},je={class:"mb-3",name:"optionsEmployee"},Me={for:"division-name-select",class:"form-label"},Ne={key:0,class:"text-danger small"},Ye={class:"col-lg-6"},Ve={key:0,class:"mb-3",name:"optionsEducationForm"},ze={class:"fw-bold"},De={class:"mb-3",name:"awardTypes"},Re={for:"division-name-select",class:"form-label"},qe={key:0,class:"text-danger small"},xe={class:"mb-3",name:"awardType"},Ze={for:"division-name-select",class:"form-label"},He={key:0,class:"text-danger small"},Je={class:"mb-3",name:"lessonAdvecedTraining"},Ke={for:"division-name-input",class:"form-label"},Qe={key:0,class:"text-danger small"},We={class:"mb-3",name:"year"},Xe={for:"division-name-input",class:"form-label"},ea={key:0,class:"text-danger small"},aa={class:"d-flex justify-content-end"},sa=["disabled"],ta=s("i",{class:"mdi mdi-content-save font-size-14 align-middle me-1"},null,-1),ra=j({__name:"create",async setup(oa){var $,T;let O,k;const S=M(),A=N(),y=(T=($=S.params)==null?void 0:$.id)!=null?T:null,{t:m}=Y(),F=V(),C=z(!1),a=f({edu_type_id:null,edu_form_id:null,edu_plan_id:null,semester_id:null,academic_group_id:null,student_id:null,type_id:null,category_id:null,year:null,document:null,status:null}),l=f({eduTypeOptions:null,eduFormOptions:null,eduPlanOptions:null,semesterOptions:null,academicGroupOptions:null,academicYearOptions:null,studentOptions:null,awardGroupOptions:null,awardCategoryOptions:null}),n=f({student_id:[],category_id:[],type_id:[],document:[],year:[]});D(async()=>{l.eduTypeOptions=await J().then(e=>e==null?void 0:e.result),l.eduFormOptions=await K().then(e=>e==null?void 0:e.result),l.eduPlanOptions=await Q().then(e=>{var t;return(t=e==null?void 0:e.result)==null?void 0:t.data}),l.awardGroupOptions=await W().then(e=>e==null?void 0:e.result),l.academicYearOptions=await X().then(e=>e==null?void 0:e.result.data.map(t=>({id:t.year,name:t.year}))),l.awardCategoryOptions=await ee().then(e=>e==null?void 0:e.result)}),y&&([O,k]=R(()=>L()),await O,k());async function L(){let e=await x(y);Object.assign(a,e.result)}b(()=>a.edu_plan_id,async()=>{var e,t;if(a.semester_id=null,a.academic_group_id=null,a.student_id=null,l.academicGroupOptions=null,l.semesterOptions=null,l.studentOptions=null,a.edu_plan_id){let c=await ae(a.edu_plan_id);l.semesterOptions=(e=c==null?void 0:c.result)==null?void 0:e.data.map(h=>({id:h.id,name:h.course+"-kurs / "+h.semester+"-"+m("semester")}));let r=await se(a.edu_plan_id);l.academicGroupOptions=(t=r==null?void 0:r.result)==null?void 0:t.data.map(h=>({id:h.id,name:h.name}))}}),b(()=>a.academic_group_id,async()=>{a.academic_group_id&&a.semester_id?l.studentOptions=await E(a).then(e=>{var t;return(t=e==null?void 0:e.result)==null?void 0:t.data.map(c=>({id:c.id,name:c.name+" "+c.surname}))}):(a.student_id=null,l.studentOptions=null)}),b(()=>a.semester_id,async()=>{a.academic_group_id&&a.semester_id?l.studentOptions=await E(a).then(e=>{var t;return(t=e==null?void 0:e.result)==null?void 0:t.data}):(a.student_id=null,l.studentOptions=null)});async function P(){var e,t;try{C.value=!0,I(),Object.assign(n,{}),y?await Z(y,a):await H(a),F.success(m("Data_stored_successfully")),A.push("/student/award")}catch(c){Object.assign(n,(t=(e=c.response)==null?void 0:e.data)==null?void 0:t.errors)}finally{C.value=!1}}function I(e){n[e]=[]}return(e,t)=>{var G,B;const c=w("router-link"),r=w("a-select"),h=w("a-input");return i(),u("div",te,[s("div",oe,[s("div",le,[s("div",ne,[s("h5",de,[_(c,{to:"/student/award"},{default:U(()=>[g(o(e.$t("Student_Award"))+" / ",1)]),_:1}),p(y)?(i(),u("span",ue,o(e.$t("Manage_Award")),1)):(i(),u("span",ie,o(e.$t("create__award")),1))]),s("div",re,[_(c,{to:"/student/award",class:"btns black-c py-1.5 px-4",type:"submit"},{default:U(()=>[ce,g(o(e.$t("Prev")),1)]),_:1})])])])]),s("div",_e,[s("div",pe,[s("form",{onSubmit:q(P,["prevent"])},[s("div",me,[p(y)?v("",!0):(i(),u("div",ve,[s("div",he,[s("div",ye,[s("div",fe,[s("label",be,o(e.$t("Education_Type")),1),_(r,{"field-names":{value:"id",label:"name"},value:a.edu_type_id,"onUpdate:value":t[0]||(t[0]=d=>a.edu_type_id=d),options:l.eduTypeOptions,placeholder:p(m)("Choose"),"allow-clear":""},null,8,["value","options","placeholder"])])]),s("div",we,[s("div",ge,[s("label",Oe,o(e.$t("Edu_form")),1),_(r,{"field-names":{value:"id",label:"name"},value:a.edu_form_id,"onUpdate:value":t[1]||(t[1]=d=>a.edu_form_id=d),options:l.eduFormOptions,placeholder:p(m)("Choose"),"allow-clear":""},null,8,["value","options","placeholder"]),n.edu_form_id?(i(),u("span",ke,o(n.edu_form_id[0]),1)):v("",!0)])]),s("div",Ce,[s("div",$e,[s("label",Te,o(e.$t("edu_plan")),1),_(r,{"field-names":{value:"id",label:"name"},value:a.edu_plan_id,"onUpdate:value":t[2]||(t[2]=d=>a.edu_plan_id=d),options:l.eduPlanOptions,placeholder:p(m)("Choose"),"allow-clear":""},null,8,["value","options","placeholder"]),n.edu_plan_id?(i(),u("span",Ge,o(n.edu_plan_id[0]),1)):v("",!0)])]),s("div",Be,[s("div",Ue,[s("label",Ee,o(e.$t("student__course")),1),_(r,{"field-names":{value:"id",label:"name"},value:a.semester_id,"onUpdate:value":t[3]||(t[3]=d=>a.semester_id=d),options:l.semesterOptions,placeholder:p(m)("Choose"),"allow-clear":""},null,8,["value","options","placeholder"]),n.semester_id?(i(),u("span",Se,o(n.semester_id[0]),1)):v("",!0)])]),s("div",Ae,[s("div",Fe,[s("label",Le,o(e.$t("group__students")),1),_(r,{"field-names":{value:"id",label:"name"},value:a.academic_group_id,"onUpdate:value":t[4]||(t[4]=d=>a.academic_group_id=d),options:l.academicGroupOptions,placeholder:p(m)("Choose"),"allow-clear":""},null,8,["value","options","placeholder"]),n.academic_group_id?(i(),u("span",Pe,o(n.academic_group_id[0]),1)):v("",!0)])]),s("div",Ie,[s("div",je,[s("label",Me,o(e.$t("Student")),1),_(r,{"field-names":{value:"id",label:"name"},value:a.student_id,"onUpdate:value":t[5]||(t[5]=d=>a.student_id=d),options:l.studentOptions,placeholder:p(m)("Choose"),"allow-clear":""},null,8,["value","options","placeholder"]),n.student_id?(i(),u("span",Ne,o(n.student_id[0]),1)):v("",!0)])])])])),s("div",Ye,[p(y)?(i(),u("div",Ve,[s("h3",ze,o((G=a==null?void 0:a.student)==null?void 0:G.surname)+" "+o((B=a==null?void 0:a.student)==null?void 0:B.name),1)])):v("",!0),s("div",De,[s("label",Re,o(e.$t("award_Category")),1),_(r,{"field-names":{value:"id",label:"name"},value:a.type_id,"onUpdate:value":t[6]||(t[6]=d=>a.type_id=d),options:l.awardCategoryOptions,placeholder:p(m)("Choose"),"allow-clear":""},null,8,["value","options","placeholder"]),n.type_id?(i(),u("span",qe,o(n.type_id[0]),1)):v("",!0)]),s("div",xe,[s("label",Ze,o(e.$t("award_Group")),1),_(r,{"field-names":{value:"id",label:"name"},value:a.category_id,"onUpdate:value":t[7]||(t[7]=d=>a.category_id=d),options:l.awardGroupOptions,placeholder:p(m)("Choose"),"allow-clear":""},null,8,["value","options","placeholder"]),n.category_id?(i(),u("span",He,o(n.category_id[0]),1)):v("",!0)]),s("div",Je,[s("label",Ke,o(e.$t("award_Document")),1),_(h,{value:a.document,"onUpdate:value":t[8]||(t[8]=d=>a.document=d)},null,8,["value"]),n.document?(i(),u("span",Qe,o(n.document[0]),1)):v("",!0)]),s("div",We,[s("label",Xe,o(e.$t("award_Year")),1),_(r,{"field-names":{value:"id",label:"name"},value:a.year,"onUpdate:value":t[9]||(t[9]=d=>a.year=d),options:l.academicYearOptions,placeholder:p(m)("Choose"),"allow-clear":""},null,8,["value","options","placeholder"]),n.year?(i(),u("span",ea,o(n.year[0]),1)):v("",!0)]),s("div",aa,[s("button",{class:"btns c-save",type:"submit",disabled:!a.student_id},[ta,g(" "+o(e.$t("Save")),1)],8,sa)])])])],32)])])])}}});export{ra as default};
