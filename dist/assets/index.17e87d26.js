import{bR as J,d as K,h as Q,c as W,a as X,B as p,Z as N,y as x,w as ee,i as L,b6 as te,o as c,e as r,f as e,t as s,bs as se,z as R,j as i,k as b,v as ae,g as o,s as j,l as Y,F as S,r as B}from"./index.3390162f.js";import{a as le,V as oe,R as ne}from"./index.30e99442.js";import{_ as I}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{_ as ue}from"./NoData.ac42776e.js";import"./vue.runtime.esm-bundler.84001772.js";/* empty css                                                               */import"./_plugin-vue_export-helper.cdc0426e.js";const ce=J();async function ie(V){try{const{data:v}=await ce({url:"/api/statistic/contract",params:V});return v}catch(v){throw v}}const re={pagetitle:"`Shartnoma statistikasi`",class:"byContractPage"},de={class:"card panel-header-bg"},_e={class:"card-body"},pe={class:"panel-header"},me={class:"card-title"},he={class:"panel-toggles"},ve={class:"filterBlock"},ye={class:"btns c-filter py-1.5 px-4"},be=e("i",{class:"mdi mdi-filter me-2"},null,-1),fe={class:"collapse__block"},ge={class:"my-2 col-lg-2"},we=["disabled"],Le=e("i",{class:"mdi mdi-eye me-2"},null,-1),Ce={key:0,class:"card"},ke={class:"card-body"},Te={key:1,class:"table-responsive table-statistical"},$e={class:"table-header"},Ee={rowspan:"2",style:{"min-width":"150px"}},Ne={colspan:"2"},Ye={colspan:"2"},Se={colspan:"2"},Be={colspan:"2"},Ve={colspan:"2"},Ae={colspan:"2"},De={class:"text-start",style:{"min-width":"50px !important"}},Fe={key:1,class:"card"},Ue={class:"card-body"},qe=K({__name:"index",setup(V){const v=Q(),A=W(()=>{var t,a;return(a=(t=v==null?void 0:v.user)==null?void 0:t.faculty)==null?void 0:a.name}),{t:l}=X(),g=p(!1),f=p([]),k=p([]),T=p([]),$=p([]),D=p(),F=p(),U=p(),y=p([]),P=p(),C=N({result:[]}),m=N({optionacademicYeList:null,optionsemesterTypeList:null,optioneducationList:null}),n=N({edu_type_id:null,academic_year_id:null,semester_type:null});x(async()=>{m.optionacademicYeList=await le().then(t=>{var a;return(a=t.result)==null?void 0:a.data}),m.optionsemesterTypeList=await oe().then(t=>t.result),m.optioneducationList=await ne().then(t=>t.result)}),ee(()=>n,async(t,a)=>{a==t?P.value=0:P.value=1});async function M(){await z(),D.value=m.optioneducationList.find(t=>t.id==n.edu_type_id).name,F.value=m.optionacademicYeList.find(t=>t.id==n.academic_year_id).name,U.value=m.optionsemesterTypeList.find(t=>t.code==n.semester_type).name}function O(t){let a=[];return t.map(d=>{a.push(d)}),a}async function z(){try{g.value=!0;const t=await ie(n);Object.assign(C,t),g.value=!1,k.value=[],C.result.forEach(a=>{const d=O(a.list);k.value.push(d)}),$.value=[],T.value=[],k.value.forEach(a=>{a.forEach(d=>{$.value.push(d),f.value=[],a.forEach(w=>{y.value=[],w.courses.forEach(u=>{y.value.push(u.student_count),y.value.push(u.contract_count)}),y.value.push(w.courses.reduce((u,_)=>u+_.student_count,0)),y.value.push(w.courses.reduce((u,_)=>u+_.contract_count,0)),y.value.forEach((u,_)=>{f.value.length<_+1&&(f.value.length=_+1,f.value[_]=0),f.value[_]+=u}),T.value.push(y.value)})})})}catch(t){console.log(t)}finally{g.value=!1}}return(t,a)=>{const d=L("a-select"),w=L("a-space"),u=L("a-form-item"),_=L("b-card"),Z=L("b-collapse"),q=te("b-toggle");return c(),r("div",re,[e("div",de,[e("div",_e,[e("div",pe,[e("h5",me,s(t.$t("Contract_statistics")),1),e("div",he,[e("div",ve,[se((c(),r("button",ye,[be,R(s(t.$t("Filtr")),1)])),[[q,void 0,void 0,{"collapse-3":!0}]])])])])])]),e("div",fe,[i(Z,{visible:"",id:"collapse-3"},{default:b(()=>[i(_,null,{default:b(()=>[e("form",{class:"row",onSubmit:ae(M,["prevent"])},[i(u,{class:"my-2 col-lg-3",name:"faculty"},{default:b(()=>[i(w,null,{default:b(()=>[i(d,{class:"form--item",value:A.value,disabled:""},null,8,["value"])]),_:1})]),_:1}),i(u,{class:"my-2 col-lg-2",name:"educationType"},{default:b(()=>[i(d,{value:n.edu_type_id,"onUpdate:value":a[0]||(a[0]=h=>n.edu_type_id=h),options:m.optioneducationList,"field-names":{value:"id",label:"name"},"allow-clear":"",placeholder:o(l)("Choose_Education_Type")},null,8,["value","options","placeholder"])]),_:1}),i(u,{class:"my-2 col-lg-2",name:"educationYear"},{default:b(()=>[i(d,{value:n.academic_year_id,"onUpdate:value":a[1]||(a[1]=h=>n.academic_year_id=h),options:m.optionacademicYeList,"field-names":{value:"id",label:"name"},"allow-clear":"",placeholder:o(l)("Choose_Education_Year"),disabled:!n.edu_type_id},null,8,["value","options","placeholder","disabled"])]),_:1}),i(u,{class:"my-2 col-lg-3",name:"semeterType"},{default:b(()=>[i(d,{value:n.semester_type,"onUpdate:value":a[2]||(a[2]=h=>n.semester_type=h),options:m.optionsemesterTypeList,"field-names":{value:"code",label:"name"},disabled:!n.academic_year_id,"allow-clear":"",placeholder:o(l)("Choose_Semestr_Type")},null,8,["value","options","disabled","placeholder"])]),_:1}),e("div",ge,[e("button",{disabled:!n.semester_type,class:"btn-search c-save",type:"submit"},[Le,R(s(t.$t("View")),1)],8,we)])],32)]),_:1})]),_:1})]),C.result.length>0?(c(),r("div",Ce,[e("div",ke,[g.value?(c(),j(I,{key:0})):Y("",!0),C.result.length?(c(),r("div",Te,[e("div",$e,[e("table",null,[e("tr",null,[e("td",null,[e("span",null,s(t.$t("Curriculum_Education_Year"))+":",1),e("b",null,s(F.value),1)]),e("td",null,[e("span",null,s(t.$t("Faculty"))+":",1),e("b",null,s(A.value),1)])]),e("tr",null,[e("td",null,[e("span",null,s(o(l)("Education_Type"))+":",1),e("b",null,s(D.value),1)]),e("td",null,[e("span",null,s(o(l)("Semestr_Type"))+":",1),e("b",null,s(U.value),1)])])])]),e("table",null,[e("thead",null,[e("tr",null,[e("th",Ee,[e("b",null,s(t.$t("by_Level")),1)]),e("th",Ne,"1-"+s(t.$t("course_number")),1),e("th",Ye,"2-"+s(t.$t("course_number")),1),e("th",Se,"3-"+s(t.$t("course_number")),1),e("th",Be,"4-"+s(t.$t("course_number")),1),e("th",Ve,"5-"+s(t.$t("course_number")),1),e("th",Ae,s(o(l)("all_Student")),1)]),e("tr",null,[e("th",null,s(o(l)("Number_of_students")),1),e("th",null,s(o(l)("Contract_number")),1),e("th",null,s(o(l)("Number_of_students")),1),e("th",null,s(o(l)("Contract_number")),1),e("th",null,s(o(l)("Number_of_students")),1),e("th",null,s(o(l)("Contract_number")),1),e("th",null,s(o(l)("Number_of_students")),1),e("th",null,s(o(l)("Contract_number")),1),e("th",null,s(o(l)("Number_of_students")),1),e("th",null,s(o(l)("Contract_number")),1),e("th",null,s(o(l)("Number_of_students")),1),e("th",null,s(o(l)("Contract_number")),1)])]),e("tbody",null,[(c(!0),r(S,null,B($.value,(h,E)=>(c(),r("tr",{key:E},[e("td",De,s(h.edu_form),1),(c(!0),r(S,null,B(T.value[E],(G,H)=>(c(),r("td",{key:H},s(G),1))),128))]))),128)),e("tr",null,[e("th",null,s(t.$t("Total_Point")),1),(c(!0),r(S,null,B(f.value,(h,E)=>(c(),r("th",null,s(h),1))),256))])])])])):Y("",!0)])])):(c(),r("div",Fe,[e("div",Ue,[g.value?(c(),j(I,{key:0})):Y("",!0),i(ue)])]))])}}});export{qe as default};
