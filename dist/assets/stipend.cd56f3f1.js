import{_ as F}from"./Pagination.f4a9fc5d.js";import{b as z,m as E}from"./id.5a6e5f30.js";import{d as D,a as I,bO as j,B as A,Z as C,bq as q,y as M,w as p,i as y,b6 as R,o as r,e as m,f as a,t as i,j as l,k as _,z as v,bs as V,F as Z,r as H,s as J,aR as K,l as T}from"./index.3390162f.js";import{e as Q,k as W,p as X,U as Y}from"./index.30e99442.js";import{c as x,s as tt}from"./stipend.bb551a1d.js";import"./_plugin-vue_export-helper.cdc0426e.js";const st={pagetitle:"`Stipendiya bazaviy`",class:"studentListPage"},at={class:"card panel-header-bg"},et={class:"card-body"},it={class:"panel-header"},ot={class:"card-title"},lt={class:"panel-toggles"},nt=a("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),dt={class:"filterBlock"},_t={class:"btns c-filter py-1.5 px-4"},ut=a("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),ct={class:"collapse__block"},pt={class:"row"},rt={class:"my-2 col-md-4 form--item"},mt={for:"yu"},ht={class:"my-2 col-md-4 form--item"},yt={for:"yu"},ft={class:"my-2 col-md-4 form--item"},vt={class:"my-2 col-md-4 form--item"},gt={class:"my-2 col-md-4 form--item"},bt={class:"my-2 col-md-4 form--item"},wt={for:"yu"},Ot={class:"row table-division"},kt={class:"col-md-12"},$t={class:"card"},Ct={class:"card-body"},Tt={key:0,class:"table-responsive"},St={class:"content-table"},Nt={class:"table-row-rating-stipend"},Pt=a("th",null,"#",-1),Lt={class:"form-check form-switch my-auto"},Bt=["checked","disabled","onChange"],Ut={key:1},Gt={class:"text-center"},Ft={class:"text-center"},zt={key:0,class:"element-count mb-2"},Vt=D({__name:"stipend",async setup(Et){let g,b;const{t:S}=I(),w=j(),f=A(!1),t=C({edu_type_id:null,edu_plan_id:null,academic_group_id:null,semester_id:null,payment_type_id:null,scholarship_id:null,current_page:1,students:[],data:[],links:[],per_page:25}),n=C({eduTypeOptions:null,eduPlanOptions:null,academicGroupOptions:null,semesterOptions:null,paymentTypeOptions:null,scholarshipTypeOptions:null});[g,b]=q(()=>d()),await g,b();async function N(s){try{f.value=!0,await x(s),await d(),w.success(S("Data_stored_successfully"))}catch(o){w.error(o.message)}finally{f.value=!1}}M(async()=>{n.eduTypeOptions=await Q().then(s=>s==null?void 0:s.result),n.eduPlanOptions=await W().then(s=>{var o;return(o=s==null?void 0:s.result)==null?void 0:o.data}),n.paymentTypeOptions=await X().then(s=>s==null?void 0:s.result),n.scholarshipTypeOptions=await Y().then(s=>s==null?void 0:s.result)}),p(()=>t.edu_plan_id,async s=>{t.academic_group_id=null,t.semester_id=null,s?(n.academicGroupOptions=await z(s).then(o=>{var c;return(c=o==null?void 0:o.result)==null?void 0:c.data}),n.semesterOptions=await E(s).then(o=>{var c;return(c=o==null?void 0:o.result)==null?void 0:c.data.map(u=>({id:u.id,name:u.semester+"-semestr"}))})):(n.academicGroupOptions=null,n.semesterOptions=null),await d()}),p(()=>t.edu_form_id,async()=>{await d()}),p(()=>t.edu_type_id,async()=>{await d()}),p(()=>t.academic_group_id,async()=>{t.edu_plan_id&&await d()}),p(()=>t.semester_id,async()=>{t.edu_plan_id&&await d()}),p(()=>t.payment_type_id,async()=>{await d()}),p(()=>t.scholarship_id,async()=>{await d()}),p(()=>t.current_page,async s=>{Number(s)&&(t.page=Number(s),await d())});async function d(){let s={};t.page>1&&(s.page=t==null?void 0:t.page),t.edu_type_id&&(s.edu_type_id=t.edu_type_id),t.edu_plan_id&&(s.edu_plan_id=t.edu_plan_id),t.academic_group_id&&(s.academic_group_id=t.academic_group_id),t.semester_id&&(s.semester_id=t.semester_id),t.payment_type_id&&(s.payment_type_id=t.payment_type_id),t.scholarship_id&&(s.scholarship_id=t.scholarship_id);const o=await tt(s);Object.assign(t,o.result)}return(s,o)=>{const c=y("router-link"),u=y("a-select"),h=y("a-space"),P=y("b-card"),L=y("b-collapse"),B=F,U=R("b-toggle");return r(),m("div",st,[a("div",at,[a("div",et,[a("div",it,[a("h5",ot,i(s.$t("Finance_Scholarship")),1),a("div",lt,[l(c,{to:"/finance/stipend/stipend-set",class:"btns c-save py-1.5 px-4 me-3"},{default:_(()=>[nt,v(i(s.$t("Stipend_assignment")),1)]),_:1}),a("div",dt,[V((r(),m("button",_t,[ut,v(i(s.$t("Filter")),1)])),[[U,void 0,void 0,{"collapse-3":!0}]])])])])])]),a("div",ct,[l(L,{visible:"",id:"collapse-3"},{default:_(()=>[l(P,null,{default:_(()=>[a("div",pt,[a("div",rt,[l(h,null,{default:_(()=>[l(u,{value:t.edu_type_id,"onUpdate:value":o[0]||(o[0]=e=>t.edu_type_id=e),options:n.eduTypeOptions,"field-names":{value:"id",label:"name"},"allow-clear":""},null,8,["value","options"])]),_:1}),a("label",mt,i(s.$t("Choose_Education_Type")),1)]),a("div",ht,[l(h,null,{default:_(()=>[l(u,{class:"form--item",value:t.edu_plan_id,"onUpdate:value":o[1]||(o[1]=e=>t.edu_plan_id=e),allowClear:"","field-names":{value:"id",label:"name"},options:n.eduPlanOptions},null,8,["value","options"])]),_:1}),a("label",yt,i(s.$t("Choose_Curriculum")),1)]),a("div",ft,[l(h,null,{default:_(()=>[l(u,{class:"form--item",value:t.academic_group_id,"onUpdate:value":o[2]||(o[2]=e=>t.academic_group_id=e),allowClear:"","field-names":{value:"id",label:"name"},options:n.academicGroupOptions},null,8,["value","options"])]),_:1}),a("label",null,i(s.$t("Choose_Group")),1)]),a("div",vt,[l(h,null,{default:_(()=>[l(u,{class:"form--item",value:t.semester_id,"onUpdate:value":o[3]||(o[3]=e=>t.semester_id=e),allowClear:"","field-names":{value:"id",label:"name"},options:n.semesterOptions},null,8,["value","options"])]),_:1}),a("label",null,i(s.$t("Choose_Semester")),1)]),a("div",gt,[l(h,null,{default:_(()=>[l(u,{class:"form--item",value:t.payment_type_id,"onUpdate:value":o[4]||(o[4]=e=>t.payment_type_id=e),allowClear:"","field-names":{value:"id",label:"name"},options:n.paymentTypeOptions},null,8,["value","options"])]),_:1}),a("label",null,i(s.$t("Select_payment_form")),1)]),a("div",bt,[l(h,null,{default:_(()=>[l(u,{class:"form--item",value:t.scholarship_id,"onUpdate:value":o[5]||(o[5]=e=>t.scholarship_id=e),allowClear:"","field-names":{value:"id",label:"name"},options:n.scholarshipTypeOptions},null,8,["value","options"])]),_:1}),a("label",wt,i(s.$t("choosee__type__stipend")),1)])])]),_:1})]),_:1})]),a("div",Ot,[a("div",kt,[a("div",$t,[a("div",Ct,[t.data.length?(r(),m("div",Tt,[a("table",St,[a("thead",null,[a("tr",Nt,[Pt,a("th",null,i(s.$t("Student")),1),a("th",null,i(s.$t("by_Specialty")),1),a("th",null,i(s.$t("Group")),1),a("th",null,i(s.$t("Semester_Name")),1),a("th",null,i(s.$t("Decree")),1),a("th",null,i(s.$t("amount_of_minimum_wage")),1),a("th",null,i(s.$t("Deadline")),1),a("th",null,i(s.$t("Enable")),1)])]),a("tbody",null,[(r(!0),m(Z,null,H(t.data,(e,G)=>{var O,k,$;return r(),m("tr",{class:"table-row-rating-stipend",key:e==null?void 0:e.id},[a("td",null,i((t.current_page-1)*t.per_page+G+1),1),a("td",null,[l(c,{to:"/finance/stipend/"+e.id},{default:_(()=>[v(i(e==null?void 0:e.fullname),1)]),_:2},1032,["to"])]),a("td",null,i((O=e==null?void 0:e.specialty)==null?void 0:O.name),1),a("td",null,i((k=e==null?void 0:e.academic_group)==null?void 0:k.name),1),a("td",null,i(($=e==null?void 0:e.semester)==null?void 0:$.semester)+" - semestr",1),a("td",null,i(e==null?void 0:e.command),1),a("td",null,i(e==null?void 0:e.summa),1),a("td",null,i(e==null?void 0:e.start_date)+" / "+i(e==null?void 0:e.end_date),1),a("td",null,[a("div",Lt,[a("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:e.status,disabled:f.value,onChange:Dt=>N(e.id)},null,40,Bt)])])])}),128))])]),t.last_page>1?(r(),J(B,K({key:0,class:"mt-2"},{...t},{"current-page":t.current_page,"onUpdate:currentPage":o[6]||(o[6]=e=>t.current_page=e)}),null,16,["current-page"])):T("",!0)])):(r(),m("div",Ut,[a("h5",Gt,i(s.$t("No_data")),1),a("p",Ft,i(s.$t("No_information_found")),1)]))])]),t.data.length?(r(),m("span",zt,i(t.current_page)+"-"+i((t==null?void 0:t.data.length)+t.per_page*(t.current_page-1))+"/ "+i(s.$t("Total_Point"))+": "+i(t.total),1)):T("",!0)])])])}}});export{Vt as default};
