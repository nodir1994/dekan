import{_ as H}from"./Pagination.f4a9fc5d.js";import{_ as R}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{d as Z,h as J,c as K,a as Q,bO as V,B as Y,Z as G,bq as W,y as X,w as y,i as w,b6 as x,o as r,e as _,f as a,t,j as i,k as p,z as v,bs as j,g as b,F as P,r as L,l as k,s as E,bU as aa,aR as sa}from"./index.3390162f.js";import{a as la,e as ta,b as oa}from"./index.30e99442.js";import{e as ea,b as da}from"./id.5a6e5f30.js";import{g as ia,a as na,b as ra}from"./gpa.cf8a35d6.js";import{h as ua}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./sweetalert2.all.fdef424e.js";import"./moment.2cad4b18.js";const _a={pagetitle:"'Akademik qarzdorlar'",class:"gpaPage"},ca={class:"card panel-header-bg"},pa={class:"card-body"},ma={class:"panel-header"},ha={class:"card-title"},fa={class:"panel-toggles"},ga={class:"filterBlock"},ya={class:"btns c-save py-1.5 px-4 me-3",type:"button"},va=a("i",{class:"mdi mdi-plus font-size-14 align-middle me-1"},null,-1),ba={class:"btns c-filter py-1.5 px-4"},$a=a("i",{class:"mdi mdi-filter font-size-14 align-middle me-1"},null,-1),wa={class:"collapse__block"},ka={class:"row"},Ca={class:"my-2 col-md-4 form--item"},Oa={for:"yu"},Ga={class:"my-2 col-md-4 form--item"},Pa={for:"yu"},La={class:"my-2 col-md-4 form--item"},Fa={for:"yu"},Na={class:"my-2 col-md-4 form--item"},Ta={class:"my-2 col-md-4 form--item"},Ya={for:"yu"},Ea={class:"my-2 col-md-4 form--item"},Ua={for:"yu"},Aa={id:"myModalGpaInfo",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},Ba={class:"modal-dialog"},Ma={class:"modal-content"},Sa={class:"modal-header bg-card-header"},Ia={class:"modal-title",id:"myModalLabel"},za=a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},[a("i",{class:"mdi mdi-close font-size-18"})],-1),Da={class:"modal-body"},qa={class:"table-responsive"},Ha={class:"table-vertical"},Ra={class:"table-modal d-grid w-100"},Za=a("th",null,[a("strong",null,"#")],-1),Ja={class:"modal-data-tip"},Ka={key:0},Qa={class:"modal-data-tip"},Va={class:"card"},Wa={class:"card-body"},Xa={key:1,class:"table-responsive"},xa={class:"content-table"},ja={class:"table-row d-grid w-100"},as=a("th",null,[a("strong",null,"#")],-1),ss=a("br",null,null,-1),ls=a("br",null,null,-1),ts=["onClick"],os=["onClick"],es={key:2},ds={class:"text-center"},is={class:"text-center"},ns={key:0,class:"element-count mb-2"},ws=Z({__name:"index",async setup(rs){let F,N;const C=J(),U=K(()=>{var l,e;return(e=(l=C==null?void 0:C.user)==null?void 0:l.faculty)==null?void 0:e.name}),{t:h}=Q(),T=V(),$=Y(!1),o=G({search:"",edu_plan_id:null,edu_type_id:null,academic_group_id:null,academic_year_id:null,edu_form_id:null,data:[],links:[],subjectData:[],current_page:1,per_page:ua.pagePer}),d=G({studentName:null,semester1:null,semester2:null,subjects1:[],subjects2:[]}),u=G({eduTypeOptions:null,eduFormOptions:null,eduPlanOptions:null,academicYearOptions:null,academicGroupOptions:null}),O=Y(!0);[F,N]=W(()=>f()),await F,N(),X(async()=>{u.academicYearOptions=await la().then(l=>l.result.data),u.eduTypeOptions=await ta().then(l=>l.result),u.eduFormOptions=await oa().then(l=>l.result)}),y(()=>o.academic_year_id,async()=>{await f()}),y(()=>o.edu_type_id,async()=>{await f()}),y(()=>o.edu_form_id,async l=>{o.edu_plan_id=null,u.eduPlanOptions=null,l&&(u.eduPlanOptions=await ea(l).then(e=>e.result.data)),await f()}),y(()=>o.edu_plan_id,async l=>{var e;if(o.academic_group_id=null,u.academicGroupOptions=null,await f(),l){let n=await da(l);u.academicGroupOptions=(e=n==null?void 0:n.result)==null?void 0:e.data.map(c=>({id:c.id,name:c.name}))}}),y(()=>o.academic_group_id,async()=>{await f()}),y(()=>o.current_page,async l=>{Number(l)&&(o.page=Number(l),await f(l))});async function f(l){let e={page:l||1,per_page:o.per_page};if(o.edu_type_id&&(e.edu_type_id=o.edu_type_id),o.academic_year_id&&(e.academic_year_id=o.academic_year_id),o.edu_form_id&&(e.edu_form_id=o.edu_form_id),o.edu_plan_id&&(e.edu_plan_id=o.edu_plan_id),o.academic_group_id&&(e.academic_group_id=o.academic_group_id),$.value=!0,O.value){O.value=!1;const n=await ia(e);Object.assign(o,n.result),setTimeout(()=>{O.value=!0},100)}$.value=!1}async function A(l){try{$.value=!0,await na(l),T.success(h("Student_GPA_of_name_recalculated_successfully"))}catch(e){T.error(h("Request_failed1")+": "+e.message)}finally{$.value=!1}}async function B(l){d.name=l==null?void 0:l.fullname,d.semester2=null,d.subjects1=[],d.subjects2=[];let e=await ra(l==null?void 0:l.id).then(n=>n.result);e[0]&&(d.semester1=e[0].semester,e.map(n=>{n.semester==d.semester1?d.subjects1.push(n):(d.semester2=n.semester,d.subjects2.push(n))})),console.log(e)}return(l,e)=>{const n=w("router-link"),c=w("a-select"),g=w("a-space"),M=w("b-card"),S=w("b-collapse"),I=R,z=H,D=x("b-toggle");return r(),_("div",_a,[a("div",ca,[a("div",pa,[a("div",ma,[a("h5",ha,t(l.$t("Performance_Gpa")),1),a("div",fa,[a("div",ga,[i(n,{to:"/performance/gpa/gpa-add"},{default:p(()=>[a("button",ya,[va,v(t(l.$t("Performance_Gpa_Add")),1)])]),_:1}),j((r(),_("button",ba,[$a,v(t(l.$t("Filter")),1)])),[[D,void 0,void 0,{"collapse-3":!0}]])])])])])]),a("div",wa,[i(S,{visible:"",id:"collapse-3"},{default:p(()=>[i(M,null,{default:p(()=>[a("div",ka,[a("div",Ca,[i(g,null,{default:p(()=>[i(c,{class:"form--item",value:U.value,disabled:""},null,8,["value"])]),_:1}),a("label",Oa,t(l.$t("Choose_faculty")),1)]),a("div",Ga,[i(g,null,{default:p(()=>[i(c,{"allow-clear":"",value:o.academic_year_id,"onUpdate:value":e[0]||(e[0]=s=>o.academic_year_id=s),"field-names":{value:"id",label:"name"},options:u.academicYearOptions,placeholder:b(h)("Choose_Education_Year")},null,8,["value","options","placeholder"])]),_:1}),a("label",Pa,t(l.$t("Choose_Education_Year")),1)]),a("div",La,[i(g,null,{default:p(()=>[i(c,{"allow-clear":"",value:o.edu_type_id,"onUpdate:value":e[1]||(e[1]=s=>o.edu_type_id=s),"field-names":{value:"id",label:"name"},options:u.eduTypeOptions,placeholder:b(h)("Choose_Education_Type")},null,8,["value","options","placeholder"])]),_:1}),a("label",Fa,t(l.$t("Choose_Education_Type")),1)]),a("div",Na,[i(g,null,{default:p(()=>[i(c,{"allow-clear":"",value:o.edu_form_id,"onUpdate:value":e[2]||(e[2]=s=>o.edu_form_id=s),"field-names":{value:"id",label:"name"},options:u.eduFormOptions,placeholder:b(h)("Choose_Education_Form")},null,8,["value","options","placeholder"])]),_:1}),a("label",null,t(l.$t("Choose_Education_Form")),1)]),a("div",Ta,[i(g,null,{default:p(()=>[i(c,{"allow-clear":"",value:o.edu_plan_id,"onUpdate:value":e[3]||(e[3]=s=>o.edu_plan_id=s),"field-names":{value:"id",label:"name"},disabled:!o.edu_form_id,options:u.eduPlanOptions,placeholder:l.$t("Please_select_curriculum")},null,8,["value","disabled","options","placeholder"])]),_:1}),a("label",Ya,t(l.$t("Select_Curriculum")),1)]),a("div",Ea,[i(g,null,{default:p(()=>[i(c,{"allow-clear":"",value:o.academic_group_id,"onUpdate:value":e[4]||(e[4]=s=>o.academic_group_id=s),disabled:!o.edu_plan_id,"field-names":{value:"id",label:"name"},options:u.academicGroupOptions,placeholder:b(h)("Choose_Group")},null,8,["value","disabled","options","placeholder"])]),_:1}),a("label",Ua,t(l.$t("Choose_Group")),1)])])]),_:1})]),_:1})]),a("div",Aa,[a("div",Ba,[a("div",Ma,[a("div",Sa,[a("h5",Ia,t(l.$t("Performance_Gpa"))+" [ "+t(d.name)+" ] ",1),za]),a("div",Da,[a("div",qa,[a("table",Ha,[a("thead",null,[a("tr",Ra,[Za,a("th",null,[a("strong",null,t(l.$t("Subjects")),1)]),a("th",null,[a("strong",null,t(l.$t("Total_Acload")),1)]),a("th",null,[a("strong",null,t(l.$t("Credit")),1)]),a("th",null,[a("strong",null,t(l.$t("gradeSome")),1)])])]),a("tbody",null,[a("h5",Ja,t(d==null?void 0:d.semester1)+"-"+t(l.$t("semester_number")),1),(r(!0),_(P,null,L(d.subjects1,(s,m)=>(r(),_("tr",{class:"table-modal d-grid w-100",key:m},[a("td",null,t(m+1),1),a("td",null,t(s==null?void 0:s.subject),1),a("td",null,t(s==null?void 0:s.load),1),a("td",null,t(s==null?void 0:s.credit),1),a("td",null,t(s==null?void 0:s.rating),1)]))),128))]),d.semester2?(r(),_("tbody",Ka,[a("h5",Qa,t(d==null?void 0:d.semester2)+"-"+t(l.$t("semester_number")),1),(r(!0),_(P,null,L(d.subjects2,(s,m)=>(r(),_("tr",{class:"table-modal d-grid w-100",key:m},[a("td",null,t(m+1),1),a("td",null,t(s==null?void 0:s.subject),1),a("td",null,t(s==null?void 0:s.load),1),a("td",null,t(s==null?void 0:s.credit),1),a("td",null,t(s==null?void 0:s.rating),1)]))),128))])):k("",!0)])])])])])]),a("div",Va,[a("div",Wa,[$.value?(r(),E(I,{key:0})):k("",!0),o.data.length?(r(),_("div",Xa,[a("table",xa,[a("thead",null,[a("tr",ja,[as,a("th",null,[a("strong",null,t(l.$t("Student")),1)]),a("th",null,[a("strong",null,t(l.$t("Education_Type")),1)]),a("th",null,[a("strong",null,t(l.$t("Group")),1)]),a("th",null,[a("strong",null,t(l.$t("by_Level")),1)]),a("th",null,[a("strong",null,t(l.$t("Subjects_Coun")),1)]),a("th",null,[a("strong",null,t(l.$t("gpa")),1)]),a("th",null,[a("strong",null,t(l.$t("Contract_Indebtedness")),1)]),a("th",null,[a("strong",null,t(l.$t("Updated_At")),1)]),a("th",null,[a("strong",null,t(l.$t("calculate_GPA")),1)])])]),a("tbody",null,[(r(!0),_(P,null,L(o.data,(s,m)=>(r(),_("tr",{class:"table-row d-grid w-100",key:m},[a("td",null,t((o.current_page-1)*o.per_page+m+1),1),a("td",null,t(s==null?void 0:s.fullname),1),a("td",null,[v(t(s==null?void 0:s.edu_form)+" ",1),ss,v(" "+t(s==null?void 0:s.edu_type),1)]),a("td",null,t(s==null?void 0:s.academic_group),1),a("td",null,[v(t(s==null?void 0:s.course)+" - "+t(b(h)("course_number"))+" ",1),ls,v(" "+t(s==null?void 0:s.academic_year),1)]),a("td",null,[a("a",{href:"text",style:{display:"block",width:"100%","text-align":"center"},"data-bs-toggle":"modal",onClick:q=>B(s),"data-bs-target":"#myModalGpaInfo"},t(s==null?void 0:s.subject)+" / "+t(s==null?void 0:s.credit),9,ts)]),a("td",null,t(s==null?void 0:s.gpa),1),a("td",null,t(s==null?void 0:s.debt),1),a("td",null,t(b(aa)(new Date(s==null?void 0:s.updated_at),"YYYY-MM-DD HH:mm:ss")),1),a("td",null,[a("button",{onClick:q=>A(s==null?void 0:s.id),class:"btns1 actions-c px-2 me-2"},t(l.$t("calculate_GPA")),9,os)])]))),128))])]),o.last_page>1?(r(),E(z,sa({key:0,class:"mt-2"},{...o},{"current-page":o.current_page,"onUpdate:currentPage":e[5]||(e[5]=s=>o.current_page=s)}),null,16,["current-page"])):k("",!0)])):(r(),_("div",es,[a("h5",ds,t(l.$t("No_data")),1),a("p",is,t(l.$t("No_information_found")),1)]))])]),o.data.length?(r(),_("span",ns,t(o.current_page)+"-"+t((o==null?void 0:o.data.length)+o.per_page*(o.current_page-1))+"/ "+t(l.$t("Total_Point"))+": "+t(o.total),1)):k("",!0)])}}});export{ws as default};
