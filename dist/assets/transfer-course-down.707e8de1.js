import{_ as H}from"./Pagination.f4a9fc5d.js";import{_ as K}from"./LoadingOverlay.vue_vue_type_script_setup_true_lang.89ce9ad6.js";/* empty css                                                       */import{bR as Z,d as J,a as Q,bO as W,B as Y,Z as C,c as X,bq as ss,y as es,w as k,i as F,o as p,e as f,f as e,t as n,s as I,l as B,bs as z,bH as D,F as as,r as ts,z as g,aR as os,v as ns,j as m,g as u}from"./index.3390162f.js";import{k as ls}from"./index.30e99442.js";import{a as ds,b as is,s as rs}from"./id.5a6e5f30.js";import{S as cs}from"./sweetalert2.all.fdef424e.js";import{h as v}from"./helper.569bc08f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./vue.runtime.esm-bundler.84001772.js";import"./moment.2cad4b18.js";const S=Z();async function us(y){try{const{data:i}=await S({url:"/api/students/dropping-course",params:y});return i}catch(i){throw i}}async function _s(y){try{const{data:i}=await S({url:"/api/student-actions/dropping-course",method:"POST",data:y});return i}catch(i){throw i}}async function ps(y){try{const{data:i}=await S({url:"/api/commands/list/dropping-course",method:"GET"});return i}catch(i){throw i}}const ms={pagetitle:"'Kursdan qoldirish'",class:"transfer-couse-down-page"},hs={class:"card panel-header-bg"},fs={class:"card-body"},vs={class:"panel-header"},gs={style:{padding:"7px 0"},class:"card-title"},ys={class:"row"},bs={class:"col-xl-8"},ws={class:"card"},Os={class:"card-body"},Cs={key:1,class:"table-responsive"},ks={class:"content-table"},Bs={class:"table-row w-100 d-grid"},$s=e("th",null,"#",-1),Ns={class:"form-check"},Ys={class:"form-check"},Ss=["value"],Ps=e("br",null,null,-1),Ts={class:"c-gray"},Us=e("br",null,null,-1),Gs={class:"c-gray"},Ls=e("br",null,null,-1),Ms={class:"c-gray"},js=e("br",null,null,-1),As={class:"c-gray"},Es={key:2},Fs={class:"text-center"},Is={class:"text-center"},zs={key:0,class:"element-count mb-2"},Ds={class:"col-xl-4"},Vs={class:"card"},qs={class:"card-body"},xs={class:"mb-3 col-md-10"},Rs=e("div",{class:"col-md-2"},[e("button",{type:"submit",class:"btn-search search-color"},[e("i",{class:"mdi mdi-magnify font-size-14 align-middle"})])],-1),Hs={class:"row"},Ks={class:"mb-3"},Zs={class:"mb-3"},Js={class:"mb-3"},Qs={class:"mb-3"},Ws={class:"d-flex justify-content-end"},Xs=e("i",{class:"mdi mdi-close font-size-14 align-middle me-1"},null,-1),se={class:"card"},ee={class:"card-body"},ae={class:"mb-3",name:"nameFaculty"},te={for:"division-name-select",class:"form-label"},oe={key:0,class:"text-danger small"},ne={class:"mb-3",name:"nameFaculty"},le={for:"division-name-input",class:"form-label"},de={class:"mb-3"},ie={for:"division-name-select",class:"form-label"},re={class:"d-flex justify-content-end"},ce=["disabled"],ue=e("i",{class:"mdi mdi-check font-size-14 align-middle me-1"},null,-1),ke=J({__name:"transfer-course-down",async setup(y){let i,P;const{t:r}=Q(),T=W(),b=Y(!1);C({});const s=C({search:null,edu_plan_id:null,academic_year_id:null,course:null,semester_id:null,academic_group_id:null,command_id:null,dateCommand:null,course_bottom_id:null,current_page:1,per_page:v.pagePer,students:[],data:[],links:[]}),d=C({eduPlanOptions:null,academicYearsOptions:null,courseOptions:null,semesterOptions:null,academicGroupOptions:null,courseBottomOptions:null,orderOptions:null}),w=Y([]),$=Y(!0),U=X({get(){var t,o;return((t=s==null?void 0:s.students)==null?void 0:t.length)===((o=w==null?void 0:w.value)==null?void 0:o.length)},set(t){t?s.students=w.value:s.students=[]}});[i,P]=ss(()=>h()),await i,P(),es(async()=>{d.eduPlanOptions=await ls().then(t=>{var o;return(o=t==null?void 0:t.result)==null?void 0:o.data}),d.orderOptions=await ps().then(t=>t==null?void 0:t.result.data.map(o=>({id:o.id,name:o.name,date:o.date})))}),k(()=>s.edu_plan_id,async()=>{var t,o;if(s.course_bottom_id=null,s.academic_year_id=null,s.semester_id=null,s.course_id=null,s.academic_group_id=null,d.academicYearsOptions=null,d.academicGroupOptions=null,d.courseOptions=null,d.semesterOptions=null,d.courseBottomOptions=null,await h(),s.edu_plan_id){let l=await ds(s.edu_plan_id);d.academicYearsOptions=(t=l==null?void 0:l.result)==null?void 0:t.data.map(c=>({id:c.id,name:c.name}));let _=await is(s.edu_plan_id);d.academicGroupOptions=(o=_==null?void 0:_.result)==null?void 0:o.data.map(c=>({id:c.id,name:c.name}))}}),k(()=>s.academic_year_id,async()=>{var t;if(s.semester_id=null,d.semesterOptions=null,await h(),s.edu_plan_id&&s.academic_year_id){let o=await rs(s);d.semesterOptions=(t=o==null?void 0:o.result)==null?void 0:t.data.map(l=>({id:l.id,semester:l.semester,name:l.course+"-"+r("Course")+" "+l.semester+"-"+r("semester")}))}}),k(()=>[s.academic_group_id,s.semester_id],async()=>{await h()}),k(()=>s.command_id,()=>{s.command_id?(console.log(s.command_id),s.dateCommand=d.orderOptions.find(t=>t.id==s.command_id).date):s.dateCommand=null}),k(()=>s.current_page,async t=>{Number(t)&&(s.page=Number(t),await h(t))});async function V(){await h()}function G(){s.edu_plan_id=null,s.command_id=null,s.students=[]}async function q(){var t,o;try{b.value=!0;let l={};s.page>1&&(l.page=s==null?void 0:s.page),Object.assign(l,{students:s.students,semester_id:s.course_bottom_id,command_id:s.command_id}),cs.fire({title:r("Delete_message.Are_you_sure"),text:r("Delete_message.Action_irreversible"),showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",cancelButtonText:r("No_Cancel"),confirmButtonText:r("transfer")}).then(async _=>{if(_.value){const c=await _s(l);T.success(r("Data_was_successfully_transferred")),G(),await h()}})}catch(l){Object.assign(N,(o=(t=l.response)==null?void 0:t.data)==null?void 0:o.errors),T.error(r("Failed")+": "+l.message)}finally{b.value=!1}}function _e(){}const N=C({semester_id:[],command_id:[]});async function h(t){let o=C({page:t||1,per_page:s.per_page});s.edu_plan_id&&(o.edu_plan_id=s.edu_plan_id),s.academic_year_id&&(o.academic_year_id=s.academic_year_id),s.semester_id&&(o.semester_id=s.semester_id),s.academic_group_id&&(o.academic_group_id=s.academic_group_id),s.search&&(o.search=s.search),b.value=!0;try{if($.value){$.value=!1;const l=await us(o);Object.assign(s,l.result),w.value=s.data.map(_=>_.id),setTimeout(()=>{$.value=!0},v.pagePer)}}catch(l){console.log(l)}finally{b.value=!1}}return(t,o)=>{var L,M;const l=K,_=H,c=F("a-input"),O=F("a-select");return p(),f("div",ms,[e("div",hs,[e("div",fs,[e("div",vs,[e("h5",gs,n(t.$t("Expel_Course_Semester")),1)])])]),e("div",ys,[e("div",bs,[e("div",ws,[e("div",Os,[b.value?(p(),I(l,{key:0})):B("",!0),s.data.length?(p(),f("div",Cs,[e("table",ks,[e("thead",null,[e("tr",Bs,[$s,e("th",null,[e("div",Ns,[z(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=a=>U.value=a)},null,512),[[D,U.value]])])]),e("th",null,n(t.$t("Student")),1),e("th",null,n(t.$t("Education_Type")),1),e("th",null,n(t.$t("by_Level")),1),e("th",null,n(t.$t("Group")),1),e("th",null,n(t.$t("gpa")),1),e("th",null,n(t.$t("Contract_Indebtedness")),1)])]),e("tbody",null,[(p(!0),f(as,null,ts(s.data,(a,x)=>{var j,A,E;return p(),f("tr",{class:"table-row w-100 d-grid",key:a==null?void 0:a.id},[e("td",null,n((s.current_page-1)*s.per_page+x+1),1),e("td",null,[e("div",Ys,[z(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=R=>s.students=R),value:a==null?void 0:a.id},null,8,Ss),[[D,s.students]])])]),e("td",null,[e("div",null,[g(n(a==null?void 0:a.surname)+" "+n(a==null?void 0:a.name)+" ",1),Ps,e("span",Ts,n(a.id),1)])]),e("td",null,[e("div",null,[g(n(a==null?void 0:a.edu_type)+" ",1),Us,e("span",Gs,n(a.edu_form),1)])]),e("td",null,[e("div",null,[g(n((j=a==null?void 0:a.semester)==null?void 0:j.course)+"-"+n(t.$t("Course"))+" ",1),Ls,e("span",Ms,n((A=a==null?void 0:a.semester)==null?void 0:A.semester)+"- "+n(t.$t("semester")),1)])]),e("td",null,[e("div",null,[g(n((E=a==null?void 0:a.academic_group)==null?void 0:E.name)+" ",1),js,e("span",As,n(a==null?void 0:a.academicYear),1)])]),e("td",null,n(a==null?void 0:a.gpa),1),e("td",null,n(a==null?void 0:a.gpa),1)])}),128))])]),s.last_page>1?(p(),I(_,os({key:0,class:"mt-2"},{...s},{"current-page":s.current_page,"onUpdate:currentPage":o[2]||(o[2]=a=>s.current_page=a)}),null,16,["current-page"])):B("",!0)])):(p(),f("div",Es,[e("h5",Fs,n(t.$t("No_data")),1),e("p",Is,n(t.$t("No_information_found")),1)]))])]),s.data.length?(p(),f("span",zs,n(s.current_page)+"-"+n((s==null?void 0:s.data.length)+s.per_page*(s.current_page-1))+"/ "+n(t.$t("Total_Point"))+": "+n(s.total),1)):B("",!0)]),e("div",Ds,[e("div",Vs,[e("div",qs,[e("form",{class:"row",onSubmit:ns(V,["prevent"])},[e("div",xs,[m(c,{id:"yu",value:s.search,"onUpdate:value":o[3]||(o[3]=a=>s.search=a),class:"form-control",placeholder:u(r)("choose__fish__student__passport__code")},null,8,["value","placeholder"])]),Rs],32),e("div",Hs,[e("div",Ks,[m(O,{"filter-option":u(v).filterOptionByName,"show-search":"","allow-clear":"",value:s.edu_plan_id,"onUpdate:value":o[4]||(o[4]=a=>s.edu_plan_id=a),"field-names":{value:"id",label:"name"},options:d.eduPlanOptions,placeholder:t.$t("Please_select_curriculum")},null,8,["filter-option","value","options","placeholder"])]),e("div",Zs,[m(O,{"filter-option":u(v).filterOptionByName,"show-search":"","allow-clear":"",value:s.academic_year_id,"onUpdate:value":o[5]||(o[5]=a=>s.academic_year_id=a),"field-names":{value:"id",label:"name"},options:d.academicYearsOptions,placeholder:u(r)("Choose_Education_Year"),disabled:!s.edu_plan_id},null,8,["filter-option","value","options","placeholder","disabled"])]),e("div",Js,[m(O,{"filter-option":u(v).filterOptionByName,"show-search":"","allow-clear":"",value:s.semester_id,"onUpdate:value":o[6]||(o[6]=a=>s.semester_id=a),"field-names":{value:"id",label:"name"},options:d.semesterOptions,placeholder:u(r)("Choose_Semester"),disabled:!s.academic_year_id},null,8,["filter-option","value","options","placeholder","disabled"])]),e("div",Qs,[m(O,{"filter-option":u(v).filterOptionByName,"show-search":"","allow-clear":"",value:s.academic_group_id,"onUpdate:value":o[7]||(o[7]=a=>s.academic_group_id=a),"field-names":{value:"id",label:"name"},options:d.academicGroupOptions,placeholder:u(r)("Choose_Group"),disabled:!s.semester_id},null,8,["filter-option","value","options","placeholder","disabled"])]),e("div",Ws,[e("button",{class:"btns c-delet",type:"button",onClick:G},[Xs,g(n(t.$t("Clear")),1)])])])])]),e("div",se,[e("div",ee,[e("div",ae,[e("label",te,n(t.$t("Decree")),1),m(O,{"filter-option":u(v).filterOptionByName,"show-search":"","allow-clear":"",value:s.command_id,"onUpdate:value":o[8]||(o[8]=a=>s.command_id=a),"field-names":{value:"id",label:"name"},options:d.orderOptions,placeholder:u(r)("Select_the_command")},null,8,["filter-option","value","options","placeholder"]),N.command_id?(p(),f("span",oe,n(N.command_id[0]),1)):B("",!0)]),e("div",ne,[e("label",le,n(t.$t("Circulation_Doc_Date")),1),m(c,{value:s.dateCommand,"onUpdate:value":o[9]||(o[9]=a=>s.dateCommand=a),placeholder:"YYYY-MM-DD","value-format":"YYYY-MM-DD",disabled:""},null,8,["value"])]),e("div",de,[e("label",ie,n(t.$t("Count_of_Contract_Student")),1),m(c,{disabled:"",value:(L=s==null?void 0:s.students)==null?void 0:L.length},null,8,["value"])]),e("div",re,[e("button",{class:"btns c-save",disabled:!((M=s==null?void 0:s.students)!=null&&M.length)||!s.command_id,type:"button",onClick:q},[ue,g(n(t.$t("Send_Grades")),1)],8,ce)])])])])])])}}});export{ke as default};
